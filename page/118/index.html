<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"chenzhiheng.cn","root":"/","scheme":"Pisces","version":"7.7.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="陈志恒的技术博客">
<meta property="og:url" content="http://chenzhiheng.cn/page/118/index.html">
<meta property="og:site_name" content="陈志恒的技术博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Zhiheng Chen">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://chenzhiheng.cn/page/118/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>陈志恒的技术博客</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?6bc779d0e3be483fc01e871fbb7cef3d";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">陈志恒的技术博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://chenzhiheng.cn/2017/07/05/web%E5%BC%80%E5%8F%91/czh_blog/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E8%A1%A5%E5%85%85%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈志恒的技术博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/07/05/web%E5%BC%80%E5%8F%91/czh_blog/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E8%A1%A5%E5%85%85%EF%BC%89/" class="post-title-link" itemprop="url">设计模式（补充）</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-07-05 02:38:00" itemprop="dateCreated datePublished" datetime="2017-07-05T02:38:00+08:00">2017-07-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-12 19:32:44" itemprop="dateModified" datetime="2020-04-12T19:32:44+08:00">2020-04-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web%E5%BC%80%E5%8F%91-czh-blog-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" itemprop="url" rel="index">
                    <span itemprop="name">web开发/czh_blog/设计模式</span>
                  </a>
                </span>
            </span>

          
            <span id="/2017/07/05/web%E5%BC%80%E5%8F%91/czh_blog/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E8%A1%A5%E5%85%85%EF%BC%89/" class="post-meta-item leancloud_visitors" data-flag-title="设计模式（补充）" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>4.1k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>4 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2017年7月5日 下午2:38</p>
<p>2019年3月29日 下午2:04 复习</p>
<h2 id="三种分类"><a href="#三种分类" class="headerlink" title="三种分类"></a>三种分类</h2><p>创建型：创建类和对象<br>结构模式：有利于在原先的程序基础上进行改进<br>行为模式：模拟人类世界的各种复杂的关系</p>
<h2 id="六个原则"><a href="#六个原则" class="headerlink" title="六个原则"></a>六个原则</h2><p><a href="http://blog.csdn.net/odeviloo/article/details/52382338" target="_blank" rel="noopener">一天一个设计模式—分类与六大原则 - Devil的技术小屋        - 博客频道 - CSDN.NET</a></p>
<ol>
<li>开闭原则：<ol>
<li>对扩展开放，对修改关闭</li>
<li>为了达到这样的效果，我们需要使用接口和抽象类</li>
</ol>
</li>
<li>里氏代换原则：LSP</li>
<li>依赖倒转：<ol>
<li>针对接口编程，依赖于抽象不依赖于具体</li>
</ol>
</li>
<li>接口隔离原则：<ol>
<li>使用多个隔离的接口，比使用单个接口要好。还可以降低类之间的耦合度的意思</li>
</ol>
</li>
<li>吉米特法则：（最少知道原则）<ol>
<li>一个实体应当尽量减少和其他实体放生相互作用</li>
</ol>
</li>
<li>合成复用原则：<ol>
<li>使用合成/聚合模式</li>
</ol>
</li>
</ol>
<h2 id="单例模式："><a href="#单例模式：" class="headerlink" title="单例模式："></a>单例模式：</h2><ol>
<li>一个类有且仅有一个实例，并且自行实例化向整个系统提供</li>
<li>多线程不能访问</li>
</ol>
<h3 id="两种写法："><a href="#两种写法：" class="headerlink" title="两种写法："></a>两种写法：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 懒汉式</span></span><br><span class="line"><span class="comment"> * @author czh</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingleClass</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> SingleClass single = <span class="keyword">null</span>;</span><br><span class="line">	<span class="comment">//私有构造方法</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">SingleClass</span><span class="params">()</span></span>&#123;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//静态方法生成对象</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SingleClass <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(single == <span class="keyword">null</span>)&#123;</span><br><span class="line">			single = <span class="keyword">new</span> SingleClass();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> single;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 饿汉式</span></span><br><span class="line"><span class="comment"> * @author czh</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingleClass</span> </span>&#123;</span><br><span class="line">	<span class="comment">//这里直接声明对象</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> SingleClass single = <span class="keyword">new</span> SingleClass();</span><br><span class="line">	<span class="comment">//私有构造方法</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">SingleClass</span><span class="params">()</span></span>&#123;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//静态方法生成对象</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SingleClass <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> single;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="代理模式"><a href="#代理模式" class="headerlink" title="代理模式"></a>代理模式</h2><p>使用场景：<br>    1. 修改原有的的方法来适应。这样违反了“开闭”原则<br>    2. 就是采用一个代理类调用原有的方法，且对产生的结果进行控制。这种方法就是代理模式。<br>    3. <strong>估计将来要对方法进行改写，那么就提前使用代理模式</strong><br>    4. <strong>用接口的原因</strong>：<br>        1. 为了保证方法的相同，方便客户端更方便的切换到代理类中<br>    5. 与<strong>装饰模式的区别</strong>：<br>        1. 装饰类是对<strong>类</strong>的扩展<br>        2. 代理模式是对<strong>方法</strong>的扩展<br><img src="/2017/07/05/web%E5%BC%80%E5%8F%91/czh_blog/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E8%A1%A5%E5%85%85%EF%BC%89/%E2%80%A2%20StarUML%20StarUML,%20%E4%BB%8A%E5%A4%A9%20at%20%E4%B8%8B%E5%8D%885.11.53.png" alt><br>                    图1     代理模式<br><strong>代码在后</strong></p>
<h2 id="适配器模式"><a href="#适配器模式" class="headerlink" title="适配器模式"></a>适配器模式</h2><pre><code>1. 主要分为三类：
    1. 类的适配器模式、
    2. 对象的适配器模式、
    3. 接口的适配器模式。
2. **对类的扩充**：当一个类需要满足是一个新的接口
3. **对对象的扩充**：当一个对象需要满足一个新的接口
4. **对接口的缩小**：当一个类需要满足部分当前接口的方法</code></pre><p><img src="/2017/07/05/web%E5%BC%80%E5%8F%91/czh_blog/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E8%A1%A5%E5%85%85%EF%BC%89/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%20%5B%E5%85%BC%E5%AE%B9%E6%A8%A1%E5%BC%8F" alt><br>                    图2    对类的扩充<br>注：<br>    1. 这里是继承。<br>    2. method1()继承自Source，method2()继承与Targetble接口<br>    3. <strong>Adapter继承来的method1()，可以充当接口中的method1()</strong><br><img src="/2017/07/05/web%E5%BC%80%E5%8F%91/czh_blog/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E8%A1%A5%E5%85%85%EF%BC%89/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%20%5B%E5%85%BC%E5%AE%B9%E6%A8%A1%E5%BC%8F" alt><br>注：<br>    1. 这里是依赖。<br>    2. adapter中的Method1()调用source的method1()<br><img src="/2017/07/05/web%E5%BC%80%E5%8F%91/czh_blog/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E8%A1%A5%E5%85%85%EF%BC%89/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%20%5B%E5%85%BC%E5%AE%B9%E6%A8%A1%E5%BC%8F" alt><br>注：<br>    1. 这里是有一个抽象类Wrapper,<strong>起一个过滤作用</strong></p>
<p><strong>代码在后</strong></p>
<h2 id="几个问题"><a href="#几个问题" class="headerlink" title="几个问题"></a>几个问题</h2><h3 id="为啥组合优于继承"><a href="#为啥组合优于继承" class="headerlink" title="为啥组合优于继承"></a>为啥组合优于继承</h3><ol>
<li>首先要确认，组合可以完成继承的任务</li>
<li>但是组合可以通过包含多个对象扩充自己的功能</li>
<li>而继承，只能获得父类的功能，要想扩充得自己写</li>
</ol>
<h3 id="怎样面向接口编程"><a href="#怎样面向接口编程" class="headerlink" title="怎样面向接口编程"></a>怎样面向接口编程</h3><ol>
<li>接口可以理解成<strong>规则</strong></li>
<li>一个公司有了规则，大家才能按一致的目标前进</li>
<li>试想没有<strong>规则</strong>，按大家的<strong>默契</strong>，也可以完成同样的目的</li>
<li>但是，<strong>默契</strong>容易忘，公司有了新的员工，或者我离开公司久了（我代码好久没有看了）</li>
<li>那么我一看<strong>规则</strong>（接口），那么就可以很快的学会。</li>
</ol>
<h3 id="站在扩充的角度去分类设计模式"><a href="#站在扩充的角度去分类设计模式" class="headerlink" title="站在扩充的角度去分类设计模式"></a>站在扩充的角度去分类设计模式</h3><ol>
<li>适配器模式+代理模式+装饰模式</li>
<li>这三种都是可以在代码本身的基础进行扩充的</li>
<li>所以：<strong>当当前代码需要扩种的时候要从这三种里选</strong></li>
</ol>
<p><strong>注：其他模式的分类，我依然是按上一篇文章给开头的分类表分的</strong>，网上的好多分类方法我现在还理解不了，只能按自己的来了。</p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><h3 id="代理模式-1"><a href="#代理模式-1" class="headerlink" title="代理模式"></a>代理模式</h3><p>Proxy.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> package4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Proxy</span> <span class="keyword">implements</span> <span class="title">Sourceable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Source source;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Proxy</span><span class="params">(Source source)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.source = source;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		before();</span><br><span class="line">		source.method();</span><br><span class="line">		after();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"前面的准备"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"后面的处理"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Source.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> package4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Source</span> <span class="keyword">implements</span> <span class="title">Sourceable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">"Source 的方法执行"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Sourceable.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> package4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Sourceable</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">method</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="适配器模式-1"><a href="#适配器模式-1" class="headerlink" title="适配器模式"></a>适配器模式</h3><ol>
<li>对类的扩充+对对象的扩充<br>Source.java<strong>(adapt1.java+adapt2.java公用)</strong><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> package5;</span><br><span class="line"><span class="comment">//原类</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Source</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"method1"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
TargetInterface.java<strong>(adapt1.java+adapt2.java公用)</strong><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> package5;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">TargetInterface</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">mehtod2</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>Adapt1.java：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> package5;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Adapt1</span> <span class="keyword">extends</span> <span class="title">Source</span> <span class="keyword">implements</span> <span class="title">TargetInterface</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mehtod2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">"method2"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Adapt2.java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> package5;</span><br><span class="line"><span class="comment">//第二种适配器</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Adapt2</span> <span class="keyword">implements</span> <span class="title">TargetInterface</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Source source;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Adapt2</span><span class="params">(Source source)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		source = source;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mehtod2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		source.method1();</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2019年3月29日 下午2:02 添加</p>
<ol>
<li><p>模式1和模式2最大的不同在于adapt2.java有：</p>
<ol>
<li><code>private Source Source;//这句是最大的不同</code></li>
</ol>
</li>
<li><p>但是目的是相同是：用新建的adapt类来代替原先的soures原始类，给source类添加一个method2()的方法。</p>
<ol>
<li>注意：已经写死的类source本身不论如何都无法添加method2()了，我们只能让他的适配器adapt去实现这个愿望了</li>
</ol>
</li>
<li><p>对接口方法的过滤<br>代码顺序按照UML图<br>SourceInterface.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> package5;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SourceInterface</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">method2</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">method3</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>AbstractSource.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> package5;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractSource</span> <span class="keyword">implements</span> <span class="title">SourceInterface</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"method1"</span>);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"method2"</span>);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"method3"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Source1.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> package5;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 我需要那个方法，我就实现那个方法</span></span><br><span class="line"><span class="comment"> * 原来直接implement接口，三个方法我必须都实现。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Source1</span> <span class="keyword">extends</span> <span class="title">AbstractSource</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"改写method1方法"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://chenzhiheng.cn/2017/07/03/web%E5%BC%80%E5%8F%91/czh_java/7.03%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈志恒的技术博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/07/03/web%E5%BC%80%E5%8F%91/czh_java/7.03%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" class="post-title-link" itemprop="url">7.03网络编程</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-07-03 08:00:00" itemprop="dateCreated datePublished" datetime="2017-07-03T08:00:00+08:00">2017-07-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-03-12 20:06:07" itemprop="dateModified" datetime="2020-03-12T20:06:07+08:00">2020-03-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web%E5%BC%80%E5%8F%91-czh-java/" itemprop="url" rel="index">
                    <span itemprop="name">web开发/czh_java</span>
                  </a>
                </span>
            </span>

          
            <span id="/2017/07/03/web%E5%BC%80%E5%8F%91/czh_java/7.03%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" class="post-meta-item leancloud_visitors" data-flag-title="7.03网络编程" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>11k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>10 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2017年7月3日 上午8:00</p>
<p>TCP：传输控制协议<br>UDP：数据报文协议</p>
<h2 id="端口-：16位"><a href="#端口-：16位" class="headerlink" title="端口 ：16位"></a>端口 ：16位</h2><p>三类</p>
<ol>
<li>公认端口：0~1023</li>
<li>注册端口：1024-49151</li>
<li>动态和、私有端口：49151~65535</li>
</ol>
<h2 id="常用端口："><a href="#常用端口：" class="headerlink" title="常用端口："></a>常用端口：</h2><p>Telent:23<br>Stmp:25<br>Ftp:21<br>Http:80</p>
<h2 id="常用对象："><a href="#常用对象：" class="headerlink" title="常用对象："></a>常用对象：</h2><p>ServerSocket</p>
<ol>
<li>ServerSocket(port):创想serverSocket实例</li>
<li>accept()等待客户端连接</li>
<li>Public InetAddress getInetAddress()返回服务器的Ip地址</li>
<li>Public boolean isCloseed();赶回ServerSocket的关闭状态</li>
<li>Public void close();关闭ServerSockets</li>
</ol>
<p>Socket</p>
<ol>
<li>Socket(String host,int port):构造socket对象，同时，指定要连接服务器的主机名和端口号</li>
<li>public inputStream getInputStream:返回套接字的输入流</li>
<li>pubilc OutputStream .getOutputStream()返回套接字的输入流</li>
<li>Public boolean isClosed()判断套接字是否关闭</li>
<li>Public void close()：关闭socket</li>
</ol>
<p>InetAddress</p>
<ol>
<li>public static InetAddress(String host):通过主机名或IP地址得到一个InetAddress对象</li>
<li>String getHostName();获取ip地址对应的主机名</li>
<li>String getHostAddress();返回ip地址字符串</li>
</ol>
<p><strong>注：他们处理的都是字节流</strong></p>
<h2 id="使用PrintWriter的例程"><a href="#使用PrintWriter的例程" class="headerlink" title="使用PrintWriter的例程"></a>使用PrintWriter的例程</h2><p>网络编程的<strong>服务端</strong>步骤比较单一：<br>    1. ServerSocket对象<br>    2. 创建Socket对象<br>    3. inputStream对象<br>    4. BufferedReader对象<br>    5. outputStream对象<br>    6. printWriter对象<br>    7. 读<br>    8. 写<br>注：<strong>他们都是一条流水线，前一个对象产生下一个对象</strong><br>例程： </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Server1</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">	</span><br><span class="line">		<span class="comment">//创建服务端实例对象，需要指定端口</span></span><br><span class="line">		</span><br><span class="line">		ServerSocket ss = <span class="keyword">new</span> ServerSocket(<span class="number">7799</span>);</span><br><span class="line">	</span><br><span class="line">		<span class="comment">//接受客户端连接，创建socket对象</span></span><br><span class="line"></span><br><span class="line">		Socket socket= ss.accept();</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//获取输入流，读取客户端传过来的数据</span></span><br><span class="line">		InputStream is = socket.getInputStream();</span><br><span class="line">		BufferedReader br  = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(is));</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//输出流 ，向客户端返回数据 </span></span><br><span class="line">		PrintWriter pw= <span class="keyword">new</span> PrintWriter(socket.getOutputStream());</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//服务端读</span></span><br><span class="line">		String content = br.readLine();</span><br><span class="line">		<span class="keyword">if</span>(content != <span class="keyword">null</span>)&#123;</span><br><span class="line">			System.out.println(<span class="string">"获取到的数据是："</span>+content);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//服务端写</span></span><br><span class="line">		pw.write(<span class="string">"服务端收到数据"</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//倒序关闭</span></span><br><span class="line">		pw.close();</span><br><span class="line">		br.close();</span><br><span class="line">		is.close();</span><br><span class="line">		socket.close();</span><br><span class="line">		ss.close();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>网络编程的<strong>客户端</strong>步骤比较单一：<br>    1. 创建Socket对象<br>    2. outputStream对象<br>    3. printWriter对象<br>    4. inputStream对象<br>    5. BufferedReader对象<br>    6. 写<br>    7. 读<br>例程：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.net.UnknownHostException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> UnknownHostException, IOException </span>&#123;</span><br><span class="line">		<span class="comment">//创建socket对象，连接服务端</span></span><br><span class="line">		Socket socket = <span class="keyword">new</span> Socket(<span class="string">"127.0.0.1"</span>,<span class="number">7799</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//写对象</span></span><br><span class="line">		OutputStream os = socket.getOutputStream();</span><br><span class="line">		PrintWriter pw = <span class="keyword">new</span> PrintWriter(os);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//读对象</span></span><br><span class="line">		InputStream is = socket.getInputStream();</span><br><span class="line">		BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(is));</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//客户端写</span></span><br><span class="line">		pw.write(<span class="string">"我要访问服务端"</span>);</span><br><span class="line">		pw.flush();</span><br><span class="line">		socket.shutdownOutput();<span class="comment">//确保数据传输到服务端</span></span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//客户端读</span></span><br><span class="line">		String result = br.readLine();</span><br><span class="line">		<span class="keyword">if</span>(result != <span class="keyword">null</span>)&#123;</span><br><span class="line">			System.out.println(<span class="string">"获取到的数据是："</span>+result);</span><br><span class="line">		&#125;</span><br><span class="line">		br.close();</span><br><span class="line">		socket.close();</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注：</p>
<ol>
<li><strong>他们都是一条流水线，前一个对象产生下一个对象</strong></li>
<li><strong>客户端和服务的不能同时创建输入流</strong></li>
<li><strong>这里socket.shutdownOutput的作用</strong><ol>
<li><a href="http://blog.csdn.net/wanwanjava/article/details/20848889" target="_blank" rel="noopener">【TCP】s.shutdownOutput();这行代码的牛逼之处 - 闲着没事_玩玩JAVA的专栏        - 博客频道 - CSDN.NET</a></li>
<li>第一种方法close流，相当于给流中加入一个结束标记-1</li>
<li>第二种方法：s.shutdownOutput();关闭客户端的输出流。相当于给流中加入一个结束标记-1.</li>
<li>就像字符串的结尾一样</li>
<li>服务端没写socket.shutdownOutput，用pw.close代替了</li>
</ol>
</li>
</ol>
<p>错误：没有打开服务端就开启客户端<br><img src="/2017/07/03/web%E5%BC%80%E5%8F%91/czh_java/7.03%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/workspace%20-%20Java%20-%20Class703-src-Client.java%20-%20Eclipse%20Eclipse,%20%E4%BB%8A%E5%A4%A9%20at%20%E4%B8%8A%E5%8D%889.31.47.png" alt></p>
<p>扩展：<br>以上代码使用<br>DateOutputStream 和 DateInputStream也可以</p>
<h2 id="使用对象流的例程："><a href="#使用对象流的例程：" class="headerlink" title="使用对象流的例程："></a>使用对象流的例程：</h2><p>客户端：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> package1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.net.UnknownHostException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> UnknownHostException, IOException </span>&#123;</span><br><span class="line">		Socket socket = <span class="keyword">new</span> Socket(<span class="string">"127.0.0.1"</span>,<span class="number">7799</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//pet对象</span></span><br><span class="line">		Pet pet  = <span class="keyword">new</span> Pet(<span class="string">"狗"</span>,<span class="number">1</span>);</span><br><span class="line">		<span class="comment">//写对象</span></span><br><span class="line">		OutputStream os = socket.getOutputStream();</span><br><span class="line">		ObjectOutputStream oos = <span class="keyword">new</span> ObjectOutputStream(os);</span><br><span class="line">		<span class="comment">//读对象</span></span><br><span class="line">		InputStream is = socket.getInputStream();</span><br><span class="line">		BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(is));</span><br><span class="line">		<span class="comment">//写(对象流不用shutdown，不知道为啥)</span></span><br><span class="line">		oos.writeObject(pet);</span><br><span class="line">		oos.flush();</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//读</span></span><br><span class="line">		String string = br.readLine();</span><br><span class="line">		<span class="keyword">if</span>(string != <span class="keyword">null</span>)&#123;</span><br><span class="line">			System.out.println(<span class="string">"接收到的信息是："</span>+string);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		br.close();</span><br><span class="line">		is.close();</span><br><span class="line">		oos.close();</span><br><span class="line">		os.close();</span><br><span class="line">		socket.close();</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">	&#125;	</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>服务端：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> package1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.net.UnknownHostException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> UnknownHostException, IOException </span>&#123;</span><br><span class="line">		Socket socket = <span class="keyword">new</span> Socket(<span class="string">"127.0.0.1"</span>,<span class="number">7799</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//pet对象</span></span><br><span class="line">		Pet pet  = <span class="keyword">new</span> Pet(<span class="string">"狗"</span>,<span class="number">1</span>);</span><br><span class="line">		<span class="comment">//写对象</span></span><br><span class="line">		OutputStream os = socket.getOutputStream();</span><br><span class="line">		ObjectOutputStream oos = <span class="keyword">new</span> ObjectOutputStream(os);</span><br><span class="line">		<span class="comment">//读对象</span></span><br><span class="line">		InputStream is = socket.getInputStream();</span><br><span class="line">		BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(is));</span><br><span class="line">		<span class="comment">//写(对象流不用shutdown，不知道为啥)</span></span><br><span class="line">		oos.writeObject(pet);</span><br><span class="line">		oos.flush();</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//读</span></span><br><span class="line">		String string = br.readLine();</span><br><span class="line">		<span class="keyword">if</span>(string != <span class="keyword">null</span>)&#123;</span><br><span class="line">			System.out.println(<span class="string">"接收到的信息是："</span>+string);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		br.close();</span><br><span class="line">		is.close();</span><br><span class="line">		oos.close();</span><br><span class="line">		os.close();</span><br><span class="line">		socket.close();		</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Pet类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> package1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Pet</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Pet</span><span class="params">(String name, <span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>错误：Pet类没有序列号接口： implements Serializable<br><img src="/2017/07/03/web%E5%BC%80%E5%8F%91/czh_java/7.03%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/workspace%20-%20Java%20-%20Class703-src-package1-Client.java%20-%20Eclipse%20Eclipse,%20%E4%BB%8A%E5%A4%A9%20at%20%E4%B8%8A%E5%8D%8810.24.16.png" alt></p>
<h2 id="服务器常开例程（死循环方式）"><a href="#服务器常开例程（死循环方式）" class="headerlink" title="服务器常开例程（死循环方式）"></a>服务器常开例程（死循环方式）</h2><p>客户端</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> package2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.net.UnknownHostException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> UnknownHostException, IOException </span>&#123;</span><br><span class="line"><span class="comment">//		Socket socket = new Socket("192.168.12.35",8800);</span></span><br><span class="line">		Socket socket = <span class="keyword">new</span> Socket(<span class="string">"127.0.0.1"</span>,<span class="number">7799</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//pet对象</span></span><br><span class="line">		Pet pet  = <span class="keyword">new</span> Pet(<span class="string">"狗"</span>,<span class="string">"狗"</span>,<span class="string">"男"</span>);</span><br><span class="line">		<span class="comment">//写对象</span></span><br><span class="line">		OutputStream os = socket.getOutputStream();</span><br><span class="line">		ObjectOutputStream oos = <span class="keyword">new</span> ObjectOutputStream(os);</span><br><span class="line">		<span class="comment">//读对象</span></span><br><span class="line">		InputStream is = socket.getInputStream();</span><br><span class="line">		BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(is));</span><br><span class="line">		<span class="comment">//写(对象流不用shutdown，不知道为啥)</span></span><br><span class="line">		oos.writeObject(pet);</span><br><span class="line">		oos.flush();</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//读</span></span><br><span class="line">		String string = br.readLine();</span><br><span class="line">		<span class="keyword">if</span>(string != <span class="keyword">null</span>)&#123;</span><br><span class="line">			System.out.println(<span class="string">"接收到的信息是："</span>+string);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		br.close();</span><br><span class="line">		is.close();</span><br><span class="line">		oos.close();</span><br><span class="line">		os.close();</span><br><span class="line">		socket.close();</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>pet类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> package2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Pet</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> String type;</span><br><span class="line">	<span class="keyword">private</span> String sex;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Pet</span><span class="params">(String name, String type, String sex)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.type = type;</span><br><span class="line">		<span class="keyword">this</span>.sex = sex;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> type;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setType</span><span class="params">(String type)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.type = type;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getSex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> sex;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSex</span><span class="params">(String sex)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.sex = sex;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>服务端：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> package2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.FileWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Server</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException </span>&#123;</span><br><span class="line">		 </span><br><span class="line">		</span><br><span class="line">		<span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">			ServerSocket ss = <span class="keyword">new</span> ServerSocket(<span class="number">7799</span>);</span><br><span class="line">			Socket socket = ss.accept();</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//输入流</span></span><br><span class="line">			InputStream is = socket.getInputStream();</span><br><span class="line">			ObjectInputStream br = <span class="keyword">new</span> ObjectInputStream(is);</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//输出流</span></span><br><span class="line">			OutputStream os = socket.getOutputStream();</span><br><span class="line">			PrintWriter pw = <span class="keyword">new</span> PrintWriter(os);</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//输入</span></span><br><span class="line">			Pet pet = (Pet) br.readObject();</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">if</span>(pet != <span class="keyword">null</span>)&#123;</span><br><span class="line">				System.out.println(<span class="string">"name : "</span>+pet.getName()+<span class="string">"id :"</span>+pet.getSex());</span><br><span class="line">				<span class="comment">//文件写入</span></span><br><span class="line">				FileWriter fw = <span class="keyword">new</span> FileWriter(<span class="string">"hello_pet.txt"</span>);</span><br><span class="line">				BufferedWriter bw = <span class="keyword">new</span> BufferedWriter(fw);</span><br><span class="line">				bw.write(<span class="string">"name : "</span>+pet.getName()+<span class="string">"id :"</span>+pet.getSex());</span><br><span class="line">				bw.flush();</span><br><span class="line">				bw.close();</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//输出</span></span><br><span class="line">			pw.write(<span class="string">"客户端已得到pet对象"</span>);</span><br><span class="line">			</span><br><span class="line">			</span><br><span class="line">			pw.close();</span><br><span class="line">			os.close();</span><br><span class="line">			br.close();</span><br><span class="line">			is.close();</span><br><span class="line">			socket.close();</span><br><span class="line">			ss.close();</span><br><span class="line">		&#125;	</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注：<br>    1. 通过换host可以实现局域网下访问，要有以下两个条件<br>        1. 但是需要有相同的序列号这里使用的是IL<br>        2. Pet所在的包要相同</p>
<h2 id="服务器常开例程2（死循环方式-Thread）"><a href="#服务器常开例程2（死循环方式-Thread）" class="headerlink" title="服务器常开例程2（死循环方式+Thread）"></a>服务器常开例程2（死循环方式+Thread）</h2><p>服务端：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 宠物店 服务器端 </span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PetServer</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="comment">//1.建立一个服务器Socket（ServerSocket）绑定指定端口并开始监听</span></span><br><span class="line">			ServerSocket serverSocket=<span class="keyword">new</span> ServerSocket(<span class="number">8800</span>);</span><br><span class="line">			<span class="comment">//2.使用accept()方法阻塞等待监听，获得新的连接</span></span><br><span class="line">			Socket socket=<span class="keyword">null</span>;</span><br><span class="line">			<span class="comment">//记录注册宠物的数量</span></span><br><span class="line">			<span class="keyword">int</span> num=<span class="number">0</span>;</span><br><span class="line">			<span class="comment">//一直处于监听状态</span></span><br><span class="line">			<span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">				socket=serverSocket.accept();</span><br><span class="line">				ServerThread serverThread=<span class="keyword">new</span> ServerThread(socket);</span><br><span class="line">				serverThread.start();</span><br><span class="line">				num++;</span><br><span class="line">				System.out.println(<span class="string">"有"</span>+num+<span class="string">"只宠物在本店注册!\n"</span>);</span><br><span class="line">				</span><br><span class="line">				<span class="comment">//获得客户（宠物主人）的IP信息</span></span><br><span class="line">				InetAddress ia=socket.getInetAddress();</span><br><span class="line">				<span class="comment">//获得ip</span></span><br><span class="line">				String ip=ia.getHostAddress();</span><br><span class="line">				System.out.println(<span class="string">"本宠物主人的IP地址为："</span>+ip);</span><br><span class="line">				<span class="comment">//获得主机名</span></span><br><span class="line">				String name=ia.getHostName();</span><br><span class="line">				System.out.println(<span class="string">"本宠物主人的主机名为："</span>+name);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Thread类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 专门的线程类</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServerThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">	<span class="comment">//和本线程相关的Socket</span></span><br><span class="line">	Socket socket=<span class="keyword">null</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">ServerThread</span><span class="params">(Socket socket)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.socket=socket;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//线程启动:响应客户请求</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="comment">//获得输入流</span></span><br><span class="line">			InputStream is=socket.getInputStream();</span><br><span class="line">			<span class="comment">//获得流：可以对对象进行反序列化</span></span><br><span class="line">			ObjectInputStream ois=<span class="keyword">new</span> ObjectInputStream(is);</span><br><span class="line">			<span class="comment">//获得输出流</span></span><br><span class="line">			OutputStream os=socket.getOutputStream();</span><br><span class="line">			PrintWriter pw=<span class="keyword">new</span> PrintWriter(os);</span><br><span class="line">			BufferedWriter writer = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> FileWriter(<span class="keyword">new</span> File(<span class="string">"pet.txt"</span>), <span class="keyword">true</span>));</span><br><span class="line">			<span class="comment">//4.读取宠物信息,将宠物信息保存到文件中去</span></span><br><span class="line">			Pet pet=(Pet)ois.readObject();</span><br><span class="line">			writer.write(<span class="string">"----宠物注册信息----"</span>);</span><br><span class="line">			writer.write(<span class="string">"姓名:"</span>+pet.getName());</span><br><span class="line">			writer.write(<span class="string">"品种："</span>+pet.getType());</span><br><span class="line">			writer.write(<span class="string">"性别："</span>+pet.getGender());</span><br><span class="line">			writer.flush();</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//给宠物主人一个响应</span></span><br><span class="line">			String reply=<span class="string">"恭喜，您的宠物已经在本店注册成功!"</span>;</span><br><span class="line">			pw.write(reply);</span><br><span class="line">			pw.flush();</span><br><span class="line">			<span class="comment">//关闭资源</span></span><br><span class="line">			pw.close();</span><br><span class="line">			os.close();</span><br><span class="line">			ois.close();</span><br><span class="line">			is.close();</span><br><span class="line">			socket.close();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="比较两种服务器常开的："><a href="#比较两种服务器常开的：" class="headerlink" title="比较两种服务器常开的："></a>比较两种服务器常开的：</h3><pre><code>1.     第一种的思路是：
    1. 服务器整体写一个循环，这个循环中包含全部的内容，ServerSocket对象和以及想的close()
    2. 这个种方法操作流程是：一个客户端访问完，这个循环走到accept()方法处，等待下一次客户端的访问（server就是一个苦力，真可怜个）。
2. 第二种的思路是：
    1. 首先是写一个循环，循环的作用是让服务器不停止运行，然后，写一个Thread类
    2. 这个类的入口是:accpet()方法产生的socket对象
    3. 执行的内容是：获取客户端内容，然后给一个回馈    
    4. Thread类写完之后，最后在while()循环中开启Thread的一个线程，并计数
    5. 这种方法执行的流程是：整个过程可以看成是一个生活场景。Server.class就像一个前台人员，她的主要任务有两个：一个是迎接来宾(client.class的访问)，一个是命令他的小弟Thread的对象去完成当前用户的要求，然后她接着笑脸迎接下一个用户（boss就是boss，美女会笑就行，她其实也没干啥）</code></pre><p><img src="/2017/07/03/web%E5%BC%80%E5%8F%91/czh_java/7.03%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/%E2%80%A2%20StarUML%20StarUML,%20%E4%BB%8A%E5%A4%A9%20at%20%E4%B8%8B%E5%8D%882.52.11.png" alt></p>
<pre><code>3. 区别：
    1. 在每次一个client访问模式下，这两种是没有区别的
    2. 但是，当多个client并行访问时，第一种是无法实现的，因为所有的任务都是他一个人来执行，干完一个才能干下一个。第二种是可以实现的，在这种情况下有一个团伙，美女boss管理者一堆小弟</code></pre><h2 id="两种客户端和服务端交互方式，其实都行，不过习惯使用第二种："><a href="#两种客户端和服务端交互方式，其实都行，不过习惯使用第二种：" class="headerlink" title="两种客户端和服务端交互方式，其实都行，不过习惯使用第二种："></a>两种客户端和服务端交互方式，其实都行，不过习惯使用第二种：</h2><p>第一种：BufferedWriter</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">OutputStream  is2 = socket.getOutputStream();</span><br><span class="line">BufferedWriter bw = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> OutputStreamWriter(is2));</span><br><span class="line"></span><br><span class="line">bw.write(<span class="string">"name : "</span>+pet.getName()+<span class="string">"id :"</span>+pet.getSex());</span><br><span class="line">bw.flush();</span><br><span class="line">bw.close();</span><br></pre></td></tr></table></figure>
<p>第二种：使用PrintWriter</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">OutputStream os = socket.getOutputStream();</span><br><span class="line">PrintWriter pw = <span class="keyword">new</span> PrintWriter(os);</span><br><span class="line"></span><br><span class="line">pw.write(<span class="string">"客户端已得到pet对象"</span>);</span><br><span class="line">pw.close();</span><br></pre></td></tr></table></figure>
<p><strong>注：细节中应该还是有区别的，没有仔细的测试！</strong></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://chenzhiheng.cn/2017/07/03/web%E5%BC%80%E5%8F%91/czh_blog/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%EF%BC%88%E7%AC%AC%E4%BA%8C%E7%89%88%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈志恒的技术博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/07/03/web%E5%BC%80%E5%8F%91/czh_blog/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%EF%BC%88%E7%AC%AC%E4%BA%8C%E7%89%88%EF%BC%89/" class="post-title-link" itemprop="url">项目结构设计（第二版）</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-07-03 04:55:00" itemprop="dateCreated datePublished" datetime="2017-07-03T04:55:00+08:00">2017-07-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-03-12 20:06:07" itemprop="dateModified" datetime="2020-03-12T20:06:07+08:00">2020-03-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web%E5%BC%80%E5%8F%91-czh-blog-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" itemprop="url" rel="index">
                    <span itemprop="name">web开发/czh_blog/设计模式</span>
                  </a>
                </span>
            </span>

          
            <span id="/2017/07/03/web%E5%BC%80%E5%8F%91/czh_blog/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%EF%BC%88%E7%AC%AC%E4%BA%8C%E7%89%88%EF%BC%89/" class="post-meta-item leancloud_visitors" data-flag-title="项目结构设计（第二版）" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2017年7月3日 下午4:55</p>
<p>这篇文章的思路是:<br>    1. 文章产生的原因<br>    2. 我总结出来的“框架”<br>    3. 对框架的说明<br>        1. 其中有哪些注意点<br>        2. 原因<br>        3. 如何解决<br>        4. 例子</p>
<h2 id="第二版改进："><a href="#第二版改进：" class="headerlink" title="第二版改进："></a>第二版改进：</h2><pre><code>1. 加了一个原则：</code></pre><p><img src="/2017/07/03/web%E5%BC%80%E5%8F%91/czh_blog/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%EF%BC%88%E7%AC%AC%E4%BA%8C%E7%89%88%EF%BC%89/Bear%20Bear,%20%E4%BB%8A%E5%A4%A9%20at%20%E4%B8%8A%E5%8D%8810.55.22.png" alt><br>    2.  封装加了一个<br><img src="/2017/07/03/web%E5%BC%80%E5%8F%91/czh_blog/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%EF%BC%88%E7%AC%AC%E4%BA%8C%E7%89%88%EF%BC%89/Bear%20Bear,%20%E4%BB%8A%E5%A4%A9%20at%20%E4%B8%8A%E5%8D%8810.56.00.png" alt><br>    3. 包的设计<br><img src="/2017/07/03/web%E5%BC%80%E5%8F%91/czh_blog/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%EF%BC%88%E7%AC%AC%E4%BA%8C%E7%89%88%EF%BC%89/Bear%20Bear,%20%E4%BB%8A%E5%A4%A9%20at%20%E4%B8%8A%E5%8D%8810.56.33.png" alt></p>
<p>项目难度分类<br>    1. 数据库设计：我做过的就是报表系统，要将表设计成数据库形式，设计难，设计出来一般性能也很差！<br>    2. 逻辑：项目中涉及到算法，一般的项目中没有<br>    3. 业务流：这的难点是你需要了解一个行业的运行流程，而且要人打交道<br>    4. 扩展性：你的老板老改需求，这扩展性我就得就是个梦！<br>    5. 性能：I don’t care and I  have no idea.<br>    6. 总结：核心还是在于与业务流的熟悉和了解</p>
<p>这篇文章产生于这样一个问题：<strong>设计一个系统，我们应该如何设计？</strong></p>
<p>于是我断断续续的想了两天，想出一个所谓的我的设计<strong>框架</strong>（这个名字我也是醉了，估计是神盾局特工看多了）</p>
<h2 id="框架：其实就是能解决某功能的方法有哪些"><a href="#框架：其实就是能解决某功能的方法有哪些" class="headerlink" title="框架：其实就是能解决某功能的方法有哪些"></a>框架：其实就是能解决某功能的方法有哪些</h2><p><img src="/2017/07/03/web%E5%BC%80%E5%8F%91/czh_blog/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%EF%BC%88%E7%AC%AC%E4%BA%8C%E7%89%88%EF%BC%89/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%20MindNode,%20%E4%BB%8A%E5%A4%A9%20at%20%E4%B8%8B%E5%8D%889.48.30.png" alt><br>             <del><strong>注：这个框架会随着经验不断更新</strong></del></p>
<h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><pre><code>1.     我总结出来的最终方法很笨：**根据功能一个个的照着框架，从上向下试。**
    1. e.g.：一个图书管理系统的超时扣费功能，他不是一个属性、一个表，就可以完全解决的，所以就需要代码逻辑来解决，而这样的功能我们要如何封装，他和其他类之间的关系是如何才是设计的重点
2.  设计时有两个原则：也是容易犯的错误
    1. **不是框架中的所有元素都要在一个系统中使用**
        1. 不是所有的系统都要使用数据库：数据库只是只是只是一个数据存储的地方而已。比如说你用java设计一个权限系统，就必须用数据库吗？当然不是，权限系统的核心是分配权限的方式，只有需要保存数据时，才需要。权限系统其实可以先设计出来结构，编码实现，然后再去往上加数据库功能，这样也是可以的。
    2. **以功能为导向**也就是需求，**业务流的重要性**
        1. 我们要拿上一个具体的功能，去想他如何去实现，而不是上来画数据库ER图，类图。
        2. 首先要确定的就是功能，一点一点的列出来，然后在思考
        3. 每个功能想的差不多，最后在要将功能进行合并
    3. **只有知道了具体的每一部分，我们才能去动手**
        1. **这里会用到大约1/3的时间**
        2. 否则一定会返工
        3. 这里包括：
            1. 数据库的ER图
            2. 类图
            3. 包有哪些，他们的作用有啥
            4. 使用了哪些设计模式，为什么要使用
            5. 等....
        4. 在这个阶段容易的就是少考虑了某些情况，想到之后你又不知道怎样往里面插
3. 具体去讲解每一部分：
    1.  **数据库**：是为了保存数据，如果不保存也可以实现相同的功能，要他还干啥
        1. 我曾经做项目的时候为了彰显一下我数据库的不错，逻辑就不在代码中写了，而是直接写在了数据库中，但是到了后来，我发现很多写的数据库中并不合适，首当其冲的就是改起来太麻烦了。
        2. 但是有些功能，如一些自动的时间处理，你需要系统在规定的时间完成特点的功能，这时候在数据库去完成就比较合适了。
        3. 还有一个例子是：我见过有人（逗比石）的sql竟然运行起来是按分钟算，我也是醉了，我就得如果要放在数据库中解决的话，可以让数据库在特定的时间，来自动处理这些数据，放到一个表中，然后用的时候我们就之间查新表就行，不用从头开始再查了
    2. **封装**：封装的目的为了让程序有段落感，可以从宽泛到具体来设计系统，尤其是一些大的系统，写的写的就忘了前面的写的啥了，但是如果封装到位，
        1. **项目做起来就是一个功能一个功能的稳步推进，自己心中也有数**。
        2. **设计时就像一个一个个黑盒一样的感觉**。    
        3. 注意当前功能（方法）归属于那个类
            1. e.g.：现实中book是没有结账功能的，而是结账的对象是book
            2. 但是，在编程中实现在book类中，确实是更加方便。
        4. **封装过程中犯过的毛病**：
            1. 测试类中方法不能太多
                1. 解决方法：可以想象这个函数代表的功能是谁的
            2. 测试类中主方法太长
                1. 用c写的习惯了，100行以内根本不认为多
                2. 而java中面向对象，**超过二十行**就觉得有点多了
            3. 构造函数顺序：
                1. 无参构造
                2. 主键构造
                3. 带所有参数的构造
            4. **注释注释注释注释**
        5.  对于框架而言我说几句废话，我是做一开始学的是php，php可以脱离框架完成的，但是我后面学了框架之后，让我想到了学长的话“框架就把人学废了”，框架做项目的确快很多，快到了即使一个人没学过php语法，我觉得给他一个星期去学框架这里指ThinkPHP，我就得也可以做出一个不错的门户网站。**学习阶段千万别依靠框架，废了你**。
    3.  **设计模式**：
        1. 目的一是**为了实现一些特定的功能**，必须使用某种模式才可以实现
            1. 根据**每种设计模式解决的问题来选择**，请看前面~设计模式~那篇文章
        2. 目的二是**为了程序员自己编码方便**
            1. 比如说工厂模式，不用它也可以，但是用了更方便
        3. 面向对象的那几个特性，我把他们包括在设计模式中</code></pre><p>包的补充：</p>
<p><img src="/2017/07/03/web%E5%BC%80%E5%8F%91/czh_blog/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%EF%BC%88%E7%AC%AC%E4%BA%8C%E7%89%88%EF%BC%89/StepService.java%20-%20BaiduTrace_AndroidSDK_v3.0.1_Sample1%20-%20%5B~-android_studio-BaiduTrace_AndroidSDK_v3.0.1_Sample1" alt><br>                            一个android的项目目录<br><img src="/2017/07/03/web%E5%BC%80%E5%8F%91/czh_blog/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%EF%BC%88%E7%AC%AC%E4%BA%8C%E7%89%88%EF%BC%89/2E829A85D679272CB7FA191FFAE56CD3.png" alt><br>                            老师推荐的java项目目录</p>
<blockquote>
<p>注：关于包的设计可以参考文章看  <del>第三方开源组件的技巧</del>  </p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://chenzhiheng.cn/2017/07/01/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/6.27~6.27%E7%BB%A7%E6%89%BF%20%20-%3E%20%20%E5%A4%9A%E6%80%81%20%20-%3E%20%20%E6%8A%BD%E8%B1%A1%20%20-%3E%20%E6%8E%A5%E5%8F%A3%20-%3E%20%E5%BC%82%E5%B8%B8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈志恒的技术博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/07/01/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/6.27~6.27%E7%BB%A7%E6%89%BF%20%20-%3E%20%20%E5%A4%9A%E6%80%81%20%20-%3E%20%20%E6%8A%BD%E8%B1%A1%20%20-%3E%20%E6%8E%A5%E5%8F%A3%20-%3E%20%E5%BC%82%E5%B8%B8/" class="post-title-link" itemprop="url">6.27~6.27继承  ->  多态  ->  抽象  -> 接口 -> 异常</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-07-01 09:30:00" itemprop="dateCreated datePublished" datetime="2017-07-01T09:30:00+08:00">2017-07-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-03-12 20:06:07" itemprop="dateModified" datetime="2020-03-12T20:06:07+08:00">2020-03-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web%E5%BC%80%E5%8F%91-czh-java-java%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index">
                    <span itemprop="name">web开发/czh_java/java基础</span>
                  </a>
                </span>
            </span>

          
            <span id="/2017/07/01/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/6.27~6.27%E7%BB%A7%E6%89%BF%20%20-%3E%20%20%E5%A4%9A%E6%80%81%20%20-%3E%20%20%E6%8A%BD%E8%B1%A1%20%20-%3E%20%E6%8E%A5%E5%8F%A3%20-%3E%20%E5%BC%82%E5%B8%B8/" class="post-meta-item leancloud_visitors" data-flag-title="6.27~6.27继承  ->  多态  ->  抽象  -> 接口 -> 异常" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>3.2k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2017年7月1日 上午9:30</p>
<h1 id="1-继承"><a href="#1-继承" class="headerlink" title="1.继承"></a>1.继承</h1><h2 id="修饰符"><a href="#修饰符" class="headerlink" title="修饰符"></a>修饰符</h2><p>修饰符：<br>         本类 同包 子类 其他（不同包）              唯一的标准<br>private  🐶                                是否在 同一个类<br>frendly          🐶                               是否在 同包            默认的<br>protect               🐶                        是否   继承<br>public                         🐶                     都</p>
<h2 id="final"><a href="#final" class="headerlink" title="final"></a>final</h2><pre><code>1. 方法          重写
2. 类              继承
3. 变量属性  修改 </code></pre><p>（当变量为对象时，final对象不可以=new Object()，但是仍然可以改变这个对象的属性）</p>
<h2 id="super"><a href="#super" class="headerlink" title="super()"></a>super()</h2><pre><code>1. super只能在写方法中</code></pre><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> package1;</span><br><span class="line"><span class="keyword">import</span> package2.A;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">	<span class="comment">//super.a =2;//Syntax error on token "&#123;", &#123; expected after this token</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">B</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">super</span>.a =<span class="number">2</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<pre><code>2. super不在过构造方法时，可以不放在第一行
3. super不能访问父类private成员
4. super()
5. super(a,b) 调用带参构造
6. super.属性
7. super.方法</code></pre><h2 id="继承的重写-方法的重载-对比"><a href="#继承的重写-方法的重载-对比" class="headerlink" title="继承的重写   方法的重载   对比"></a>继承的重写   方法的重载   对比</h2><p>重写的条件<br>    1. 类型相同/父类返回类型的子类<br>    2. 修饰符只能扩大，不能缩小<br>    3. 方法名，参数列表相同<br>    4. 构造方法不能重写</p>
<p>重写之后的方法调用：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pet dog = <span class="keyword">new</span> dog();</span><br><span class="line">dog.print();<span class="comment">//默认调用子类的print方法（print方法，子类父类中都有）</span></span><br><span class="line"></span><br><span class="line">pet dog = <span class="keyword">new</span> dog();</span><br><span class="line">dog.method();<span class="comment">//不能调用子类特有方法（method 只有子类中有）</span></span><br></pre></td></tr></table></figure>

<p>  重载的条件<br>    1. 同一个类中<br>    2. 参数列表不同<br>    3. 方法名相同<br>    4. 和返回值，访问修饰符无关</p>
<h2 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a>instanceof</h2><pre><code>1. pet instanceof Dog 
2. instanceof 使用：对象.instanceof(父类/接口)</code></pre><h1 id="2-多态"><a href="#2-多态" class="headerlink" title="2.多态"></a>2.多态</h1><h2 id="多态概念-要求（多态的前提是继承）"><a href="#多态概念-要求（多态的前提是继承）" class="headerlink" title="多态概念+要求（多态的前提是继承）"></a>多态概念+要求（多态的前提是继承）</h2><p>多态概念：同一个引用类型，使用不同的实例而执行不同操作<br>父类存在的地方一般都能使用子类代替</p>
<pre><code>1. 要素：
    1. 子类重写父类分方法
    2. 使用父类的类型
2. 使用的地方：
    1. 方法参数
    2. 方法返回值</code></pre><h2 id="对java继承的测试（通过this）"><a href="#对java继承的测试（通过this）" class="headerlink" title="对java继承的测试（通过this）"></a>对java继承的测试（通过this）</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//父类</span></span><br><span class="line">	<span class="keyword">package</span> package3;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">		<span class="keyword">private</span> <span class="keyword">int</span> site = <span class="number">4</span>; <span class="comment">//座位数 </span></span><br><span class="line">		</span><br><span class="line">		Car()&#123;</span><br><span class="line">			System.out.println (<span class="string">"载客量是"</span>+site+<span class="string">"人"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSite</span><span class="params">(<span class="keyword">int</span> site)</span></span>&#123; </span><br><span class="line">			<span class="keyword">this</span>.site = site;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">			System.out.print(<span class="string">"载客量是"</span>+<span class="keyword">this</span>.site+<span class="string">"人"</span>); </span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//子类</span></span><br><span class="line">	<span class="keyword">package</span> package3;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bus</span> <span class="keyword">extends</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">		Bus(<span class="keyword">int</span> site)&#123;</span><br><span class="line">			<span class="comment">//这三个的输出结果是一样的</span></span><br><span class="line">			<span class="comment">//this.setSite(site); </span></span><br><span class="line">			<span class="comment">//super.setSite(site);</span></span><br><span class="line">			setSite(site);</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="comment">//	public void setSite(int site)&#123; </span></span><br><span class="line">	<span class="comment">//		super.site = site;</span></span><br><span class="line">	<span class="comment">//		//this.site = site;</span></span><br><span class="line">	<span class="comment">//	&#125;</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//测试类</span></span><br><span class="line">	<span class="keyword">package</span> package3;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">			Bus bus = <span class="keyword">new</span> Bus(<span class="number">20</span>);</span><br><span class="line">			bus.print();</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>总结：<br>    1. 在继承中，如果子类没有重写父类的方法，那么子类是调用的是父类的方法<br>    2. 这里的调用，是在父类中执行，而不是在子类中执行（原来理解的是在子类中执行）<br>    3. 因为：继承下来的setSite()方法中写的是this，java有一下几种<br>        1. 继承下来将this改为super，那么就无法操作父类中的私有方法，所以不可能<br>        2. 子类中还是保持this，那么，this指代的是子类，所以不可能父类私有属性，所以不可能<br>        3. 这个this还是指向的父类，那么，说明本身父类也是存在的，像C++一样，在产生子类对象的时候，父类对象其实也产生了，那么这个setSite()其实父类对象自己执行的<br>    4. 这三个的输出结果是一样的<br>            this.setSite(site);<br>            super.setSite(site);<br>            setSite(site);<br>    5. 继承不是拥有这项技能，而是能让父类帮你干，你自己其实不会。</p>
<h1 id="3-抽象"><a href="#3-抽象" class="headerlink" title="3.抽象"></a>3.抽象</h1><h2 id="抽象类要求"><a href="#抽象类要求" class="headerlink" title="抽象类要求"></a>抽象类要求</h2><pre><code>1. 抽象类不能实例化  --- 因为没有意义
2. `Pet pet = new Dog() //pet是abstract`
3. 是对的  这只是一个指针指向 没有分配空间进行实例化
4. 抽象类中可以有0个或者多个抽象方法  
5. 子类中，抽象方法在子类中必须实现</code></pre><h1 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h1><h2 id="接口的要求"><a href="#接口的要求" class="headerlink" title="接口的要求"></a>接口的要求</h2><pre><code>1. 接口不能实例化
2. 实现类必须实现接口的所有方法
3. 变量都是静态变量
4. 现类可以实现多个接口
5. 方法：public abstract void service();   不能用static
6. 变量：public static final  double PI = 3.14;</code></pre><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><ol>
<li>现在对比下来<strong>继承</strong>绝对是老大，知识点多。</li>
<li>继承是 <strong>多态 + 重写</strong> 的前提</li>
<li>继承+抽象 +接口在生成对象比较<br>继承：<br>继承就不用说了，多态的上转型的概念理解的就像！</li>
</ol>
<p>抽象：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MotoVehicle moto[] &#x3D;new MotoVehicle[4];</span><br></pre></td></tr></table></figure>
<pre><code>1. **这个MotoVehicle是abstract类**，但是能用new，这个例子就充分的说明了，new ！= 分配空间。
2. 在这里，他仅仅说明了moto[]的长度
3. **对象初始化挪到了后面，为了集中说明一个知识点！**</code></pre><p>接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test1</span> <span class="keyword">implements</span> <span class="title">Interface1</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">"fun"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">		Interface1  t = <span class="keyword">new</span> Test1();</span><br><span class="line">		t.fun();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对比三个发现：父类 抽象类 接口 这三个都可以<br>            1. 直接声明对象<br>            2. 调用对象的方法<br>            3. 但是，不可以初始化对象本身（父类初始化自己）</p>
<h1 id="错误"><a href="#错误" class="headerlink" title="错误"></a>错误</h1><p>对象数组的初始化方法：<br>        第一种：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">MotoVehicle moto[] = <span class="keyword">new</span> MotoVehicle[]&#123;</span><br><span class="line">		<span class="keyword">new</span> Car(<span class="number">1</span>,<span class="string">"宝马1"</span>,<span class="string">"红色"</span>,<span class="number">1000</span>,<span class="number">20</span>),</span><br><span class="line">		<span class="keyword">new</span> Car(<span class="number">2</span>,<span class="string">"宝马2"</span>,<span class="string">"红色"</span>,<span class="number">1000</span>,<span class="number">20</span>),</span><br><span class="line">		<span class="keyword">new</span> Bus(<span class="number">3</span>,<span class="string">"金龙1"</span>,<span class="string">"绿色"</span>,<span class="number">1000</span>,<span class="string">"x"</span>),</span><br><span class="line">		<span class="keyword">new</span> Bus(<span class="number">3</span>,<span class="string">"金龙2"</span>,<span class="string">"绿色"</span>,<span class="number">1000</span>,<span class="string">"xx"</span>),</span><br><span class="line">		<span class="keyword">new</span> Bus(<span class="number">5</span>,<span class="string">"金龙3"</span>,<span class="string">"绿色"</span>,<span class="number">1000</span>,<span class="string">"xxx"</span>),</span><br><span class="line">		<span class="keyword">new</span> Ka(<span class="number">6</span>,<span class="string">"Ka1"</span>,<span class="string">"兰色"</span>,<span class="number">1000</span>,<span class="number">100</span>)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<pre><code>第二种：</code></pre><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ;i &lt; n;i++)&#123;</span><br><span class="line">			moto[i]= <span class="keyword">new</span> Car(**);<span class="comment">//只能生成一种Car类型的</span></span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure>


<p>对象的强制转换错误：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Dog dog = （Dog）pet;<span class="comment">//强制转换</span></span><br><span class="line">(Dog)pet.dark();<span class="comment">//这的是错的，之后转换了之后才可以进行特有dog方法的调用</span></span><br></pre></td></tr></table></figure>



      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://chenzhiheng.cn/2017/07/01/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/java%E9%94%99%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈志恒的技术博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/07/01/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/java%E9%94%99%E9%A2%98/" class="post-title-link" itemprop="url">java错题</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-07-01 07:28:00" itemprop="dateCreated datePublished" datetime="2017-07-01T07:28:00+08:00">2017-07-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-03-12 20:06:07" itemprop="dateModified" datetime="2020-03-12T20:06:07+08:00">2020-03-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web%E5%BC%80%E5%8F%91-czh-java-java%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index">
                    <span itemprop="name">web开发/czh_java/java基础</span>
                  </a>
                </span>
            </span>

          
            <span id="/2017/07/01/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/java%E9%94%99%E9%A2%98/" class="post-meta-item leancloud_visitors" data-flag-title="java错题" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>863</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2017年7月1日 下午7:28</p>
<p>和类名相同的普通方法 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Parent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"parent"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Parent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"parent"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>interface变量 和 方法 的定义方式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Interface1</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">final</span> <span class="keyword">int</span> i= <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">int</span> j = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">int</span> k = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> q = <span class="number">1</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">a</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">b</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">fun</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>封装的步骤</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用Java实现封装，第一步是修改属性可见性来限制对属性的访问，第二步是创建赋值和取值方法，用于对属性的访问，第三步应该是（ ）。	A.	使用赋值和取值方法访问属性	B.	编写常规方法访问属性	C.	在赋值和取值方法中，加入对属性的存取限制	D.	编写main方法创建对象，调用赋值和取值方法访问属性</span><br></pre></td></tr></table></figure>

<p>分析如下所示的Java代码，则选项中的说法正确的是（c ）。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span></span>&#123;	<span class="keyword">public</span> String name;	<span class="function"><span class="keyword">public</span> <span class="title">Parent</span><span class="params">(String pName)</span></span>&#123;		<span class="keyword">this</span>.name = pName;	&#125;&#125;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span>  <span class="keyword">extends</span> <span class="title">Parent</span> </span>&#123;  <span class="comment">//1</span>	<span class="function"><span class="keyword">public</span> <span class="title">Test</span><span class="params">(String Name)</span></span>&#123;               <span class="comment">//2</span>		name=<span class="string">"hello"</span>;          <span class="comment">//3</span>		<span class="keyword">super</span>(<span class="string">"kitty"</span>);          <span class="comment">//4</span>	&#125;	&#125;	A.	第<span class="number">2</span>行错误，Test类的构造函数中参数名称应与其父类构造函数中的参数名相同	B.	第<span class="number">3</span>行错误，应使用<span class="keyword">super</span>关键字调用父类的name属性，改为<span class="keyword">super</span>.name=<span class="string">"hello"</span>;	C.	第<span class="number">4</span>行错误，调用父类构造方法的语句必须放在子类构造方法中的第一行	D.	程序编译通过，无错误</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://chenzhiheng.cn/2017/07/01/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/java%E5%9F%BA%E7%A1%80%E9%98%B6%E6%AE%B5%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90%E8%BF%87%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈志恒的技术博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/07/01/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/java%E5%9F%BA%E7%A1%80%E9%98%B6%E6%AE%B5%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90%E8%BF%87%E7%A8%8B/" class="post-title-link" itemprop="url">java基础阶段图书管理系统项目需求分析过程</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-07-01 03:16:00" itemprop="dateCreated datePublished" datetime="2017-07-01T03:16:00+08:00">2017-07-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-03-12 20:06:07" itemprop="dateModified" datetime="2020-03-12T20:06:07+08:00">2020-03-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web%E5%BC%80%E5%8F%91-czh-java-java%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index">
                    <span itemprop="name">web开发/czh_java/java基础</span>
                  </a>
                </span>
            </span>

          
            <span id="/2017/07/01/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/java%E5%9F%BA%E7%A1%80%E9%98%B6%E6%AE%B5%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90%E8%BF%87%E7%A8%8B/" class="post-meta-item leancloud_visitors" data-flag-title="java基础阶段图书管理系统项目需求分析过程" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>8k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>7 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2017年7月1日 下午3:16</p>
<h1 id="这篇文章就是我边想问题边写的，记录了我整个思考的过程"><a href="#这篇文章就是我边想问题边写的，记录了我整个思考的过程" class="headerlink" title="这篇文章就是我边想问题边写的，记录了我整个思考的过程"></a>这篇文章就是我边想问题边写的，记录了我整个思考的过程</h1><p>几个注意点：<br>    1. <strong>整体的结构要心中有数</strong>，可以用图来辅助<br>    2. 这个项目的难点在于功能流程的设计，数据库表的设计很简单<br>    3. 发现隐藏的功能，做好以后功能的扩展。<br>    4. 同时也要学会偷懒技巧，实现简单，但是却让人喜欢</p>
<p>现在想到的功能有：<br>    1. 登陆注册，人员的流动                                                                 一天<br>        1. 多用户登陆<br>            1. 一个多线程的服务端<br>            2. 一个客户端<br>        2. 前后端两个<br>        3. 会员管理系统<br>    2. 权限管理系统：<br>        1. 前后端可以设计不同的阶梯，CCF                                      一天<br>    3. 图书<strong>查询</strong>系统【核心】：                                                           三天<br>        1. 用户查书有没有，模糊查询<br>            1. 按作者<br>            2. 按类别<br>            3. 按日期查询<br>            4. 按出版社<br>            5. 按库存<br>        2. 用户查自己的借阅情况<br>            1. 用户还书<br>            2. 超时扣钱<br>        3. 管理员<br>            1. 查询一本书的借阅历史<br>            2. 查破损</p>
<pre><code>4. 辅助功能【看时间自由调整】：                                                  一天
    1. 图书的破损，下架，丢失</code></pre><hr>
<p>程序员可以创建类<br>而用户只能创建对象    </p>
<hr>
<p>老师的那个是权限于功能进行了绑定<br>而我的这个是权限和功能是分开的，先判断权限再去执行功能。<br>但是功能从哪来呢？<br>那还不如最小的权限绑定功能，而角色和权限的多对多功能，这是操作对象，所以能够给了用户来操作，用户和角色的一对多的关系也是对象操作，也可以给了用户</p>
<hr>
<h3 id="设计模式："><a href="#设计模式：" class="headerlink" title="设计模式："></a>设计模式：</h3><p>不能为了使用设计模式，专门去向哪里可以用，<br><strong>功能为导向哦！</strong></p>
<hr>
<p><img src="/2017/07/01/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/java%E5%9F%BA%E7%A1%80%E9%98%B6%E6%AE%B5%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90%E8%BF%87%E7%A8%8B/%E2%80%A2%20BookManage.mdj%20%E2%80%94%20StarUML%20StarUML,%20%E4%BB%8A%E5%A4%A9%20at%20%E4%B8%8A%E5%8D%8810.22.28.png" alt><br><strong>这里的额priority1-3不能出现方法的重名</strong></p>
<p>为了以后<strong>扩从管理员的功能</strong>：这里使用了<strong>代理模式</strong><br>priority1是priority3针对interface3种方法的扩充<br>interface1,interface2是横向扩充<br>interface3 是纵向扩充</p>
<hr>
<h3 id="如何实现一个权限分多级的情况？"><a href="#如何实现一个权限分多级的情况？" class="headerlink" title="如何实现一个权限分多级的情况？"></a>如何实现一个权限分多级的情况？</h3><p>在interface中写不同的方法e.g.：<strong>input1() input2()</strong><br>这里的权限1，2就是权限等级<br>这里的<strong>核心问题就是方法的参数化</strong>：利用反射可以解决<br>使用方法：<br>    User中有一个方法userMethod(String methodName);<br>实现类似于：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 反射中方法的测试</span></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_Method</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">		<span class="comment">//获取Student对应的Class对象</span></span><br><span class="line">		Class cla=Student<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">		<span class="comment">//创建Student对象</span></span><br><span class="line">		Student p=<span class="keyword">new</span> Student();</span><br><span class="line">		<span class="comment">//得到setName方法</span></span><br><span class="line">		Method met1=cla.getMethod(<span class="string">"setName"</span>, String<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">		<span class="comment">//调用setName，为name赋值</span></span><br><span class="line">		met1.invoke(p, <span class="string">"Jack"</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//得到setName方法</span></span><br><span class="line">		Method met=cla.getMethod(<span class="string">"getName"</span>, <span class="keyword">null</span>);</span><br><span class="line">		<span class="comment">//调用setName，为name赋值</span></span><br><span class="line">		Object o=met.invoke(p, <span class="keyword">null</span>);</span><br><span class="line">		System.out.println(o);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其实这里可以使用<strong>组合模式</strong><br>将Role继承自priority<br>好处是：要是用户只有一个Priority，一步就可以完成了，省去了Role。</p>
<hr>
<h3 id="如何实现上下级批准："><a href="#如何实现上下级批准：" class="headerlink" title="如何实现上下级批准："></a>如何实现上下级批准：</h3><p>这个不属于类的设计，是通过逻辑代码实现的。<br>要是在类图中就实现上下级，那是一定不可改变得。</p>
<p>以及实现人员的变动，这都是通过逻辑代码实现的。</p>
<hr>
<h3 id="服务端的任务—其实是个假的服务端，因为他仅仅完成了登陆这一个功能："><a href="#服务端的任务—其实是个假的服务端，因为他仅仅完成了登陆这一个功能：" class="headerlink" title="服务端的任务—其实是个假的服务端，因为他仅仅完成了登陆这一个功能："></a>服务端的任务—其实是个假的服务端，因为他仅仅完成了登陆这一个功能：</h3><pre><code>1. 服务端就是一个黑盒
2. 不走权限整个流程
3. 接收的是用户名和密码
    1. 实现判断
    2. 实现注册
4. 返回的是
    1. 登陆是否成功
    2. 注册是否成功
    3. Flag标志区分普通用户和管理员
5. 实现普通用户和管理员的区分
    1. 查不同的文件txt</code></pre><h3 id="客户端"><a href="#客户端" class="headerlink" title="客户端:"></a>客户端:</h3><pre><code>1. 拿到用户名密码
2. 给了服务器
3. 根据服务器的返回，执行不同的普通用户和管理员的方法
4. 运行不同的操作（界面）</code></pre><hr>
<h3 id="如何确定当前用户的操作？并执行？"><a href="#如何确定当前用户的操作？并执行？" class="headerlink" title="如何确定当前用户的操作？并执行？"></a>如何确定当前用户的操作？并执行？</h3><p>现在是像洋葱一样，一层一层的，要用的对象（priority对象）在最里面。<br>User的useMethod()方法中的Class.from()这里写啥？<br>如果要是表中：用户 &lt;—&gt;priority<br>那Role怎么办？<br>Role是程序写的，这里就要实现其中包含的priority的全部方法。</p>
<h3 id="啥是活的啥是死的？"><a href="#啥是活的啥是死的？" class="headerlink" title="啥是活的啥是死的？"></a>啥是活的啥是死的？</h3><p>程序员：<br>    1. 增加一个priority类别，增加一个role类别<br>用户：<br>    1. 在当前已有的priority  和 role中进行选择</p>
<h3 id="又绕回到了一开始的那就话："><a href="#又绕回到了一开始的那就话：" class="headerlink" title="又绕回到了一开始的那就话："></a>又绕回到了一开始的那就话：</h3><p>用户是不能去创建一个类，或者创建一个类中的方法的。<br>这些都是程序写死的，用户最多只能选择！</p>
<hr>
<p>人工智能</p>
<hr>
<h3 id="能不能先写逻辑，再写图形界面？"><a href="#能不能先写逻辑，再写图形界面？" class="headerlink" title="能不能先写逻辑，再写图形界面？"></a>能不能先写逻辑，再写图形界面？</h3><pre><code>1. 数据获取的方式发生改变。
    1. 原来是scanner
    2. 现在是JFrame的txt框
2. 页面跳转的方式放生了变化
    1. 原来是输入数字选
    2. 现在是鼠标点
3. 数据的输出方式了改变
    1. 原来是printf
    2. 现在是JFrame中</code></pre><p>总体来说：填了很多麻烦</p>
<p>先写逻辑，后写图形</p>
<h3 id="类有哪些？"><a href="#类有哪些？" class="headerlink" title="类有哪些？"></a>类有哪些？</h3><pre><code>1. 上面的权限，一堆
2. 还有book，bookBiz
3. 文件操作的FileBiz</code></pre><h3 id="有哪些包？"><a href="#有哪些包？" class="headerlink" title="有哪些包？"></a>有哪些包？</h3><pre><code>1. entity.book
    1. 计算总价方法
    2. 显示图书信息方法
2. bookBiz
    1. 初始化书的信息
    2. 图书入库
    3. 图书出库
    4. 新增图书
    5. 查询图书
    6. 购买图书
    7. 查询图书是否存在
3. entity.user
    1. 从priority获取方法名数组【长度规定为10】
    2. 显示当前用户所具有的功能
    3. 建立数字和方法的对应关系
    4. 根据输入，通过反射调用不同的功能
    5. 这里的输入之后，还得进行一个字符串拼接，实现权限分级
4. priority
    1. 调用bookBiz
    2. **获取方法名的数组**
5. priority.ext
6. priority.impl
7. file
8. file.impl
    1. 获取一行数据
    2. 取一行数据，分割到数组
    3. 取全部的数据，保存数组，除了第一行
    4. 插入表头
    5. 插入一条数据
    6. 新建一个文件
9. Test
    1. 给client数据
    2. 调用user完成工作
10. Server
    1. Thread
    2. 干活的类
11. Client
    1. 从test拿到数据给server</code></pre><hr>
<h3 id="步骤？"><a href="#步骤？" class="headerlink" title="步骤？"></a>步骤？</h3><pre><code>1. 文件
2. book
3. 权限
4. server
5. user
6. test</code></pre><p>把这个权限打成一个jar包去使用<br>这个现在还不考虑</p>
<hr>
<h3 id="权限"><a href="#权限" class="headerlink" title="权限"></a>权限</h3><p>我知道的：<br>    1. 类名<br><strong>两种解决方法：</strong><br>    1. 给User建子类，每回登陆通过判断类名，好多的if产生不同的对象<br>        1. 每次增加一个类，都要两边写<br>    2. 试用反射，用类名 把类先反射出来（通过反射来<strong>读类</strong>）<br>        1. 这时已经能调用方法了<br>        2. 能调用方法，那所有的问题都解决了</p>
<hr>
<h3 id="新的问题"><a href="#新的问题" class="headerlink" title="新的问题"></a>新的问题</h3><pre><code>1. **方法知道了，但是参数不知道**
    1. 在写一个参数的方法
    2. 其重要有参数的个数 和 类型
2. **invoke返回的是object对象**，除了string 和 int 类型
    1. 其他的类型是固定的没几种
        1. string[]
        2. string[][]
        3. ArrayList&lt;String&gt;</code></pre><p><strong>三个方法返回数组中的内容是有顺序的，必须一致</strong><br><strong>这个可以抽象成一个方法</strong><br>    3. <strong>如何融入权限分层</strong><br>        1. 要限定<br>            1. 一共三层<br>            2. 方法要用method_1(),method_2();固定的_来分割<br>            3. 把取出来的方法分割</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Class c=Class.forName(<span class="string">"cn.chenzhiheng.user.priority.PriorityClient"</span>);</span><br><span class="line">		Object o=c.newInstance();</span><br><span class="line">		Method[] m=c.getMethods();</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m.length;i++)&#123;</span><br><span class="line">			System.out.println(m[i].getName());</span><br><span class="line">		</span><br><span class="line">			<span class="keyword">if</span>(m[i].getName().equals(method))&#123;</span><br><span class="line">				Object[] os=<span class="keyword">new</span> String[<span class="number">1</span>];</span><br><span class="line">				ArrayList&lt;String&gt; strings=(ArrayList&lt;String&gt;) m[i].invoke(o,<span class="keyword">null</span>);</span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span> ;j &lt; strings.size();j++)&#123;</span><br><span class="line">					System.out.println(<span class="string">"***"</span>+strings.get(j));</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="Test的操作流程"><a href="#Test的操作流程" class="headerlink" title="Test的操作流程"></a>Test的操作流程</h3><pre><code>1. scanner **获取用户名和密码+userId**
2. 通过client传递给server
    1. 这里要区分增删改查
3. 接受server传递过来的用户权限
    1. 不一定是权限
    2. 有可能是操作是否完成
4. 根据用户权限调用user打印出当前所有的方法
5. 调用方法去完成一些操作</code></pre><h3 id="当加上界面的时候"><a href="#当加上界面的时候" class="headerlink" title="当加上界面的时候"></a>当加上界面的时候</h3><pre><code>1. 界面是点的操作
2. 而控制窗是从上到下的一个顺序操作
3. 所以，**控制窗与逻辑的交互**由一个分割好的**test来完成**</code></pre><hr>
<h3 id="三个数据表增删改查之间的关系"><a href="#三个数据表增删改查之间的关系" class="headerlink" title="三个数据表增删改查之间的关系"></a>三个数据表增删改查之间的关系</h3><pre><code>1. 买书的时候要增加info
2. 不删除book和user 只更改他们的状态
3. 退货删info
    1. 输入infoId
    2. 通过infoid找到bookid
    3. 删除info
    4. 更改bookid对应的数量
4. **user_book不直接操作，全部由Book类来操作**</code></pre><hr>
<h3 id="怎样实现自增"><a href="#怎样实现自增" class="headerlink" title="怎样实现自增"></a>怎样实现自增</h3><pre><code>1. 抽象类 static index
2. index++;
3. 构造函数</code></pre><hr>
<h3 id="权限的升级："><a href="#权限的升级：" class="headerlink" title="权限的升级："></a>权限的升级：</h3><pre><code>1. 已有权限
    1. 直接更改用户的priority字段
    2. 用户权限的更改只能有管理员进行
2. 没有的权限
    1.有可能 **写Biz**
    2. 写priorityImpl
    3. 写priority继承自 ext 实现impl接口
    4. 然后在写一个role在包括原来的和现在的对象
    5. 在像上面一样更改用户权限字段</code></pre><hr>
<p>Biz的功能不是priority 都必须用了e.g.：insertHead。<br>程序员用一次就行了</p>
<hr>
<p>这回幸亏是从下往上做，每一层都是一个封装。<br>对下层的多次运用</p>
<hr>
<h3 id="如何拿到使用不同类型反射回的结果"><a href="#如何拿到使用不同类型反射回的结果" class="headerlink" title="如何拿到使用不同类型反射回的结果"></a>如何拿到使用不同类型反射回的结果</h3><pre><code>1. 由于多态中不支持多返回的类型
2. 所以这种情况，只能写不同的方法</code></pre><hr>
<p>结算功能：<br>一个用户-一个权限-一个Userbiz(多个唯一的biz)</p>
<hr>
<p>理想中的代码层次-应该像：MVC<br>    1. 我从数据库中取出用户的权限等级，作为全局变量<br>    2. 然后生成对应这个等级的<strong>页面</strong><br>    3. 点击一个<strong>功能按钮</strong>，然后<strong>跳到逻辑处理层</strong><br>    4. 逻辑处理层的数据，然后<strong>投影到一个页面中</strong><br>    5. <strong>页面—&gt;跳到逻辑层—&gt;新的页面</strong><br>    6. <del>就像TP一样</del><br>现在：<br>    1. 我点击<strong>功能按钮</strong>，然后<strong>逻辑处理</strong><br>    2. 逻辑处理完，显示到页面<br>    3. 这个整个过程是<strong>瀑布型</strong>的，像c一样从上到下的执行<br>    4. <strong>没有跳转</strong><br>    5. <strong>页面—&gt;走逻辑—&gt;旧页面</strong><br>    6. <del>就像原生php一样</del></p>
<hr>
<h3 id="那么第二种为啥会把一个权限系统给废了？"><a href="#那么第二种为啥会把一个权限系统给废了？" class="headerlink" title="那么第二种为啥会把一个权限系统给废了？"></a>那么第二种为啥会把一个权限系统给废了？</h3><pre><code>1. 这的权限系统就是一个**逻辑层**
2. **入口**的是你要执行的**方法名**
3. **出口**是你要的**数据**
4. 这就一个**封装**
5. 不是废了，**我这个权限系统不是用来分层的**</code></pre><h3 id="假设你现在已经按不分层的想法写完了项目，那么有啥改进的地方？"><a href="#假设你现在已经按不分层的想法写完了项目，那么有啥改进的地方？" class="headerlink" title="假设你现在已经按不分层的想法写完了项目，那么有啥改进的地方？"></a>假设你现在已经按不分层的想法写完了项目，那么有啥改进的地方？</h3><pre><code>1. 现在的情况，就是JFrame其实就是再次把UserReflectf封装了一次
2. 如果让增加功能，不仅权限里要增加相应的类，而且还要更改对应的页面
3. 做的这个权限系统不是让权限完全随用户更改添加，而是更重要的是**程序员做维护的时候好维护，自己用这个权限写项目思路更加清晰**
4. 如果是分层写的话，会这样思考
    1. 页面用不用改？哪里改？眼前全是html
    2. 逻辑用不用改？哪里改？眼前全是php逻辑
5. 如果不是分层写的话，会这样思考
    1. 乱死了，这个不是页面，跳过/这个不是逻辑，虽然明显，但是时间长了自己会**烦躁**。
6. **关键：**分层写，我可以在逻辑层处理多种任务，获得多次的数据，然后把**多组数据**都传递给新的页面
7. 分层于不分层的直观理解：
    1. 分层是把不分层的中写在**一个页面的所有过程**，集中放在一个新页面中，是一个**提取的关系**
    2. Ps：相似的功能可以通过将**各个过程封装到成方法中**
8. **分层知识为了更清晰，没其他作用**</code></pre><hr>
<h3 id="我用反射实现的权限管理"><a href="#我用反射实现的权限管理" class="headerlink" title="我用反射实现的权限管理"></a>我用反射实现的权限管理</h3><pre><code>1. 本质是实现了一对多的关系，**就是一个封装而已**
    1. 反射解决的是字符串产生对象的这个过程
    2. 一个字符串，就能对应那么多的具体的权限功能
2. 但是在这个项目中界面中只能是一对一的关系
    1. 一个界面已经绑定了一个代表权限的字符串了
3. 那这个权限系统在哪里才可以发挥它最大的作用
    1. 权限可以无限多
    2. 增加起来方便
    3. 一个权限功能的实现
        1. 权限名
        2. 方法名+参数
        3. 2这个是必须的，并不是我这个系统设计不合理留下的小尾巴
    4. 可以使用字符串直接对应权限，更加方便，直观（不用用数字去表示了）
    5. 总结：**因为封装好了，以后程序员用起来就比较方便了**
        1. 对用户来说，屁用没有
        2. 对程序员来说，却是极大的方便
    6. 这就是写框架要站的角度，和写项目占的角度**对比**
        1. 写框架是为让程序员更加爽、简单，框架就是一个封装，把麻烦的事情封装到一个黑盒中，然后，留一口，然程序员简单做到。在这过程中，程序员不用懂得其中的道理。
        2. 写项目时想的是如何实现一个功能，常常就为了一个boss功能较劲脑汁
        3. **但是**，顶尖的程序员，**做出项目来估计和设计框架是一样的**</code></pre><hr>
<h3 id="关于接口再说两句"><a href="#关于接口再说两句" class="headerlink" title="关于接口再说两句"></a>关于接口再说两句</h3><pre><code>1. 我突然一下感受到了接口的好处
    1. 在一开始，我写底层一个最小单位的一个书籍管理权限，其实直接创建一个类，写方法，填注释就行了。这时写接口是一件麻烦的事情。
    2. 但是，当我从底层越来越向上封装，集成。这时，我如果想在其他类中说明也要使用这些方法，我只要加上对应的接口，方法自动出来，我填内容就行。一般来说，内容可以直接用底层的对象调用来实现
    3. 如果没有接口，我就得反复的回去看底层的具体的类实现。还生怕拉下一个。
    4. 最常用的地方是：当修改一个，增加一个功能时，接口可以方便的提醒你还有哪些地方要改。对你的操作有**指示作用**
    5. 有时候需要去写一个抽象类，但是，java本身的这个类中就有继承如JFrame继承自Frame，这时只能用接口来救急了。
    6. 用了接口，妈妈在也不用为我担心这个问题了。</code></pre><hr>
<p>我现在是站在一个<strong>写框架</strong>的角度去思考<br>但是，这也回答了一个问题我们<strong>看框架的时候会经历什么</strong><br>最终，当你看完一个框架的时候，你脑子中是有一副<strong>类图的</strong><br>like：<br><img src="/2017/07/01/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/java%E5%9F%BA%E7%A1%80%E9%98%B6%E6%AE%B5%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90%E8%BF%87%E7%A8%8B/%E2%80%A2%20BookManage.mdj%20%E2%80%94%20StarUML%20StarUML,%20%E4%BB%8A%E5%A4%A9%20at%20%E4%B8%8B%E5%8D%884.40.07.png" alt></p>
<hr>
<h3 id="退书和总价的关系"><a href="#退书和总价的关系" class="headerlink" title="退书和总价的关系?"></a>退书和总价的关系?</h3><p>Index还是有问题<br>Table<br>    1. 不初始化初始化<br>    2. 覆盖</p>
<hr>
<h3 id="监听实现接口写在一起的好处"><a href="#监听实现接口写在一起的好处" class="headerlink" title="监听实现接口写在一起的好处"></a>监听实现接口写在一起的好处</h3><pre><code>1. 可以何在一起写逻辑，而，单个是时候互不影响</code></pre><hr>
<h3 id="如何能发挥出这个权限系统的最大能力"><a href="#如何能发挥出这个权限系统的最大能力" class="headerlink" title="如何能发挥出这个权限系统的最大能力"></a>如何能发挥出这个权限系统的最大能力</h3><pre><code>1. 数据库中用户的权限是一个**对应权限类名**的一个字符串
2. UserRflect的参数就是**权限字符串**
3. 然后就可以通过UserRflect来调用**对应权限类**下的方法
4. 能够去除当前权限下的所有方法，但是这些方法并不是简单地像输出不同的语句这样的**不需要任何输入，有统一输出的的方法**，所以不能做统一的界面去执行所有的功能。
5. 就像web中的导航栏，导航栏可以是统一的，但是导航栏连接到的每个单独不同的页面，**这得一个一个的做**。</code></pre><hr>
<h3 id="如何让这个权限系统能够自动识别权限等级"><a href="#如何让这个权限系统能够自动识别权限等级" class="headerlink" title="如何让这个权限系统能够自动识别权限等级"></a>如何让这个权限系统能够自动识别权限等级</h3><pre><code>1. 如果实现了能够自判等级大小
    1. 那么在做相关功能的时候只需要调用一个方法就可以实现
    2. 比如说我这里要实现**当前用户只能看权限比他低的人的信息**
    3. 这个函数的参数是**权限字符串1 权限字符串2**
    4. **返回boolean**
2. 另一种实现方式，在biz查询全部用户的时候，在这就判断出结果。
    1. 那么，这种实现方式就和权限系统没关系了
    2. 如果在biz中在声明userRflect。
        1. **userRflect是用来执行方法的，不是用来判断权限的！**
    3. 那么，可以再设计一个userRflect配套的类，参数和返回值像1所说的。
3. 现在方案定了，就差功能的实现了！
    1. 如何才算是权限大，有哪些情况
        1. 存在**包含关系**的时候能判断权限大小
            1. 第一种：一个role中包含了多个priority，那么这些priority都比这个role权限小
            2. 第二种：role1包含role2时，role1的权限大于role2 的权限。
            3. 循环嵌套
    2. 那么问题来了，如何**判断他们的包含关系**
        1. 组合关系的递归
4. **一下午！实现了**
5. 使用方式：</code></pre><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Compare compare = <span class="keyword">new</span> Compare();		</span><br><span class="line"><span class="keyword">boolean</span> flag = compare.compare(<span class="string">"priority.PriorityBaseBook"</span>, <span class="string">"role.RoleAll"</span>);</span><br></pre></td></tr></table></figure>
<hr>
<p>我这个系统里面priorit对于图书的和用用户的管理都分别设置的普通给用户client端和管理员manager端，这是不符合实际的<br><img src="/2017/07/01/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/java%E5%9F%BA%E7%A1%80%E9%98%B6%E6%AE%B5%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90%E8%BF%87%E7%A8%8B/workspace%20-%20Java%20-%20BookManage-src-cn-chenzhiheng-user-role-PriorityAll.java%20-%20Eclipse%20Eclipse,%20%E4%BB%8A%E5%A4%A9%20at%20%E4%B8%8A%E5%8D%8810.48.42.png" alt><br><strong>因为</strong>：<br>    1. 现实中，manager和client等级一高一低<br>    2. 但是在<strong>priority包中定义的权限</strong>，<strong>他们是没有高低的，都是一个独立的权限</strong><br>怎么改：<br>    1. 将priority包下的manager接口方法移动到role包下的对应的manager接口中，<br>    2. 然后在role包下的实体类中重新实现接口中的方法<br>    3. 对于role下包的实体类来说，是没有影响的<br>    4. 因为，他implments 多个接口，我们现在只是把一个接口中的方法放到另一个接口中，对role实体类来说<strong>无视</strong></p>
<hr>
<p><strong>循环包含</strong>的时候<br>    1. 接口要自己去查基础功能的接口,可以直接从包含类implement中复制过来<br>    2. 返回的方法和返回值类型也可直接拷贝，修改下长度</p>
<hr>
<h3 id="这个权限系统使用的要求："><a href="#这个权限系统使用的要求：" class="headerlink" title="这个权限系统使用的要求："></a>这个权限系统使用的要求：</h3><pre><code>1. 名字 属性名两部分  类名前准
    1. Priority包下,都是以priority为开头
    2. Role包下都已role开头
    3. 这个为了实现**权限等级判断的必要条件**
2. 方法 实例化哪几个方法
    1. PriorityExt抽象类下
        1. getReturns
        2. getMethods
    2. RoleExt extends PriorityExt
        1. getInclude
        2. **注意：role方法+1 judge**
3. 使用方式 
    1. 只需要一个**权限字符串**
4. 不同位置概念上的区别 
    1. Priotity包下，都是**最小单位的权限**，**并且不包含**，各为独立的个体
    2. Role包下，**可以不包括priority**，单独成为个体，作为最小单位。但是不同的是，**可以成为包含关系**</code></pre><hr>
<h3 id="权限系统的完整包"><a href="#权限系统的完整包" class="headerlink" title="权限系统的完整包"></a>权限系统的完整包</h3><p><img src="/2017/07/01/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/java%E5%9F%BA%E7%A1%80%E9%98%B6%E6%AE%B5%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90%E8%BF%87%E7%A8%8B/workspace%20-%20Java%20-%20BookManage-src-cn-chenzhiheng-test-Test.java%20-%20Eclipse%20Eclipse,%20%E4%BB%8A%E5%A4%A9%20at%20%E4%B8%8B%E5%8D%888.40.13.png" alt></p>
<hr>
<h3 id="最后要做的工作"><a href="#最后要做的工作" class="headerlink" title="最后要做的工作"></a>最后要做的工作</h3><pre><code>1. 表格实现信息修改—完成
2. 管理员图书出库做判断—完成
3. 用户查无此id的
4. 退书应该加上专门的一个现实的表，然后进行点击退书
5. 注册用户的验证
6. 标题</code></pre><hr>
<h3 id="如何学习table，如何了解table如何使用，他又那些功能。"><a href="#如何学习table，如何了解table如何使用，他又那些功能。" class="headerlink" title="如何学习table，如何了解table如何使用，他又那些功能。"></a>如何学习table，如何了解table如何使用，他又那些功能。</h3><pre><code>1. 即使是别人写好的，你也不一定会用！
2. 手册的重要性，这个过程中一定会看大量的文档。
3. 文档的写法基本上也是按照一个个功能，**问题为主导的**。
4. 方便读者寻找自己想要的功能。
5. 这与我写文章的思路正好相符
6. 在这个过程中，有一个很大的问题就是**如何知道有什么功能**，以及会**涉及到其他**的什么类，接口，抽象等等
7. **如何实现其实不是最难的**，**手册**能解决这个问题，但是上面一个问题手册不一定能明显的解决。</code></pre><p>table_3.addTableModelListener(this);<br>就像我不知Jtable中model这个东西一样</p>
<hr>
<p><strong>这回的文件封装的和屎一样</strong></p>
<p>/*<br>                * 这里应该是通过当前用户的权限去更改User.txt文件中的数据<br>                * 但是我在client的接口中没有实现这个方法<br>                * 现在不带了改了<br>                * 所以就直接跳级<br>                * 用底层封装好的文件操作改了<br>                * 这样做是不对的！！！！！<br>         */</p>
<hr>
<h1 id="问题才是一个系统设计的核心！！！！"><a href="#问题才是一个系统设计的核心！！！！" class="headerlink" title="问题才是一个系统设计的核心！！！！"></a>问题才是一个系统设计的核心！！！！</h1>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://chenzhiheng.cn/2017/07/01/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈志恒的技术博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/07/01/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">项目结构总结</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-07-01 02:43:00" itemprop="dateCreated datePublished" datetime="2017-07-01T02:43:00+08:00">2017-07-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-03-12 20:06:07" itemprop="dateModified" datetime="2020-03-12T20:06:07+08:00">2020-03-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web%E5%BC%80%E5%8F%91-czh-java-java%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index">
                    <span itemprop="name">web开发/czh_java/java基础</span>
                  </a>
                </span>
            </span>

          
            <span id="/2017/07/01/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/" class="post-meta-item leancloud_visitors" data-flag-title="项目结构总结" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>271</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2017年7月1日 下午2:43</p>
<p><img src="/2017/07/01/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/2E829A85D679272CB7FA191FFAE56CD3.png" alt><br>几个原则：<br>    1. 测试类中方法不能太多<br>        1. 解决方法：可以想象这个函数代表的功能是谁的<br>    2. 测试类中主方法太长<br>        1. 用c写的习惯了，100行以内根本不认为多<br>        2. 而java中面向对象，<strong>超过二十行</strong>就觉得有点多了<br>    3. 构造函数顺序：<br>        1. 无参构造<br>        2. 主键构造<br>        3. 带所有参数的构造<br>    4. <strong>注释注释注释注释</strong></p>
<h3 id="各占1-3的时间"><a href="#各占1-3的时间" class="headerlink" title="各占1/3的时间"></a>各占1/3的时间</h3><ol>
<li>需求说明：<ol>
<li>像关心下一代项目就没有需求说明，他想做出来再改</li>
<li>mnt-lab也是这</li>
<li>Report其实也是，那些流程都没有定出来写文档</li>
</ol>
</li>
<li>动手之前的分析占了很长时间：report项目</li>
<li>完成之后的修改也要很长时间：mnt-lab门户项目</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://chenzhiheng.cn/2017/06/30/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/6.30%20%E7%BA%BF%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈志恒的技术博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/06/30/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/6.30%20%E7%BA%BF%E7%A8%8B/" class="post-title-link" itemprop="url">6.30 线程</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-06-30 10:31:00" itemprop="dateCreated datePublished" datetime="2017-06-30T10:31:00+08:00">2017-06-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-03-12 20:06:07" itemprop="dateModified" datetime="2020-03-12T20:06:07+08:00">2020-03-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web%E5%BC%80%E5%8F%91-czh-java-java%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index">
                    <span itemprop="name">web开发/czh_java/java基础</span>
                  </a>
                </span>
            </span>

          
            <span id="/2017/06/30/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/6.30%20%E7%BA%BF%E7%A8%8B/" class="post-meta-item leancloud_visitors" data-flag-title="6.30 线程" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>5.1k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>5 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2017年6月30日 上午10:31</p>
<p>多线程的好处：<br>    解决了多部分代码同时运行的情况<br>坏处：<br>    每个线程占的资源少，单个线程的效率比较低</p>
<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><pre><code>1.     继承Thread
    1. run()运行代码
    2. start()开启线程：没有开始运行，进入了
    3. 一个线程类对象只能调用一次start()方法</code></pre><p><img src="/2017/06/30/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/6.30%20%E7%BA%BF%E7%A8%8B/Java17_%E5%A4%9A%E7%BA%BF%E7%A8%8B%20PDF%20Expert,%20%E4%BB%8A%E5%A4%A9%20at%20%E4%B8%8A%E5%8D%8810.45.14.png" alt><br>         图1 线程的四种状态（五种：创建，<strong>就绪</strong>，运行，<strong>阻塞</strong>，停止）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> package1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadTest</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="comment">//票的总数</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> num = <span class="number">5</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">ThreadTest</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name ;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">while</span>(num != <span class="number">0</span>)&#123;</span><br><span class="line">			System.out.println(name+<span class="string">"\t"</span>+num--);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//创建了两个资源</span></span><br><span class="line">		ThreadTest tt = <span class="keyword">new</span> ThreadTest(<span class="string">"线程1"</span>);</span><br><span class="line">		ThreadTest tt1 = <span class="keyword">new</span> ThreadTest(<span class="string">"线程2"</span>);</span><br><span class="line">		<span class="comment">//开启两个线程</span></span><br><span class="line">		tt.start();</span><br><span class="line">		tt1.start();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出：<br><img src="/2017/06/30/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/6.30%20%E7%BA%BF%E7%A8%8B/workspace%20-%20Java%20-%20Class630-src-package1-ThreadTest.java%20-%20Eclipse%20Eclipse,%20%E4%BB%8A%E5%A4%A9%20at%20%E4%B8%8A%E5%8D%8811.02.17.png" alt></p>
<pre><code>2. 接口Runnable     </code></pre><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> package1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RunnableTest</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name ;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> num =<span class="number">10</span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">RunnableTest</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//创建资源</span></span><br><span class="line">		RunnableTest rt = <span class="keyword">new</span> RunnableTest(<span class="string">"线程1"</span>);</span><br><span class="line">		<span class="comment">//同一个资源开两个线程</span></span><br><span class="line">		<span class="keyword">new</span> Thread(rt).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(rt).start();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">while</span>(num != <span class="number">0</span>)&#123;</span><br><span class="line">			System.out.println(name+<span class="string">"\t"</span>+num--);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> 输出1<br><img src="/2017/06/30/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/6.30%20%E7%BA%BF%E7%A8%8B/workspace%20-%20Java%20-%20Class630-src-package1-RunnableTest.java%20-%20Eclipse%20Eclipse,%20%E4%BB%8A%E5%A4%A9%20at%20%E4%B8%8A%E5%8D%8811.10.22.png" alt><br> 输出2<br><img src="/2017/06/30/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/6.30%20%E7%BA%BF%E7%A8%8B/workspace%20-%20Java%20-%20Class630-src-package1-RunnableTest.java%20-%20Eclipse%20Eclipse,%20%E4%BB%8A%E5%A4%A9%20at%20%E4%B8%8A%E5%8D%8811.10.40.png" alt></p>
<h2 id="对比-输出1-和-输出2-发现："><a href="#对比-输出1-和-输出2-发现：" class="headerlink" title="对比 输出1 和 输出2 发现："></a>对比 输出1 和 输出2 发现：</h2><pre><code>1. 输出1 一共输出的为11个，10输出了两次
2. 输出2 一共输出了10个，1-10各一次</code></pre><p>总结：<strong>会有特殊情况出现</strong></p>
<h2 id="对比-程序1-和-程序2-发现："><a href="#对比-程序1-和-程序2-发现：" class="headerlink" title="对比 程序1 和 程序2 发现："></a>对比 程序1 和 程序2 发现：</h2><pre><code>1. 实现Runnable接口,方便实现资源共享
2. 继承Thread类受单继承影响，不适合多线程共享资源    
3. 只有Thread才能创建线程对象，Runnable只是实现run()方法
4. **多线程的特点是：**
            1. 一个对象的run()可以同时执行
            2. 多个对象的run()方法也可以同时执行</code></pre><p><img src="/2017/06/30/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/6.30%20%E7%BA%BF%E7%A8%8B/%E2%80%A2%20StarUML%20StarUML,%20%E4%BB%8A%E5%A4%A9%20at%20%E4%B8%8B%E5%8D%881.11.19.png" alt><br>                              图2：Thread实现方式<br><strong>Thread 的角色：提供资源 + 提供方法 + 运行方法</strong><br><img src="/2017/06/30/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/6.30%20%E7%BA%BF%E7%A8%8B/%E2%80%A2%20StarUML%20StarUML,%20%E4%BB%8A%E5%A4%A9%20at%20%E4%B8%8B%E5%8D%881.13.06.png" alt><br>                            图3：Runnable实现方式<br><strong>RunnableTest的角色：提供资源 + 提供方法run</strong><br><strong>Thread的角色：调用run</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> package1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadTest</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="comment">//票的总数</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> num = <span class="number">5</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">ThreadTest</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name ;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">while</span>(num != <span class="number">0</span>)&#123;</span><br><span class="line">			System.out.println(name+<span class="string">"\t"</span>+num--);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		ThreadTest tt = <span class="keyword">new</span> ThreadTest(<span class="string">"线程1"</span>);</span><br><span class="line">		<span class="comment">//调用两次start，来模仿Thread和Runnable的关系</span></span><br><span class="line">		tt.start();</span><br><span class="line">		tt.start();	</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出：<br><img src="/2017/06/30/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/6.30%20%E7%BA%BF%E7%A8%8B/workspace%20-%20Java%20-%20Class630-src-package1-ThreadTest.java%20-%20Eclipse%20Eclipse,%20%E4%BB%8A%E5%A4%A9%20at%20%E4%B8%8B%E5%8D%883.57.11.png" alt></p>
<h2 id="通过这个例子来理解Runnable-和-Thread的不同："><a href="#通过这个例子来理解Runnable-和-Thread的不同：" class="headerlink" title="通过这个例子来理解Runnable 和 Thread的不同："></a>通过这个例子来理解Runnable 和 Thread的不同：</h2><pre><code>1. Thread的run方法不能让同一个对象同时调用进行，但，可以不同对象之间进行
2. Runnable 的run方法可以被同一个对象同时调用
3. 那么，在thread中，如果强制调用tt.start()两次，就类似于runnable调用两次start()，会发生什么呢？很可惜，因为start()方法是synchronized的（如图5），所以只能支持Runnable的两次（图7），不支持Thread的两次（图6）。</code></pre><p><img src="/2017/06/30/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/6.30%20%E7%BA%BF%E7%A8%8B/workspace%20-%20Java%20-%20java.lang.Thread%20-%20Eclipse%20Eclipse,%20%E4%BB%8A%E5%A4%A9%20at%20%E4%B8%8B%E5%8D%884.40.16.png" alt><br>                                    图5<br><img src="/2017/06/30/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/6.30%20%E7%BA%BF%E7%A8%8B/Bear%20Bear,%20%E4%BB%8A%E5%A4%A9%20at%20%E4%B8%8B%E5%8D%885.01.50.png" alt><br>                                    图6<br><img src="/2017/06/30/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/6.30%20%E7%BA%BF%E7%A8%8B/Bear%20Bear,%20%E4%BB%8A%E5%A4%A9%20at%20%E4%B8%8B%E5%8D%885.02.11.png" alt><br>                                     图7</p>
<h2 id="Thread的方法："><a href="#Thread的方法：" class="headerlink" title="Thread的方法："></a>Thread的方法：</h2><ol>
<li>Static Thread currentThread()</li>
<li>Final String getName()</li>
<li>Final void setPriority();设置优先级</li>
<li>Void start()</li>
<li>Static void sleep()  让出执行权，不让出资源</li>
<li>Final void yield()暂停当前线程，让其他线程(大家同一个起跑线) 礼让</li>
<li>void run()执行线程</li>
</ol>
<h2 id="线程方法-object方法"><a href="#线程方法-object方法" class="headerlink" title="线程方法 + object方法"></a>线程方法 + object方法</h2><p><img src="/2017/06/30/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/6.30%20%E7%BA%BF%E7%A8%8B/Java17_%E5%A4%9A%E7%BA%BF%E7%A8%8B%20PDF%20Expert,%20%E4%BB%8A%E5%A4%A9%20at%20%E4%B8%8B%E5%8D%884.27.18.png" alt></p>
<h2 id="同步的前提："><a href="#同步的前提：" class="headerlink" title="同步的前提："></a>同步的前提：</h2><ol>
<li>两个或两个以上的线程</li>
<li>多个线程使用同一资源<ol>
<li><strong>（必须用Runnable）或者 （Thread+ static资源变量）</strong></li>
</ol>
</li>
</ol>
<h2 id="同步的概念："><a href="#同步的概念：" class="headerlink" title="同步的概念："></a>同步的概念：</h2><ol>
<li>回去判断每个线程上的锁，浪费资源</li>
<li>同一个时间只能运行一个线程</li>
<li>同步可以解决线程中的安全问题</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> package1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadTest2</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name ;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">ThreadTest2</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		ThreadTest2 tt = <span class="keyword">new</span> ThreadTest2(<span class="string">"线程"</span>);</span><br><span class="line">		tt.start();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ;i &lt; <span class="number">4</span>;i++)&#123;</span><br><span class="line">			System.out.println(i);</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line"><span class="comment">//			Thread.currentThread().yield();</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上代码使用<br>    1. Thread.currentThread ().sleep 实现休眠<br>    2. Thread.currentThread().yield() 实现礼让</p>
<h2 id="同步代码块-同步方法"><a href="#同步代码块-同步方法" class="headerlink" title="同步代码块 同步方法"></a>同步代码块 同步方法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> package1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RunnableTest2</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> num  = <span class="number">10</span> ;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">//这里要死循环 或者 循环判断 </span></span><br><span class="line">		<span class="keyword">while</span>(num != <span class="number">0</span>)&#123;</span><br><span class="line">			<span class="keyword">synchronized</span> (RunnableTest2<span class="class">.<span class="keyword">class</span>) </span>&#123;</span><br><span class="line">				<span class="keyword">if</span>(num &gt; <span class="number">0</span>)&#123;</span><br><span class="line">					System.out.println(Thread.currentThread().getName()+<span class="string">"\t"</span>+num--);</span><br><span class="line">				&#125;	</span><br><span class="line">			&#125;</span><br><span class="line"><span class="comment">//			sail();//两种方法的交换</span></span><br><span class="line">		&#125;</span><br><span class="line">			</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">sail</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(num &gt; <span class="number">0</span>)&#123;</span><br><span class="line">			System.out.println(Thread.currentThread().getName()+<span class="string">"\t"</span>+num--);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		RunnableTest2 rt = <span class="keyword">new</span> RunnableTest2();</span><br><span class="line">		<span class="keyword">new</span> Thread(rt).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(rt).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(rt).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(rt).start();</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="同步代码块-同步方法的区别："><a href="#同步代码块-同步方法的区别：" class="headerlink" title="同步代码块 同步方法的区别："></a>同步代码块 同步方法的区别：</h2><pre><code>1. 上面的代码包含的两种方法，通过注释来更换
2.  他们两种没有功能上的区别，可以相互替换
3. 写成方法可以更加灵活，因为可以分块写，不用写成一块了</code></pre><h2 id="同步的死锁："><a href="#同步的死锁：" class="headerlink" title="同步的死锁："></a>同步的死锁：</h2><p><img src="/2017/06/30/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/6.30%20%E7%BA%BF%E7%A8%8B/Java17_%E5%A4%9A%E7%BA%BF%E7%A8%8B%20PDF%20Expert,%20%E4%BB%8A%E5%A4%A9%20at%20%E4%B8%8B%E5%8D%883.25.21.png" alt><br>理解：<br>    1. 爸：我要你的成绩单<br>    2. 儿：我要玩具<br>    3. 爸：你先给我成绩单！<br>    4. 儿：不！你先给我玩具！<br>    5. 两个人怒目相对，谁都不给谁，就相互看着…….</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> package1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LockRunnable</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> flag = <span class="number">1</span>;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	 * 这里是static，原因：</span></span><br><span class="line"><span class="comment">	 * 我在执行的时候初始化了两个LockRunnable对象，那么就会生成两套资源</span></span><br><span class="line"><span class="comment">	 * 也就是有 两个成绩单  和 两个玩具</span></span><br><span class="line"><span class="comment">	 * 所以，要通过static来保证只有 一个成绩单 和 一个玩具</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">static</span> Object o1 = <span class="keyword">new</span> Object();<span class="comment">//表示玩具</span></span><br><span class="line">	<span class="keyword">static</span> Object o2 = <span class="keyword">new</span> Object();<span class="comment">//表示成绩单</span></span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(flag);<span class="comment">//如果1 表示家长</span></span><br><span class="line">		<span class="keyword">if</span>(flag == <span class="number">1</span>)&#123;</span><br><span class="line">			<span class="keyword">synchronized</span> (o1) &#123;<span class="comment">//我现在要占用o1了，很幸运还在，我就把它拿走了，然后我接的执行</span></span><br><span class="line">				<span class="keyword">try</span> &#123;</span><br><span class="line">					Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">				&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">					<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">synchronized</span> (o2) &#123;<span class="comment">//我现在要占用o2了，但是发现不在有人拿着，我就等着！</span></span><br><span class="line">					System.out.println(<span class="string">"可以给你玩具了"</span>);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">if</span>(flag == <span class="number">0</span>)&#123;</span><br><span class="line">			<span class="keyword">synchronized</span> (o2) &#123;</span><br><span class="line">				<span class="keyword">try</span> &#123;</span><br><span class="line">					Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">				&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">					<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">synchronized</span> (o1) &#123;</span><br><span class="line">					System.out.println(<span class="string">"可以给成绩单"</span>);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;	</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//这里是两个资源对象，所以要声明称static类型</span></span><br><span class="line">		LockRunnable t1 = <span class="keyword">new</span> LockRunnable();</span><br><span class="line">		t1.flag =<span class="number">1</span> ;</span><br><span class="line">		LockRunnable t2 = <span class="keyword">new</span> LockRunnable();</span><br><span class="line">		t2.flag =<span class="number">0</span> ;</span><br><span class="line">		<span class="keyword">new</span> Thread(t1).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(t2).start();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="在上面的代码中注意："><a href="#在上面的代码中注意：" class="headerlink" title="在上面的代码中注意："></a>在上面的代码中注意：</h2><pre><code>1. 正确理解synchronize的意思：
    1. **用在方法时，这个方法不能被同一个对象同时调用**
    2. 用在块时，（）里的为需要站用的资源，根据这个进行判断
2.  为什么要使用static
3. 注意这里产生了两个LockRunnable资源对象，一个代表父亲，一个代表儿子</code></pre>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://chenzhiheng.cn/2017/06/30/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/6.30%E7%94%9F%E4%BA%A7%E8%80%85%E6%B6%88%E8%B4%B9%E8%80%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈志恒的技术博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/06/30/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/6.30%E7%94%9F%E4%BA%A7%E8%80%85%E6%B6%88%E8%B4%B9%E8%80%85/" class="post-title-link" itemprop="url">6.30生产者消费者</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-06-30 05:09:00" itemprop="dateCreated datePublished" datetime="2017-06-30T05:09:00+08:00">2017-06-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-03-12 20:06:07" itemprop="dateModified" datetime="2020-03-12T20:06:07+08:00">2020-03-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web%E5%BC%80%E5%8F%91-czh-java-java%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index">
                    <span itemprop="name">web开发/czh_java/java基础</span>
                  </a>
                </span>
            </span>

          
            <span id="/2017/06/30/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/6.30%E7%94%9F%E4%BA%A7%E8%80%85%E6%B6%88%E8%B4%B9%E8%80%85/" class="post-meta-item leancloud_visitors" data-flag-title="6.30生产者消费者" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.8k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2017年6月30日 下午5:09</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//馒头类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SteamBread</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> id;<span class="comment">//馒头编号</span></span><br><span class="line"></span><br><span class="line">	SteamBread(<span class="keyword">int</span> id)&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"steamBread:"</span>+id;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//装馒头的框，栈结构</span><span class="class"><span class="keyword">class</span> <span class="title">SyncStack</span></span>&#123;	<span class="keyword">int</span> index = <span class="number">0</span>;	SteamBread[] stb = <span class="keyword">new</span> SteamBread[<span class="number">6</span>];<span class="comment">//构造馒头数组，相当于馒头筐，容量是6</span>		<span class="comment">//放入框中，相当于入栈</span>	<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(SteamBread sb)</span></span>&#123;		<span class="keyword">while</span>(index==stb.length)&#123;<span class="comment">//筐满了，即栈满，</span>			<span class="keyword">try</span> &#123;				<span class="keyword">this</span>.wait();<span class="comment">//让当前线程等待</span>			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;				<span class="comment">// TODO Auto-generated catch block</span>				e.printStackTrace();			&#125;		&#125;		<span class="keyword">this</span>.notify();<span class="comment">//唤醒在此对象监视器上等待的单个线程，即消费者线程</span>		stb[index] = sb;		<span class="keyword">this</span>.index++;	&#125;		<span class="comment">//从框中拿出，相当于出栈</span>	<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> SteamBread <span class="title">pop</span><span class="params">()</span></span>&#123;		<span class="keyword">while</span>(index==<span class="number">0</span>)&#123;<span class="comment">//筐空了，即栈空</span>			<span class="keyword">try</span> &#123;				<span class="keyword">this</span>.wait();			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;				<span class="comment">// TODO Auto-generated catch block</span>				e.printStackTrace();			&#125;		&#125;		<span class="keyword">this</span>.notify();		<span class="keyword">this</span>.index--;<span class="comment">//push第n个之后，this.index++，使栈顶为n+1，故return之前要减一</span>		<span class="keyword">return</span> stb[index];	&#125;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//生产者类，实现了Runnable接口，以便于构造生产者线程</span><span class="class"><span class="keyword">class</span> <span class="title">Producer</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;	SyncStack ss = <span class="keyword">null</span>;	Producer(SyncStack ss)&#123;		<span class="keyword">this</span>.ss = ss;	&#125;	<span class="meta">@Override</span>	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;		<span class="comment">// 开始生产馒头</span>		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">20</span>;i++)&#123;			SteamBread stb = <span class="keyword">new</span> SteamBread(i);			ss.push(stb);			System.out.println(<span class="string">"生产了"</span>+stb);			<span class="keyword">try</span> &#123;				Thread.sleep(<span class="number">10</span>);<span class="comment">//每生产一个馒头，睡觉10毫秒</span>			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;				<span class="comment">// TODO Auto-generated catch block</span>				e.printStackTrace();			&#125;		&#125;	&#125;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//消费者类，实现了Runnable接口，以便于构造消费者线程</span><span class="class"><span class="keyword">class</span> <span class="title">Consume</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;	SyncStack ss = <span class="keyword">null</span>;	<span class="function"><span class="keyword">public</span> <span class="title">Consume</span><span class="params">(SyncStack ss)</span> </span>&#123;		<span class="keyword">super</span>();		<span class="keyword">this</span>.ss = ss;	&#125;	<span class="meta">@Override</span>	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;		<span class="comment">// TODO Auto-generated method stub</span>		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">20</span>;i++)&#123;<span class="comment">//开始消费馒头</span>			SteamBread stb = ss.pop();			System.out.println(<span class="string">"消费了"</span>+stb);			<span class="keyword">try</span> &#123;				Thread.sleep(<span class="number">100</span>);<span class="comment">//每消费一个馒头，睡觉100毫秒。即生产多个，消费一个</span>			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;				<span class="comment">// TODO Auto-generated catch block</span>				e.printStackTrace();			&#125;		&#125;	&#125;	&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> thread;<span class="comment">//主类</span><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProduceConsume</span> </span>&#123;	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;		SyncStack ss = <span class="keyword">new</span> SyncStack();<span class="comment">//建造一个装馒头的框</span>		Producer p = <span class="keyword">new</span> Producer(ss);<span class="comment">//新建一个生产者，使之持有框</span>		Consume c = <span class="keyword">new</span> Consume(ss);<span class="comment">//新建一个消费者，使之持有同一个框</span>		Thread tp = <span class="keyword">new</span> Thread(p);<span class="comment">//新建一个生产者线程</span>		Thread tc = <span class="keyword">new</span> Thread(c);<span class="comment">//新建一个消费者线程</span>		tp.start();<span class="comment">//启动生产者线程</span></span><br><span class="line">		tc.start();<span class="comment">//启动消费者线程</span>	&#125;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="如何思考："><a href="#如何思考：" class="headerlink" title="如何思考："></a>如何思考：</h2><pre><code>1. 根据我对算法的总结“先生活例子，然后提取概括，后算法实现”的思路
2. 我们先想这几个问题：
    1. 堆栈空了怎么办：消费者停止消费
    2. 堆栈满了怎么办：生产者停止生产
    3. 那么：我们既然要实现停止的功能，这时就得想到**线程**
    4. 因为：如果不用runnable，那么方法执行其不可控，只能一次执行完，或者出错一般的改写
3. 如果生产和消费同时进行怎么办：**sync**
4. 如何保证只用一个栈呢：**引用传参**
5. 容易忽略的问题：
    1. 既然生产和消费者都能停止，那么何时唤醒呢？
    2. 这个问题关键不是如何解决，而是注意到这个问题。
    3. **结论：等待 唤醒成对出现**
    4. **生产的时候唤醒消费，消费的时候唤醒生产**
    5. **生产暂停生产 ，消费暂停生产**
6. 实现：
    1. 先馒头 -&gt; 栈 -&gt; 生产者 -&gt; 消费者 -&gt; 总类</code></pre><h2 id="总结讨论："><a href="#总结讨论：" class="headerlink" title="总结讨论："></a>总结讨论：</h2><pre><code>1. 在这个实下中**一个消费者 ，一个生产者 ，一个栈**
2. 如果同一个消费者执行多次start()，同一个消费者也执行多次start()呢（图1）？</code></pre><p><img src="/2017/06/30/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/6.30%E7%94%9F%E4%BA%A7%E8%80%85%E6%B6%88%E8%B4%B9%E8%80%85/Bear%20Bear,%20%E4%BB%8A%E5%A4%A9%20at%20%E4%B8%8B%E5%8D%885.41.24.png" alt><br>                                图1<br>    这时还是共享一个资源<br>    3. 如果多个消费者，多个生产者呢（图2）<strong>并且在生产者消费中将栈都声明为static</strong>？<br><img src="/2017/06/30/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/6.30%E7%94%9F%E4%BA%A7%E8%80%85%E6%B6%88%E8%B4%B9%E8%80%85/Bear%20Bear,%20%E4%BB%8A%E5%A4%A9%20at%20%E4%B8%8B%E5%8D%885.46.26.png" alt><br>                                图2<br>    这时还是共享一个资源<br>    4. 如果多个消费者，多个生产者呢，但是却<strong>不将生产者消费中将栈声明为static</strong>？<br>        1. 这时，两个消费者使用不同的资源，两个消费也使用不同的资源<br>        2. 但是，由于是引用类型，本质内存中只有一个资源空间<br>        3. 程序就乱了！！！！！</p>
<p><strong>注：在多线程中，虽然我们使用了多线程，但是其实一个具体的时刻还是只有一个线程运行，变得只是这些各自的多线程会走走停停，交互运行</strong></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://chenzhiheng.cn/2017/06/29/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/6.29%E6%95%B0%E7%BB%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈志恒的技术博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/06/29/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/6.29%E6%95%B0%E7%BB%84/" class="post-title-link" itemprop="url">6.29数组</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-06-29 12:09:00" itemprop="dateCreated datePublished" datetime="2017-06-29T12:09:00+08:00">2017-06-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-03-12 20:06:07" itemprop="dateModified" datetime="2020-03-12T20:06:07+08:00">2020-03-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web%E5%BC%80%E5%8F%91-czh-java-java%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index">
                    <span itemprop="name">web开发/czh_java/java基础</span>
                  </a>
                </span>
            </span>

          
            <span id="/2017/06/29/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/6.29%E6%95%B0%E7%BB%84/" class="post-meta-item leancloud_visitors" data-flag-title="6.29数组" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.3k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2017年6月29日 下午12:09</p>
<h2 id="第一个部分：数组定义"><a href="#第一个部分：数组定义" class="headerlink" title="第一个部分：数组定义"></a>第一个部分：数组定义</h2><p>定义的方法：<br>    1.  int num[]= new int[10];必须说明长度 int初始化为0<br>    2.  int []num;<br>     num=new int[5]<br>    3.  int num[]=new int[]{1,2,3,4}<br>    4.  int num[]={1,2,4,5,6,7}<br>     String string1[] = {“1”,”2”};</p>
<p>长度方面的错：<br>    1. String str[] = new String[];不能不说明长度<br>    2. int num[10];编译出错   说明长度情况下，必须要有指向的内容<br>    3. String str[] = new String[3]{“1”,”2”,”3”}; 编译错</p>
<p>先定义后初始化（一对三错）：<br>    String str[];<br>    str = new String[]{“1”,”2”};对</p>
<pre><code>String str[];
str[] = new String[]{&quot;1&quot;,&quot;2&quot;};错

String str[];
str = {&quot;1&quot;,&quot;2&quot;};错

int str[];
str ={1,2};错</code></pre><p>总结：分开只能按1写</p>
<h2 id="第二部分：局部-and-全局-基本类型-and-对象类型-数组-and-非数组"><a href="#第二部分：局部-and-全局-基本类型-and-对象类型-数组-and-非数组" class="headerlink" title="第二部分：局部 and 全局    基本类型 and  对象类型   数组 and 非数组"></a>第二部分：局部 and 全局    基本类型 and  对象类型   数组 and 非数组</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> package1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test5</span> </span>&#123;</span><br><span class="line">	<span class="keyword">static</span> Student student[] = <span class="keyword">new</span> Student[<span class="number">10</span>];</span><br><span class="line">	<span class="keyword">static</span> String string[] = <span class="keyword">new</span> String[<span class="number">10</span>];</span><br><span class="line">	<span class="keyword">static</span> Student student2[] = <span class="keyword">new</span> Student[]&#123;<span class="keyword">new</span> Student(),<span class="keyword">new</span> Student()&#125;;</span><br><span class="line">	<span class="keyword">static</span> String string2[] = <span class="keyword">new</span> String[]&#123;<span class="keyword">new</span> String(),<span class="keyword">new</span> String()&#125;;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		System.out.println(student.length);<span class="comment">//new Student[10] 定义长度</span></span><br><span class="line">		System.out.println(student[<span class="number">0</span>]);<span class="comment">//但是没在堆中定义空间</span></span><br><span class="line">		</span><br><span class="line">		System.out.println(string.length);</span><br><span class="line">		System.out.println(string[<span class="number">0</span>]);<span class="comment">//但是没在堆中定义空间</span></span><br><span class="line">	</span><br><span class="line">		System.out.println(student2.length);</span><br><span class="line">		System.out.println(student2[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">		System.out.println(string2.length);</span><br><span class="line">		System.out.println(string2[<span class="number">0</span>]);<span class="comment">//这里输出的是""打印出来为空</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">10</span><br><span class="line">null</span><br><span class="line">10</span><br><span class="line">null</span><br><span class="line">2</span><br><span class="line">package1.Student@677327b6</span><br><span class="line">2</span><br></pre></td></tr></table></figure>
<p>[“”]自己加的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> package1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test4</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">		Student student[] = <span class="keyword">new</span> Student[<span class="number">10</span>];</span><br><span class="line">		System.out.println(student.length);<span class="comment">//new Student[10] 定义长度</span></span><br><span class="line">		System.out.println(student[<span class="number">0</span>]);<span class="comment">//但是没在堆中定义空间</span></span><br><span class="line">		</span><br><span class="line">		String string[] = <span class="keyword">new</span> String[<span class="number">10</span>];</span><br><span class="line">		System.out.println(string.length);</span><br><span class="line">		System.out.println(string[<span class="number">0</span>]);<span class="comment">//但是没在堆中定义空间</span></span><br><span class="line">		</span><br><span class="line">		Student student2[] = <span class="keyword">new</span> Student[]&#123;<span class="keyword">new</span> Student(),<span class="keyword">new</span> Student()&#125;;</span><br><span class="line">		System.out.println(student2.length);</span><br><span class="line">		System.out.println(student2[<span class="number">0</span>]);</span><br><span class="line">		</span><br><span class="line">		String string2[] = <span class="keyword">new</span> String[]&#123;<span class="keyword">new</span> String(),<span class="keyword">new</span> String()&#125;;</span><br><span class="line">		System.out.println(string2.length);</span><br><span class="line">		System.out.println(string2[<span class="number">0</span>]);<span class="comment">//这里输出的是""打印出来为空</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">//Student String 数组是完全一样的 </span></span><br><span class="line">		<span class="comment">//除了new的默认值以外，String的默认值是"" Student默认值为包名+地址</span></span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">10</span><br><span class="line">null</span><br><span class="line">10</span><br><span class="line">null</span><br><span class="line">2</span><br><span class="line">package1.Student@677327b6</span><br><span class="line">2</span><br><span class="line">[“”]自己加的</span><br></pre></td></tr></table></figure>

<p>发现：<br>        1. 他们的输出是一样的，说明局部变量的概念对数组无效</p>
<p><img src="/2017/06/29/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/6.29%E6%95%B0%E7%BB%84/workspace%20-%20Java%20-%20Class629-src-package1-Test4.java%20-%20Eclipse%20Eclipse,%20%E4%BB%8A%E5%A4%A9%20at%20%E4%B8%8B%E5%8D%8812.10.44.png" alt><br>                                    图1：对象声明为局部<br><img src="/2017/06/29/web%E5%BC%80%E5%8F%91/czh_java/java%E5%9F%BA%E7%A1%80/6.29%E6%95%B0%E7%BB%84/workspace%20-%20Java%20-%20Class629-src-package1-Test5.java%20-%20Eclipse%20Eclipse,%20%E4%BB%8A%E5%A4%A9%20at%20%E4%B8%8B%E5%8D%8812.11.02.png" alt><br>                                    图2：对象声明为全局<br>发现：<br>        1. 对于非数组对象（单个对象），局部变量概念有效</p>
<p>加入基本类型后：<br>    1. 局部中：<br>                                     基本类型            对象类型<br>        数组（只定义长度）                0                    null<br>         <del>非数组（只对象声明）                   错                     错</del><br>    3. 全局中：<br>                                     基本类型            对象类型<br>        数组（只定义长度）                0                    null<br>        <del>非数组（只对象声明）                        0                    null</del>     </p>
<p>总结：<br>    对于数组类型： 基本类型是0，对象类型为null<br>    对于非数组：局部中一定错 ，全局中 0 和 null</p>
<h2 id="String-和-Student的区别（单个对象-以初始化）"><a href="#String-和-Student的区别（单个对象-以初始化）" class="headerlink" title="String 和  Student的区别（单个对象+以初始化）"></a>String 和  Student的区别（单个对象+以初始化）</h2><pre><code>1. String的默认值是&quot;&quot; ，Student默认值为包名+地址
2. 其他的，Student String 数组是完全一样的 </code></pre><p>注：注意前提为以初始化</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/117/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/117/">117</a><span class="page-number current">118</span><a class="page-number" href="/page/119/">119</a><a class="extend next" rel="next" href="/page/119/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Zhiheng Chen</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">1189</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">98</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zhiheng Chen</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    <span title="站点总字数">1.2m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">18:55</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.7.1
  </div>

        






  <script>
  function leancloudSelector(url) {
    url = encodeURI(url);
    return document.getElementById(url).querySelector('.leancloud-visitors-count');
  }
  if (CONFIG.page.isPost) {
    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = decodeURI(visitors.getAttribute('id'));
      var title = visitors.getAttribute('data-flag-title');

      Counter('get', `/classes/Counter?where=${JSON.stringify({ url })}`)
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .then(response => response.json())
              .then(() => {
                leancloudSelector(url).innerText = counter.time + 1;
              })
              .catch(error => {
                console.error('Failed to save visitor count', error);
              })
          } else {
              Counter('post', '/classes/Counter', { title: title, url: url, time: 1 })
                .then(response => response.json())
                .then(() => {
                  leancloudSelector(url).innerText = 1;
                })
                .catch(error => {
                  console.error('Failed to create', error);
                });
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }
  } else {
    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return decodeURI(element.getAttribute('id'));
      });

      Counter('get', `/classes/Counter?where=${JSON.stringify({ url: { '$in': entries } })}`)
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length === 0) {
            document.querySelectorAll('.leancloud_visitors .leancloud-visitors-count').forEach(element => {
              element.innerText = 0;
            });
            return;
          }
          for (let item of results) {
            let { url, time } = item;
            leancloudSelector(url).innerText = time;
          }
          for (let url of entries) {
            var element = leancloudSelector(url);
            if (element.innerText == '') {
              element.innerText = 0;
            }
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }
  }

  fetch('https://app-router.leancloud.cn/2/route?appId=QiM1vjQ7SAoirKD4qY57L82O-gzGzoHsz')
    .then(response => response.json())
    .then(({ api_server }) => {
      var Counter = (method, url, data) => {
        return fetch(`https://${api_server}/1.1${url}`, {
          method: method,
          headers: {
            'X-LC-Id'     : 'QiM1vjQ7SAoirKD4qY57L82O-gzGzoHsz',
            'X-LC-Key'    : 'aOHhzmfDblK0HGWUqEyb6ra2',
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    });
  </script>


      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  


</body>
</html>
