<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.chenzhiheng.cn","root":"/","scheme":"Pisces","version":"7.7.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="é™ˆå¿—æ’çš„æŠ€æœ¯åšå®¢">
<meta property="og:url" content="http://www.chenzhiheng.cn/page/90/index.html">
<meta property="og:site_name" content="é™ˆå¿—æ’çš„æŠ€æœ¯åšå®¢">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Zhiheng Chen">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://www.chenzhiheng.cn/page/90/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>é™ˆå¿—æ’çš„æŠ€æœ¯åšå®¢</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?6bc779d0e3be483fc01e871fbb7cef3d";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">é™ˆå¿—æ’çš„æŠ€æœ¯åšå®¢</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>å½’æ¡£</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.chenzhiheng.cn/2018/03/02/f%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3/czh_%E6%95%B0%E5%AD%A6/%E5%88%86%E7%B1%BB/%E6%A6%82%E7%8E%87%E7%BB%9F%E8%AE%A1/%E6%A6%82%E7%8E%87%E6%A1%86%E6%9E%B6%EF%BC%88mindnote%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é™ˆå¿—æ’çš„æŠ€æœ¯åšå®¢">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/02/f%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3/czh_%E6%95%B0%E5%AD%A6/%E5%88%86%E7%B1%BB/%E6%A6%82%E7%8E%87%E7%BB%9F%E8%AE%A1/%E6%A6%82%E7%8E%87%E6%A1%86%E6%9E%B6%EF%BC%88mindnote%EF%BC%89/" class="post-title-link" itemprop="url">æ¦‚ç‡æ¡†æ¶ï¼ˆmindnoteï¼‰</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-03-02 05:26:00" itemprop="dateCreated datePublished" datetime="2018-03-02T05:26:00+08:00">2018-03-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-03-12 20:02:04" itemprop="dateModified" datetime="2020-03-12T20:02:04+08:00">2020-03-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/f%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3-czh-%E6%95%B0%E5%AD%A6-%E5%88%86%E7%B1%BB-%E6%A6%82%E7%8E%87%E7%BB%9F%E8%AE%A1/" itemprop="url" rel="index">
                    <span itemprop="name">fæ•°å­¦ç›¸å…³/czh_æ•°å­¦/åˆ†ç±»/æ¦‚ç‡ç»Ÿè®¡</span>
                  </a>
                </span>
            </span>

          
            <span id="/2018/03/02/f%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3/czh_%E6%95%B0%E5%AD%A6/%E5%88%86%E7%B1%BB/%E6%A6%82%E7%8E%87%E7%BB%9F%E8%AE%A1/%E6%A6%82%E7%8E%87%E6%A1%86%E6%9E%B6%EF%BC%88mindnote%EF%BC%89/" class="post-meta-item leancloud_visitors" data-flag-title="æ¦‚ç‡æ¡†æ¶ï¼ˆmindnoteï¼‰" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>48</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>1 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2018å¹´3æœˆ2æ—¥ ä¸‹åˆ5:26</p>
<p>æˆ‘ç°åœ¨è§‰å¾—æˆ‘è¿™ä¸ªé‡Œé¢çš„è®¤è¯†è¿˜æ˜¯æ¯”è¾ƒè®©æˆ‘èˆ’æœçš„ç†è§£<br><a href="%E7%BB%9F%E8%AE%A1%E4%B8%8E%E6%A6%82%E7%8E%87.pdf">ç»Ÿè®¡ä¸æ¦‚ç‡.pdf</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.chenzhiheng.cn/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E5%85%B3%E4%BA%8E%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E7%9A%84%E6%80%9D%E8%80%83%F0%9F%A4%94/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é™ˆå¿—æ’çš„æŠ€æœ¯åšå®¢">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E5%85%B3%E4%BA%8E%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E7%9A%84%E6%80%9D%E8%80%83%F0%9F%A4%94/" class="post-title-link" itemprop="url">å…³äºé¡¹ç›®ç»“æ„çš„æ€è€ƒğŸ¤”</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-03-01 12:13:00" itemprop="dateCreated datePublished" datetime="2018-03-01T12:13:00+08:00">2018-03-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-03-12 20:06:08" itemprop="dateModified" datetime="2020-03-12T20:06:08+08:00">2020-03-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web%E5%BC%80%E5%8F%91-czh-java-%E6%AF%95%E8%AE%BE/" itemprop="url" rel="index">
                    <span itemprop="name">webå¼€å‘/czh_java/æ¯•è®¾</span>
                  </a>
                </span>
            </span>

          
            <span id="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E5%85%B3%E4%BA%8E%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E7%9A%84%E6%80%9D%E8%80%83%F0%9F%A4%94/" class="post-meta-item leancloud_visitors" data-flag-title="å…³äºé¡¹ç›®ç»“æ„çš„æ€è€ƒğŸ¤”" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>102</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>1 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2018å¹´3æœˆ1æ—¥ ä¸‹åˆ12:13</p>
<p>å”¯ä¸€ç´¢å¼•å’Œé«˜å¹¶å‘å…³ç³»</p>
<p>ä»£ç å±‚é¢çš„é—®é¢˜</p>
<ol>
<li>å‰é¢æ¯èŠ‚éƒ½æœ‰</li>
</ol>
<p>ç»†èŠ‚æ–¹é¢çš„é—®é¢˜</p>
<ol>
<li>åº“å­˜å¿˜äº†</li>
</ol>
<p>è®¾è®¡æ˜¯å¤šå±‚æ¬¡ï¼Œå¤šç»´åº¦ï¼Œå¤šå‡ºå‘ç‚¹çš„ï¼ï¼å…³é”®æ˜¯å¤š</p>
<p>ç°å®é¡¹ç›®éœ€è¦ï¼švo ç»„åˆvo<br>é«˜å¤ç”¨ï¼šreponseServse</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.chenzhiheng.cn/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é™ˆå¿—æ’çš„æŠ€æœ¯åšå®¢">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC/" class="post-title-link" itemprop="url">æ§åˆ¶åè½¬</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-03-01 12:04:00" itemprop="dateCreated datePublished" datetime="2018-03-01T12:04:00+08:00">2018-03-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-03-12 20:06:08" itemprop="dateModified" datetime="2020-03-12T20:06:08+08:00">2020-03-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web%E5%BC%80%E5%8F%91-czh-java-%E6%AF%95%E8%AE%BE/" itemprop="url" rel="index">
                    <span itemprop="name">webå¼€å‘/czh_java/æ¯•è®¾</span>
                  </a>
                </span>
            </span>

          
            <span id="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC/" class="post-meta-item leancloud_visitors" data-flag-title="æ§åˆ¶åè½¬" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>361</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>1 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2018å¹´3æœˆ1æ—¥ ä¸‹åˆ12:04</p>
<p><a href="https://baike.baidu.com/item/%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC/1158025?fr=aladdin&fromid=4853&fromtitle=ioc" target="_blank" rel="noopener">æ§åˆ¶åè½¬_ç™¾åº¦ç™¾ç§‘</a></p>
<ol>
<li>ã€è§£æã€‘ï¼šæ§åˆ¶åè½¬ï¼ˆInversion of Controlï¼Œè‹±æ–‡ç¼©å†™ä¸ºIoCï¼‰æŠŠ<strong>åˆ›å»ºå¯¹è±¡çš„æƒåˆ©äº¤ç»™æ¡†æ¶</strong>,æ˜¯æ¡†æ¶çš„é‡è¦ç‰¹å¾ï¼Œå¹¶éé¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸“ç”¨æœ¯è¯­ã€‚å®ƒåŒ…æ‹¬ä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼Œç®€ç§°DIï¼‰å’Œä¾èµ–æŸ¥æ‰¾ï¼ˆDependency Lookupï¼‰ã€‚</li>
<li>ã€è§£å†³çš„é—®é¢˜ã€‘ï¼šå¯¹è±¡å’Œå¯¹è±¡ä¹‹é—´æ˜¯å¦‚ä½•å»ºç«‹èµ·å…³è”çš„</li>
<li>ã€ä½¿ç”¨æƒ…æ™¯ã€‘ï¼š<ol>
<li>åœ¨ä¼ä¸šä¸­æˆ‘ä»¬åˆ†å·¥åˆä½œçš„æ—¶å€™ï¼Œcontrollerå’ŒServiceæ˜¯ä¸åŒçš„äººå»å†™çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„controllerä½¿ç”¨æ¡†æ¶ä¸­çš„æ§åˆ¶åè½¬ï¼Œå°±å¯ä»¥ä¸å»è€ƒè™‘å¯¹è±¡åˆå§‹åŒ–çš„é¡ºåºï¼Œä»¥åŠå„ç§ä¾èµ–ã€‚</li>
<li>ä¸ä½¿ç”¨IoCçš„å®ç°æ–¹å¼ï¼ˆçº¢è‰²æ³¨é‡Šä¸­ï¼‰ï¼š<br><img src="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC/9AF91F9A-A117-4CA9-BE94-FE0C31859C8A.png" alt></li>
</ol>
</li>
<li>ã€ä»£æ›¿ã€‘ï¼šç”¨é…ç½®æ–‡ä»¶ä¹Ÿå¯ä»¥å®ç°å¯¹è±¡çš„å»ºç«‹ä»¥åŠè¯´æ˜å¯¹è±¡ä¹‹é—´çš„å…³è”å…³ç³»<br><img src="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC/AE2E0417-5E0B-4151-B88B-D9EE4640E518.png" alt><br>æ³¨ï¼šä¸€ä¸ªbeanå°±æ˜¯ä¸€ä¸ªå¯¹è±¡å®ä½“ï¼Œrefæ¥è®¾ç½®å¯¹è±¡ä¹‹é—´çš„å…³è”å…³ç³»</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.chenzhiheng.cn/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/page-helper/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é™ˆå¿—æ’çš„æŠ€æœ¯åšå®¢">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/page-helper/" class="post-title-link" itemprop="url">page-helper</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-03-01 12:03:00" itemprop="dateCreated datePublished" datetime="2018-03-01T12:03:00+08:00">2018-03-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-03-12 20:06:08" itemprop="dateModified" datetime="2020-03-12T20:06:08+08:00">2020-03-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web%E5%BC%80%E5%8F%91-czh-java-%E6%AF%95%E8%AE%BE/" itemprop="url" rel="index">
                    <span itemprop="name">webå¼€å‘/czh_java/æ¯•è®¾</span>
                  </a>
                </span>
            </span>

          
            <span id="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/page-helper/" class="post-meta-item leancloud_visitors" data-flag-title="page-helper" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>879</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>1 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2018å¹´3æœˆ1æ—¥ ä¸‹åˆ12:03</p>
<ol>
<li>ä¾èµ–ï¼špom.xml<br><img src="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/page-helper/DB37E855-02AE-4A09-818B-0A465AA398EF.png" alt></li>
<li>ä½¿ç”¨æ­¥éª¤ï¼šproductServiceImpl.java<ol>
<li>startPageâ€“start</li>
<li>å¡«å……è‡ªå·±çš„sqlæŸ¥è¯¢é€»è¾‘</li>
<li>pageHelper-æ”¶å°¾<ol>
<li><strong>pageInfoæ˜¯ pageHelperè‡ªå¸¦çš„è¿”å›ç±»å‹</strong></li>
<li>pageHelperè¿™ä¸ªæ¡†æ¶é‡‡ç”¨AOPæ–¹å¼åœ¨æˆ‘ä»¬æ‰§è¡Œçš„sqlçš„åŸºç¡€ä¸Šè¿›è¡Œåˆ‡é¢ï¼Œ<strong>æš—åœ°é‡Œåœ¨æœ¬èº«çš„sqlåŸºç¡€ä¸ŠåŠ å·¥</strong>ï¼Œå†å»æ•°æ®åº“ä¸­æŸ¥è‡ªå·±éœ€è¦çš„ç»Ÿè®¡æ•°æ®ï¼Œ<strong>æœ€åå°±æ˜¯ä½“ç°åœ¨äº†pageInfo pageResultè¿™ä¸ªå¯¹è±¡ä¸­</strong>.</li>
</ol>
</li>
<li><strong>ç»¿è‰²</strong>ï¼šè¿”å›ServiceResponseå¯¹è±¡<br><img src="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/page-helper/26A4B3D6-AD7B-4641-9474-8137DD601217.png" alt><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ServerResponse&lt;PageInfo&gt; <span class="title">getProductList</span><span class="params">(<span class="keyword">int</span> pageuNum,<span class="keyword">int</span> pageSize)</span></span>&#123;</span><br><span class="line">      <span class="comment">//startPage--start</span></span><br><span class="line">      <span class="comment">//å¡«å……è‡ªå·±çš„sqlæŸ¥è¯¢é€»è¾‘</span></span><br><span class="line">      <span class="comment">//pageHelper-æ”¶å°¾</span></span><br><span class="line">      PageHelper.startPage(pageNum,pageSize);</span><br><span class="line">      List&lt;Product&gt; productList = productMapper.selectList();</span><br><span class="line"></span><br><span class="line">      List&lt;ProductListVo&gt; productListVoList = Lists.newArrayList();</span><br><span class="line">      <span class="keyword">for</span>(Product productItem : productList)&#123;</span><br><span class="line">          ProductListVo productListVo = assembleProductListVo(productItem);</span><br><span class="line">          productListVoList.add(productListVo);</span><br><span class="line">      &#125;</span><br><span class="line">      PageInfo pageResult = <span class="keyword">new</span> PageInfo(productList);</span><br><span class="line">      pageResult.setList(productListVoList);</span><br><span class="line">      <span class="keyword">return</span> ServerResponse.createBySuccess(pageResult);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li>PageHelperåŸç†çš„åŸç†<ol>
<li>AOP</li>
<li><a href="https://www.jianshu.com/p/316198ee34be" target="_blank" rel="noopener">Spring AOP å‰ç½®å¢å¼ºæ‹¦æˆªä¸åˆ° - ç®€ä¹¦</a><br><img src="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/page-helper/826CFF2D-24DE-4E3E-981A-8A437ACDE14D.png" alt><br><img src="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/page-helper/6254B1DD-E4CC-4931-9CE5-13808D065FD2.png" alt></li>
</ol>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.chenzhiheng.cn/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E8%AE%A2%E5%8D%95%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é™ˆå¿—æ’çš„æŠ€æœ¯åšå®¢">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E8%AE%A2%E5%8D%95%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97/" class="post-title-link" itemprop="url">è®¢å•ç®¡ç†æ¨¡å—</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-03-01 11:38:00" itemprop="dateCreated datePublished" datetime="2018-03-01T11:38:00+08:00">2018-03-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-03-12 20:06:08" itemprop="dateModified" datetime="2020-03-12T20:06:08+08:00">2020-03-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web%E5%BC%80%E5%8F%91-czh-java-%E6%AF%95%E8%AE%BE/" itemprop="url" rel="index">
                    <span itemprop="name">webå¼€å‘/czh_java/æ¯•è®¾</span>
                  </a>
                </span>
            </span>

          
            <span id="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E8%AE%A2%E5%8D%95%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97/" class="post-meta-item leancloud_visitors" data-flag-title="è®¢å•ç®¡ç†æ¨¡å—" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>762</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>1 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2018å¹´3æœˆ1æ—¥ ä¸Šåˆ11:38</p>
<p><strong>ç®€å•ç†è§£è¿™ä¸ªæ¨¡å—çš„æ–¹æ³•ï¼Œçœ‹çœ‹äº¬ä¸œè®¢å•é¡µæœ‰å•¥å°±çŸ¥é“çš„ï¼ï¼</strong></p>
<p><strong>ç‰¹åˆ«æé†’ï¼š</strong>æˆ‘åœ¨å­¦è¿™ä¸ªæ¨¡å—çš„æ—¶å€™ï¼Œå°±è§‰å¾—ä¹±ä¸ƒå…«ç³Ÿçš„ï¼Œè·Ÿä¸ä¸Šè€å¸ˆçš„æ€è·¯ï¼Œæˆ‘åæ¥å‘ç°å…¶å®æ˜¯æˆ‘æ²¡æœ‰åœ¨ä¸€å¼€å§‹å°±å¼„å¼„æ‡‚åœ¨è¿™ä¸ªæ¨¡å—åˆ°åº•è¦å®ç°å“ªäº›åŠŸèƒ½ã€‚åœ¨å¬è¯¾çš„æ—¶å€™ï¼Œåº”è¯¥å…ˆæŠŠæœ€ç»ˆçš„ç›®çš„å»å¼„æ˜ç™½ï¼Œå»è·Ÿä¸Šè€å¸ˆçš„æ€è·¯å°±å¾ˆç®€å•äº†ã€‚åˆ¤æ–­çš„æ–¹æ³•ï¼šå°±æ˜¯èƒ½å¤Ÿçœ‹æ‡‚æ¥å£æ–‡æ¡£ä¸­æ¯ä¸ªæ¥å£æ˜¯å¹²å•¥çš„ï¼ï¼ï¼ï¼<a href="https://gitee.com//imooccode/happymmallwiki/wikis/pages?title=%E9%97%A8%E6%88%B7_%E8%AE%A2%E5%8D%95%E6%8E%A5%E5%8F%A3&parent=" target="_blank" rel="noopener">æ–‡æ¡£é¢„è§ˆ - ç äº‘ Gitee.com</a></p>
<h2 id="å­¦ä¹ ç›®æ ‡ï¼š"><a href="#å­¦ä¹ ç›®æ ‡ï¼š" class="headerlink" title="å­¦ä¹ ç›®æ ‡ï¼š"></a>å­¦ä¹ ç›®æ ‡ï¼š</h2><ol>
<li><p>é¿å…ä¸šåŠ¡é€»è¾‘ä¸­æ¨ªå‘è¶Šæƒå’Œçºµå‘è¶Šæƒç­‰å®‰å…¨æ¼æ´</p>
</li>
<li><p>è®¾è®¡å®ç”¨ã€å®‰å…¨ã€æ‰©å±•æ€§å¼ºå¤§çš„å¸¸é‡ã€æšä¸¾ç±»</p>
<ol>
<li>æ ¹æ®æ‰€ç»™å‚æ•°ï¼Œèµ·æœ€åçš„ç»“æœæ˜¯ä¸€ä¸ªä¸€ä¸ªå­—ç¬¦ä¸²è€Œå·²</li>
<li>è¿™é‡Œä¸ºå•¥ä¼šé€šè¿‡ä¼ å‚çš„å½¢å¼å»è·å–ä¸€ä¸ªcommon/Constç±»ä¸‹çš„å­—ç¬¦ä¸²å˜é‡ï¼Œå‰é¢çš„å‡ ä¸ªæ¨¡å—ä¸­éƒ½æ˜¯ç›´æ¥è·å–ï¼Œæ²¡æœ‰å‚æ•°ä¸€è¯´ï¼Ÿ<ol>
<li>åŸå› ï¼šä»æ•°æ®åº“è¡¨ä¸­å¯ä»¥çœ‹å‡ºï¼š<br><img src="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E8%AE%A2%E5%8D%95%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97/6815987F-D9D0-4E3B-BB04-8D92CB55EE29.png" alt></li>
</ol>
</li>
<li>åœ¨common/Constä¸­çš„å†™æ³•<br><img src="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E8%AE%A2%E5%8D%95%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97/2843A86C-5475-4846-8D38-83BC9F335990.png" alt></li>
<li>å…·ä½“çš„ä½¿ç”¨ï¼š<br><img src="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E8%AE%A2%E5%8D%95%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97/CD227CA3-F787-4DC8-AEAD-3CCA7E44005C.png" alt></li>
</ol>
</li>
<li><p>è®¢å•å·ç”Ÿäº§è§„åˆ™ã€è®¢å•ä¸¥è°¨æ€§åˆ¤æ–­</p>
<ol>
<li>è®¢å•å·å¹¶å‘æ—¶ä¸å¯é‡å¤ï¼Œå½“æ’å…¥åˆ°æ•°æ®åº“æ—¶ï¼Œç”±äºæ•°æ®åº“å”¯ä¸€ä¸»é”®ï¼Œåˆ™ä¼šå‡ºç°ä¸€æ–¹ä¸‹å•å¤±è´¥</li>
</ol>
</li>
<li><p>POJOå’ŒVOä¹‹é—´çš„å®é™…æ“ç»ƒ</p>
<ol>
<li>é¦–å…ˆè¦ç†è§£ä¸ºå•¥è¦æœ‰æœ‰ç»„åˆVOçš„å‡ºç°ï¼š<ol>
<li>è¿™æ˜¯æˆ‘ä»¬ä¸šåŠ¡è¦æ±‚çš„ã€‚ä¸šåŠ¡è¦æ±‚æˆ‘ä»¬è¦æœ‰<strong>ç»™å‰ç«¯çš„è¿”å›å€¼å°±å¿…é¡»åŒ…æ‹¬Orderï¼ŒOrderItemï¼ŒShippingè¿™ä¸‰å¼ è¡¨çš„ä¿¡æ¯</strong>ã€‚</li>
<li>é‚£ä¹ˆï¼Œæˆ‘ä»¬è‡ªç„¶å°±éœ€è¦æ‹¼å‡‘ä¸€ä¸ªç¬¦åˆçš„VOæ¥æ»¡è¶³ä¸šåŠ¡çš„è¦æ±‚</li>
</ol>
</li>
<li>åœ¨_order_create.doæ¥å£çš„è¿”å›responseServiceä¸­çš„dataæ˜¯OrderVo</li>
<li><strong>OrderVoåŒ…å«List<OrderItemVo>å’ŒShippingVo</OrderItemVo></strong><br><img src="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E8%AE%A2%E5%8D%95%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97/1FB6D1CB-AA56-4AFA-A3A7-05B14B9B772D.png" alt></li>
</ol>
</li>
<li><p>mybatisæ‰¹é‡æ’å…¥</p>
<ol>
<li><a href="bear://x-callback-url/open-note?id=5B10F450-6AF6-4897-833A-D3BEEC7F3177-2468-0001296146C119D9">MyBatisè¯­æ³•ç®€å•è¯´æ˜</a>ä¸­ç¬¬äºŒéƒ¨åˆ†</li>
</ol>
</li>
</ol>
<h2 id="è®¢å•æ¨¡å—å¯ä»¥è¯´æ˜¯æœ€å¤æ‚çš„æ¨¡å—"><a href="#è®¢å•æ¨¡å—å¯ä»¥è¯´æ˜¯æœ€å¤æ‚çš„æ¨¡å—" class="headerlink" title="è®¢å•æ¨¡å—å¯ä»¥è¯´æ˜¯æœ€å¤æ‚çš„æ¨¡å—"></a>è®¢å•æ¨¡å—å¯ä»¥è¯´æ˜¯æœ€å¤æ‚çš„æ¨¡å—</h2><ol>
<li>æ¶‰åŠåˆ°5å¼ è¡¨<ol>
<li>productä¸­æ›´æ–°åº“å­˜</li>
<li>orderä¸­ç”Ÿæˆè®¢å•</li>
<li>order_itemä¸­ä¿å­˜è®¢å•ä¸­çš„å…·ä½“product</li>
<li>shippingè¿›è¡Œé…è´§åœ°å€ç®¡ç†</li>
<li>payinfoä¿å­˜è®¢å•æ”¯ä»˜çš„è¯¦ç»†ä¿¡æ¯</li>
</ol>
</li>
<li>åŒæ—¶ï¼Œè¿™ä¹Ÿé€ æˆäº†ä¼šæœ‰ä¸Šé¢å¤æ‚çš„voç»„åˆå…³ç³»å‡ºç°</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.chenzhiheng.cn/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é™ˆå¿—æ’çš„æŠ€æœ¯åšå®¢">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" class="post-title-link" itemprop="url">å†…ç½‘ç©¿é€</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-03-01 10:09:00" itemprop="dateCreated datePublished" datetime="2018-03-01T10:09:00+08:00">2018-03-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-03-12 20:06:08" itemprop="dateModified" datetime="2020-03-12T20:06:08+08:00">2020-03-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web%E5%BC%80%E5%8F%91-czh-java-%E6%AF%95%E8%AE%BE/" itemprop="url" rel="index">
                    <span itemprop="name">webå¼€å‘/czh_java/æ¯•è®¾</span>
                  </a>
                </span>
            </span>

          
            <span id="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" class="post-meta-item leancloud_visitors" data-flag-title="å†…ç½‘ç©¿é€" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>730</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>1 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2018å¹´3æœˆ1æ—¥ ä¸Šåˆ10:09</p>
<h2 id="å†…ç½‘ç©¿é€-ngrok-natapp-èŠ±ç”Ÿå£³"><a href="#å†…ç½‘ç©¿é€-ngrok-natapp-èŠ±ç”Ÿå£³" class="headerlink" title="å†…ç½‘ç©¿é€(ngrok natapp èŠ±ç”Ÿå£³)"></a>å†…ç½‘ç©¿é€(ngrok natapp èŠ±ç”Ÿå£³)</h2><pre><code>1. å…ˆäº†è§£ä¸€äº›åè¯ï¼š
    1. [ä¸€åˆ†é’Ÿå®ç°å†…ç½‘ç©¿é€ï¼ˆngrokæœåŠ¡å™¨æ­å»ºï¼‰ - CSDNåšå®¢](http://blog.csdn.net/zhangguo5/article/details/77848658?utm_source=5ibc.net&amp;utm_medium=referral)
    2. [DHCPæ˜¯ä»€ä¹ˆï¼Ÿ_ç™¾åº¦çŸ¥é“](https://zhidao.baidu.com/question/266502733.html)</code></pre><p><img src="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/B5C03589-D9D9-461C-8E9F-7B53E24A2ADA.png" alt><br>    2. <strong>ç†è§£å†…ç½‘ç©¿é€ä½¿ç”¨åœºæ™¯</strong>ï¼š<a href="https://jingyan.baidu.com/article/915fc414b685a251394b209d.html" target="_blank" rel="noopener">å†…ç½‘ç©¿é€æ€ä¹ˆæ ·è®©å¤–ç½‘è®¿é—®å†…ç½‘æœåŠ¡å™¨å’Œåº”ç”¨_ç™¾åº¦ç»éªŒ</a><br><img src="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/07AE7790-F153-4D70-BEA4-C9E75687D536.png" alt><br>    3. <strong>é¡¹ç›®ä¸­ä½¿ç”¨ç¼˜ç”±</strong>ï¼šæ”¯ä»˜å®æœåŠ¡å™¨æ‰§è¡Œçš„<strong>å›è°ƒæ–¹æ³•</strong>ï¼Œè¿™æ—¶ä¼šè®¿é—®æˆ‘ä»¬æœ¬åœ°tomcatï¼Œç›®çš„æ˜¯å‘Šè¯‰æˆ‘ä»¬ä¸€äº›ä¿¡æ¯ï¼Œæ‰€ä»¥å¿…è¦å¾—<strong>è¦è®©æ”¯ä»˜å®æœåŠ¡å™¨å¯ä»¥è®¿é—®æˆ‘ä»¬çš„æœ¬åœ°æœºå™¨ä¸­çš„tomcat</strong>ã€‚<strong>ä½†æ˜¯æˆ‘ä»¬çŸ¥é“ä¸¤ä¸ªä¸åŒå±€åŸŸç½‘ä¸‹çš„pcæ˜¯ä¸å¯ä»¥ç›´æ¥é€šè®¯çš„</strong>ï¼Œè¿™æ—¶å°±éœ€è¦å†…ç½‘ç©¿é€ï¼Œè®©æ”¯ä»˜å®æœåŠ¡å™¨å¯ä»¥è®¿é—®çš„åˆ°<br>    4. natappçš„ä½œç”¨æœ‰ç‚¹åƒæ˜¯æˆ‘ä»¬å·²æœ‰åŸŸåå’Œå¤–ç½‘ipä¹‹åè¿›è¡Œ<strong>åŸŸåè§£æ</strong><br>    5. è¿™å…¶ä¸­æœ€å¤§çš„ä¸åŒæ˜¯ï¼š<strong>ç”±äºå±€åŸŸç½‘natæ¨¡å¼</strong>ï¼Œæ‰€æœ‰å±€åŸŸç½‘ä¸‹æœºå™¨å…¬ç”¨ä¸€ä¸ªå¤–éƒ¨ipï¼Œä¸€ä¸ªipå¯¹åº”nä¸ªpcä¸»æœºï¼Œä½†æ˜¯é˜¿é‡ŒæœåŠ¡å™¨å´æ˜¯ä¸€ä¸ªipå¯¹åº”ä¸€ä¸ªpcä¸»æœºï¼Œæ‰€ä»¥èƒ½ç›´æ¥è§£æã€‚æ‰€ä»¥æˆ‘ä»¬<strong>å†…ç½‘ç©¿é€åˆå«åšnatç©¿é€</strong>ï¼Œç©¿é€è·¯ç”±å™¨çš„natå±‚ï¼Œä»å±€åŸŸç½‘ä¸­çš„ä¼—å¤šçš„pcä¸­æ‰¾åˆ°æ­£ç¡®çš„pc<br>    6. <a href="http://www.cnblogs.com/derrick/p/4052401.html?utm_source=tuicool&utm_medium=referral#undefined" target="_blank" rel="noopener">NATåŸºæœ¬åŸç†åŠåº”ç”¨ - commandow - åšå®¢å›­</a><br>    7. æˆ‘ç°åœ¨è¿˜å¼„ä¸æ‡‚æ•´ä¸ªå†…ç½‘ç©¿é€çš„åŸç†ï¼Œå°±åƒvpnä¸€æ ·ï¼Œä½†æ˜¯æœ€èµ·ç ç»™äº†æˆ‘ä»¥åæ£€æµ‹æˆ‘è®¡ç®—æœºç½‘ç»œçŸ¥è¯†çš„ä¸€ä¸ªæ–¹æ³•ã€‚<br>    8. ã€æ³¨æ„ã€‘:<strong>å†…ç½‘ç©¿é€è¿™ä¸ªåŠŸèƒ½å¹¶ä¸æ˜¯å¿…é¡»çš„</strong>ï¼Œå¦‚æœæˆ‘ä»¬å°†é¡¹ç›®å‘å¸ƒåœ¨ä¸€ä¸ªé˜¿é‡Œäº‘æœåŠ¡å™¨ä¸Šï¼Œè¿™å°±ä¸ç”¨çš„<br>    9. æˆ‘ä¹°çš„natapp.cn<br><img src="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/31AC3175-A118-450D-A6E3-62D04170FCF5.png" alt><br>    9. æ“ä½œæ¢—æ¦‚ï¼š<br><img src="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/FC89986C-E460-48FA-8145-C4E3811A3A0F.png" alt></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.chenzhiheng.cn/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E8%BF%9C%E7%A8%8Bdebug%EF%BC%8C%E8%BF%9C%E7%A8%8B%E9%83%A8%E7%BD%B2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é™ˆå¿—æ’çš„æŠ€æœ¯åšå®¢">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E8%BF%9C%E7%A8%8Bdebug%EF%BC%8C%E8%BF%9C%E7%A8%8B%E9%83%A8%E7%BD%B2/" class="post-title-link" itemprop="url">è¿œç¨‹debugï¼Œè¿œç¨‹éƒ¨ç½²</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-03-01 10:08:00" itemprop="dateCreated datePublished" datetime="2018-03-01T10:08:00+08:00">2018-03-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-03-12 20:06:08" itemprop="dateModified" datetime="2020-03-12T20:06:08+08:00">2020-03-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web%E5%BC%80%E5%8F%91-czh-java-%E6%AF%95%E8%AE%BE/" itemprop="url" rel="index">
                    <span itemprop="name">webå¼€å‘/czh_java/æ¯•è®¾</span>
                  </a>
                </span>
            </span>

          
            <span id="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E8%BF%9C%E7%A8%8Bdebug%EF%BC%8C%E8%BF%9C%E7%A8%8B%E9%83%A8%E7%BD%B2/" class="post-meta-item leancloud_visitors" data-flag-title="è¿œç¨‹debugï¼Œè¿œç¨‹éƒ¨ç½²" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>449</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>1 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2018å¹´3æœˆ1æ—¥ ä¸Šåˆ10:08</p>
<h2 id="è¿œç¨‹debug-ä¸éœ€è¦æœåŠ¡å™¨è´¦æˆ·ç™»å½•å¯†ç "><a href="#è¿œç¨‹debug-ä¸éœ€è¦æœåŠ¡å™¨è´¦æˆ·ç™»å½•å¯†ç " class="headerlink" title="è¿œç¨‹debug:ä¸éœ€è¦æœåŠ¡å™¨è´¦æˆ·ç™»å½•å¯†ç "></a>è¿œç¨‹debug:ä¸éœ€è¦æœåŠ¡å™¨è´¦æˆ·ç™»å½•å¯†ç </h2><ol>
<li>æ“ä½œæµç¨‹ï¼š<ol>
<li><strong>ä¿æŒè¿œç«¯ä»£ç ç‰ˆæœ¬å’Œæœ¬åœ°ä»£ç ä¿æŒä¸€è‡´</strong><ol>
<li><strong>è¿™ç‚¹å°±æ˜¯æœ€æœ€é‡è¦çš„</strong></li>
<li><a href="http://lydawen.iteye.com/blog/793349" target="_blank" rel="noopener">tomcat  å¼€æ”¾è¿œç¨‹è°ƒè¯•ç«¯å£ - éª‘è€è™æ”¾ç¾Š - ITeyeåšå®¢</a></li>
</ol>
</li>
<li>æ‰§è¡Œsudo vim ${tomcat}_bin_catalina.sh</li>
<li>æ·»åŠ å¦‚ä¸‹é…ç½®ï¼Œå…¶ä¸­çš„addressä¸ºè¿œç¨‹debugå¼€æ”¾çš„ç«¯å£<ol>
<li><code>CATALINA_OPTS=&quot;-server -Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=5005â€</code> </li>
<li>è®²è§£å‚æ•°ï¼š<a href="https://www.cnblogs.com/Lawson/p/6188370.html" target="_blank" rel="noopener">è¿œç¨‹debugè°ƒè¯•javaä»£ç  - Lawson - åšå®¢å›­</a></li>
</ol>
</li>
<li>æŠŠå¼€æ”¾è¿œç¨‹debugç«¯å£åŠ åˆ°é˜²ç«å¢™é…ç½®ä¸Šå»<ol>
<li><code>-A INPUT -p tcp -m tcp â€”dport 5005 -j ACCEPT</code></li>
</ol>
</li>
<li>åŠæ—¶å…³é—­å¼€æ”¾çš„dubugç«¯å£</li>
</ol>
</li>
</ol>
<h2 id="è¿œç¨‹éƒ¨ç½²ï¼šéœ€è¦æœåŠ¡å™¨è´¦æˆ·ç™»å½•å¯†ç "><a href="#è¿œç¨‹éƒ¨ç½²ï¼šéœ€è¦æœåŠ¡å™¨è´¦æˆ·ç™»å½•å¯†ç " class="headerlink" title="è¿œç¨‹éƒ¨ç½²ï¼šéœ€è¦æœåŠ¡å™¨è´¦æˆ·ç™»å½•å¯†ç "></a>è¿œç¨‹éƒ¨ç½²ï¼šéœ€è¦æœåŠ¡å™¨è´¦æˆ·ç™»å½•å¯†ç </h2><ol>
<li>å‚è€ƒæ–‡ç« :<a href="http://blog.csdn.net/tianjun2012/article/details/52795202" target="_blank" rel="noopener">ideaéƒ¨ç½²é¡¹ç›®åˆ°è¿œç¨‹tomcat - CSDNåšå®¢</a><ol>
<li><strong>è¿™é‡ŒéªŒè¯äº†é…ç½®ç™»å½•linuxçš„è´¦æˆ·ä¿¡æ¯</strong></li>
</ol>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.chenzhiheng.cn/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/idea%E9%85%8D%E7%BD%AE2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é™ˆå¿—æ’çš„æŠ€æœ¯åšå®¢">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/idea%E9%85%8D%E7%BD%AE2/" class="post-title-link" itemprop="url">ideaé…ç½®2</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-03-01 10:07:00" itemprop="dateCreated datePublished" datetime="2018-03-01T10:07:00+08:00">2018-03-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-03-12 20:06:08" itemprop="dateModified" datetime="2020-03-12T20:06:08+08:00">2020-03-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web%E5%BC%80%E5%8F%91-czh-java-%E6%AF%95%E8%AE%BE/" itemprop="url" rel="index">
                    <span itemprop="name">webå¼€å‘/czh_java/æ¯•è®¾</span>
                  </a>
                </span>
            </span>

          
            <span id="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/idea%E9%85%8D%E7%BD%AE2/" class="post-meta-item leancloud_visitors" data-flag-title="ideaé…ç½®2" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>639</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>1 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2018å¹´3æœˆ1æ—¥ ä¸Šåˆ10:07</p>
<h2 id="2018-3-27æ›´æ–°é‡è¦æ–‡ç« ï¼š"><a href="#2018-3-27æ›´æ–°é‡è¦æ–‡ç« ï¼š" class="headerlink" title="2018/3/27æ›´æ–°é‡è¦æ–‡ç« ï¼š"></a>2018/3/27æ›´æ–°é‡è¦æ–‡ç« ï¼š</h2><ol>
<li><a href="https://blog.csdn.net/u014401141/article/details/73526987" target="_blank" rel="noopener">ã€intellij ideaã€‘Project Structure è®²è§£ - CSDNåšå®¢</a><ol>
<li><a href="http://www.cnblogs.com/zadomn0920/p/6196962.html" target="_blank" rel="noopener">ã€intellij ideaã€‘Project Structure è®²è§£ - hellozay - åšå®¢å›­</a>è¿™ä¸ªæ˜¯åŸæ–‡</li>
</ol>
</li>
<li><a href="http://wiki.jikexueyuan.com/project/intellij-idea-tutorial/project-composition-introduce.html" target="_blank" rel="noopener">IntelliJ IDEA é¡¹ç›®ç›¸å…³çš„å‡ ä¸ªé‡è¦æ¦‚å¿µä»‹ç» - IntelliJ IDEA ä½¿ç”¨æ•™ç¨‹ - æå®¢å­¦é™¢Wiki</a></li>
<li><a href="https://www.jetbrains.com/help/idea/eclipse.html" target="_blank" rel="noopener">Migrating From Eclipse to IntelliJ IDEA - Help | IntelliJ IDEA</a></li>
<li><a href="https://blog.csdn.net/qq_35246620/article/details/61191375" target="_blank" rel="noopener">å²ä¸Šæœ€ç®€å•çš„ IntelliJ IDEA æ•™ç¨‹ - CSDNåšå®¢</a>è¿™ä¸ªé‡Œé¢æœ‰å„ç§æ–‡ç« </li>
</ol>
<h2 id="2018-4-2æ›´æ–°çš„æ–‡ç« "><a href="#2018-4-2æ›´æ–°çš„æ–‡ç« " class="headerlink" title="2018/4/2æ›´æ–°çš„æ–‡ç« "></a>2018/4/2æ›´æ–°çš„æ–‡ç« </h2><ol>
<li><a href="https://www.zhihu.com/question/22129866" target="_blank" rel="noopener">taråŒ…å’ŒjaråŒ…å’ŒwaråŒ…çš„åŒºåˆ«ï¼Ÿ - çŸ¥ä¹</a></li>
<li><a href="https://www.jianshu.com/p/2015ae08653f" target="_blank" rel="noopener">Intellij IDEA ä¿®æ”¹é¡¹ç›®åç§° - ç®€ä¹¦</a></li>
</ol>
<h2 id="ideaé…ç½®é¡¹ç›®ï¼šmoduleã€Facetsã€Artifacts"><a href="#ideaé…ç½®é¡¹ç›®ï¼šmoduleã€Facetsã€Artifacts" class="headerlink" title="ideaé…ç½®é¡¹ç›®ï¼šmoduleã€Facetsã€Artifacts"></a>ideaé…ç½®é¡¹ç›®ï¼šmoduleã€Facetsã€Artifacts</h2><ol>
<li>å‚è€ƒé“¾æ¥<ol>
<li><a href="http://blog.csdn.net/vencc__/article/details/52184326" target="_blank" rel="noopener">ideaæŠ¥é”™:åŠ è½½ä¸åˆ°artifactã€‚é…ç½®moduleå’Œartifact - CSDNåšå®¢</a></li>
<li><a href="https://www.cnblogs.com/poilk/p/6529347.html" target="_blank" rel="noopener">IDEAé‡Œé¢çš„facetså’Œartifactsçš„è®²è§£ - ç¥¥ç¦æœ‰æ¢¦æƒ³ - åšå®¢å›­</a></li>
</ol>
</li>
<li>æ€»ç»“ï¼š<ol>
<li>ä¸Šé¢çš„æ–‡ç« é…ç½®äº†ï¼šmodule+facet+artifactè¿™ä¸‰ä¸ªideaé¡¹ç›®é…ç½®</li>
<li><strong>ä¸ºä»€ä¹ˆè¦é…ç½®ï¼š</strong><ol>
<li>æ— è®ºé…ç½®moduleã€Facetsã€Artifactsè¿˜æ˜¯æ ‡è®°Content Rootï¼Œéƒ½æ˜¯Intellij IDEAè¦æ±‚æˆ‘ä»¬è¿™æ ·åšçš„ï¼Œ<strong>ä»¥ä¾¿å…¶èƒ½è¯†åˆ«è¿™äº›æ–‡ä»¶å¹¶æ•´åˆå„æ’ä»¶å®ç°åŠŸèƒ½</strong>ã€‚</li>
<li>æˆ‘çš„çš„é¡¹ç›®ç»“æ„ï¼Œåå­—ï¼Œç”¨é€”å¯èƒ½å„ä¸ç›¸åŒï¼Œè¿™å°±å¾—è®©ideaçŸ¥é“å½“å‰è¿™ä¸ªåˆ°åº•æ˜¯ä»€ä¹ˆä¸ªæƒ…å†µã€‚</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 id="ideaä¸­è¿è¡Œeclipseå¼€å‘çš„é¡¹ç›®"><a href="#ideaä¸­è¿è¡Œeclipseå¼€å‘çš„é¡¹ç›®" class="headerlink" title="ideaä¸­è¿è¡Œeclipseå¼€å‘çš„é¡¹ç›®"></a>ideaä¸­è¿è¡Œeclipseå¼€å‘çš„é¡¹ç›®</h2><ol>
<li>ç¬¬ä¸€æ­¥ï¼š<br><img src="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/idea%E9%85%8D%E7%BD%AE2/20923ED7-1F49-4E84-9FCF-913A52926B11.png" alt></li>
<li>ç¬¬äºŒæ­¥ï¼š<br><img src="/2018/03/01/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/idea%E9%85%8D%E7%BD%AE2/F41E7C1F-2164-4461-A3BF-93FCE42F3FF4.png" alt></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.chenzhiheng.cn/2018/02/27/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%A8%A1%E5%9D%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é™ˆå¿—æ’çš„æŠ€æœ¯åšå®¢">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/27/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%A8%A1%E5%9D%97/" class="post-title-link" itemprop="url">æ”¯ä»˜å®æ¨¡å—</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-02-27 09:40:00" itemprop="dateCreated datePublished" datetime="2018-02-27T09:40:00+08:00">2018-02-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-03-12 20:06:08" itemprop="dateModified" datetime="2020-03-12T20:06:08+08:00">2020-03-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web%E5%BC%80%E5%8F%91-czh-java-%E6%AF%95%E8%AE%BE/" itemprop="url" rel="index">
                    <span itemprop="name">webå¼€å‘/czh_java/æ¯•è®¾</span>
                  </a>
                </span>
            </span>

          
            <span id="/2018/02/27/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%A8%A1%E5%9D%97/" class="post-meta-item leancloud_visitors" data-flag-title="æ”¯ä»˜å®æ¨¡å—" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>12k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>10 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2018å¹´2æœˆ27æ—¥ ä¸‹åˆ9:40</p>
<h2 id="ç›¸å…³å†…å®¹ï¼š"><a href="#ç›¸å…³å†…å®¹ï¼š" class="headerlink" title="ç›¸å…³å†…å®¹ï¼š"></a>ç›¸å…³å†…å®¹ï¼š</h2><ol>
<li><a href="bear://x-callback-url/open-note?id=5E6BC7FA-67A4-405F-A43B-63CDA2BBE35F-31449-0001C0AC0D4A55EC">å†…ç½‘ç©¿é€</a></li>
<li><a href="bear://x-callback-url/open-note?id=22F8792E-13F7-4220-8401-0F2655C99D58-31449-0001C0A3FA18A347">è¿œç¨‹debugï¼Œè¿œç¨‹éƒ¨ç½²</a></li>
<li><a href="bear://x-callback-url/open-note?id=292651B9-6995-493A-9AB7-C2E531CA6565-31449-0001C096BE9F5C44">ideaé…ç½®2</a></li>
</ol>
<h2 id="å­¦ä¹ çš„çŸ¥è¯†ç‚¹"><a href="#å­¦ä¹ çš„çŸ¥è¯†ç‚¹" class="headerlink" title="å­¦ä¹ çš„çŸ¥è¯†ç‚¹"></a>å­¦ä¹ çš„çŸ¥è¯†ç‚¹</h2><p>ç†Ÿæ‚‰æ”¯ä»˜å®å¯¹æ¥çš„æ ¸å¿ƒæ–‡æ¡£ï¼Œè°ƒé€šæ”¯ä»˜å®æ”¯ä»˜åŠŸèƒ½çš„å®˜æ–¹Demo<br>è§£ææ”¯ä»˜å®SDKå¯¹æ¥æºç <br>RSA1å’ŒRSA2éªŒè¯ç­¾ååŠåŠ è§£å¯†<br>é¿å…æ”¯ä»˜å®é‡å¤é€šçŸ¥å’Œæ•°æ®æ ¡éªŒ<br>natappå¤–ç½‘ç©¿é€å’Œtomcat remote debug<br>ç”ŸæˆäºŒç»´ç ï¼Œå¹¶æŒä¹…åŒ–åˆ°å›¾ç‰‡æœåŠ¡å™¨</p>
<h2 id="ä¸€äº›é‡è¦çš„å®˜æ–¹æ–‡æ¡£"><a href="#ä¸€äº›é‡è¦çš„å®˜æ–¹æ–‡æ¡£" class="headerlink" title="ä¸€äº›é‡è¦çš„å®˜æ–¹æ–‡æ¡£"></a>ä¸€äº›é‡è¦çš„å®˜æ–¹æ–‡æ¡£</h2><p>æ€»æ–‡æ¡£ï¼š<a href="http://learning.happymmall.com/alipaydoc.html" target="_blank" rel="noopener">http://learning.happymmall.com/alipaydoc.html</a></p>
<hr>
<p>æ²™ç®±ç™»å½•ï¼š<a href="https://openhome.alipay.com/platform/appDaily.htm" target="_blank" rel="noopener">https://openhome.alipay.com/platform/appDaily.htm</a><br>æ²™ç®±ç¯å¢ƒä½¿ç”¨è¯´æ˜ï¼š<a href="https://doc.open.alipay.com/doc2/detail.htm?treeId=200&amp;articleId=105311&amp;docType=1" target="_blank" rel="noopener">https://doc.open.alipay.com/doc2/detail.htm?treeId=200&amp;articleId=105311&amp;docType=1</a><br>å¦‚ä½•ä½¿ç”¨æ²™ç®±ç¯å¢ƒï¼š<a href="https://support.open.alipay.com/support/hotProblemDetail.htm?spm=a219a.7386793.0.0.uS5uZ6&amp;id=251932&amp;tagId=100248" target="_blank" rel="noopener">https://support.open.alipay.com/support/hotProblemDetail.htm?spm=a219a.7386793.0.0.uS5uZ6&amp;id=251932&amp;tagId=100248</a><br>å½“é¢ä»˜äº§å“ä»‹ç»ï¼š<a href="https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.hV5Clx&amp;treeId=193&amp;articleId=105072&amp;docType=1" target="_blank" rel="noopener">https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.hV5Clx&amp;treeId=193&amp;articleId=105072&amp;docType=1</a><br>æ‰«ç æ”¯ä»˜æ¥å…¥æŒ‡å¼•ï¼š<a href="https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.Ia6Wqy&amp;treeId=193&amp;articleId=106078&amp;docType=1" target="_blank" rel="noopener">https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.Ia6Wqy&amp;treeId=193&amp;articleId=106078&amp;docType=1</a><br>å½“é¢ä»˜å¿«é€Ÿæ¥å…¥ï¼š<a href="https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.bROnXf&amp;treeId=193&amp;articleId=105170&amp;docType=1" target="_blank" rel="noopener">https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.bROnXf&amp;treeId=193&amp;articleId=105170&amp;docType=1</a><br>å½“é¢ä»˜æ¥å…¥å¿…è¯»ï¼š<a href="https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.hV5Clx&amp;treeId=193&amp;articleId=105322&amp;docType=1" target="_blank" rel="noopener">https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.hV5Clx&amp;treeId=193&amp;articleId=105322&amp;docType=1</a><br>å½“é¢ä»˜è¿›é˜¶åŠŸèƒ½ï¼š<a href="https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.YFmkxI&amp;treeId=193&amp;articleId=105190&amp;docType=1" target="_blank" rel="noopener">https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.YFmkxI&amp;treeId=193&amp;articleId=105190&amp;docType=1</a><br>å½“é¢ä»˜å¼‚æ­¥é€šçŸ¥-ä»…ç”¨äºæ‰«ç æ”¯ä»˜ï¼š<a href="https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.BykVSR&amp;treeId=193&amp;articleId=103296&amp;docType=1" target="_blank" rel="noopener">https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.BykVSR&amp;treeId=193&amp;articleId=103296&amp;docType=1</a><br>å½“é¢ä»˜SDK&amp;DEMOï¼š<a href="https://support.open.alipay.com/docs/doc.htm?spm=a219a.7386797.0.0.k0rwWc&amp;treeId=193&amp;articleId=105201&amp;docType=1" target="_blank" rel="noopener">https://support.open.alipay.com/docs/doc.htm?spm=a219a.7386797.0.0.k0rwWc&amp;treeId=193&amp;articleId=105201&amp;docType=1</a><br>æœåŠ¡ç«¯SDKï¼š<a href="https://doc.open.alipay.com/doc2/detail?treeId=54&amp;articleId=103419&amp;docType=1" target="_blank" rel="noopener">https://doc.open.alipay.com/doc2/detail?treeId=54&amp;articleId=103419&amp;docType=1</a><br>ç”ŸæˆRSAå¯†é’¥ï¼š<a href="https://doc.open.alipay.com/docs/doc.htm?treeId=291&amp;articleId=105971&amp;docType=1" target="_blank" rel="noopener">https://doc.open.alipay.com/docs/doc.htm?treeId=291&amp;articleId=105971&amp;docType=1</a><br>çº¿ä¸Šåˆ›å»ºåº”ç”¨è¯´æ˜ï¼š<a href="https://doc.open.alipay.com/doc2/detail.htm?treeId=200&amp;articleId=105310&amp;docType=1#s0" target="_blank" rel="noopener">https://doc.open.alipay.com/doc2/detail.htm?treeId=200&amp;articleId=105310&amp;docType=1#s0</a> </p>
<hr>
<h2 id="æ”¯ä»˜å®æ‰«ç é‡è¦ç»†èŠ‚"><a href="#æ”¯ä»˜å®æ‰«ç é‡è¦ç»†èŠ‚" class="headerlink" title="æ”¯ä»˜å®æ‰«ç é‡è¦ç»†èŠ‚"></a>æ”¯ä»˜å®æ‰«ç é‡è¦ç»†èŠ‚</h2><ol>
<li>ä¸»åŠ¨è½®è®­å’Œå›è°ƒçš„åŒºåˆ«</li>
<li>é¿å…å•è¾¹è´¦</li>
<li>åŒæ­¥è¯·æ±‚çš„åŠ ç­¾å’ŒéªŒè¯ç­¾å</li>
<li>å›è°ƒçš„éªŒè¯</li>
<li>è¿‡è™‘é‡å¤é€šçŸ¥</li>
<li>ä¸€å®šå¥½éªŒè¯å¹¶ä¿è¯æ¥å—çš„å¼‚æ­¥é€šçŸ¥æ˜¯æ”¯ä»˜å®å‘å‡ºçš„</li>
<li>å›è°ƒè¯·æ±‚çš„æ”¾å›</li>
</ol>
<h2 id="æ”¯ä»˜å®ä¾èµ–çš„jaråŒ…ï¼š"><a href="#æ”¯ä»˜å®ä¾èµ–çš„jaråŒ…ï¼š" class="headerlink" title="æ”¯ä»˜å®ä¾èµ–çš„jaråŒ…ï¼š"></a>æ”¯ä»˜å®ä¾èµ–çš„jaråŒ…ï¼š</h2><ol>
<li>ç¬¬ä¸€éƒ¨åˆ†ï¼šå¦åˆ™ä¼šæŠ¥çº¢çº¿é”™è¯¯âŒ<ol>
<li>ä½ç½®ï¼šwebapp_WEB-INF_lib<br><img src="/2018/02/27/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%A8%A1%E5%9D%97/B7CE7FFD-73DE-475A-828E-C0EAD38982A1.png" alt></li>
<li>æ·»åŠ æ–¹å¼ï¼š<br><img src="/2018/02/27/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%A8%A1%E5%9D%97/32C55DE3-99D5-442A-B245-93B505838052.png" alt></li>
<li>æœ€é‡è¦çš„ï¼š<strong>å¦‚ä½•å°†ä¸€ä¸ªæœ¬åœ°jarå‘å¸ƒåˆ°æœåŠ¡å™¨ä¸Šï¼ï¼ï¼</strong><ol>
<li>POM.xmlçš„è¿™ä¸ªé…ç½®<strong>ç›®çš„</strong>ï¼šæ˜¯è®©é¡¹ç›®å‘å¸ƒçš„æ—¶å€™èƒ½å¤Ÿæ·»åŠ ä¸Šalipayçš„jaråŒ…ï¼Œå¦åˆ™ä¼šå‡ºç°class not foundçš„é—®é¢˜</li>
<li><strong>å…³äºæ‰“åŒ…å‘å¸ƒçš„ç†è§£çœ‹è¿™ç¯‡æ–‡ç« </strong>ï¼Œå¾ˆå¥½@<a href="http://blog.csdn.net/dorytmx/article/details/72770712" target="_blank" rel="noopener">ä½¿ç”¨tomcatå‘å¸ƒè‡ªå·±çš„Javaé¡¹ç›® - CSDNåšå®¢</a><br><img src="/2018/02/27/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%A8%A1%E5%9D%97/75724C90-1495-44FB-95F0-054DFB5728B5.png" alt></li>
</ol>
</li>
<li>ä¸ºå•¥è¦èµ·libä¸ºæ–‡ä»¶å¤¹çš„åå­—<ol>
<li>ä¸é¡¹ç›®å‘å¸ƒåjaråŒ…æ‰€åœ¨çš„æ–‡ä»¶å¤¹åç›¸åŒï¼Œä»…æ­¤è€Œå·²ï¼Œèˆ’æœ<br><img src="/2018/02/27/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%A8%A1%E5%9D%97/692068BE-9997-407D-B7D0-6DC6F0AD0D13.png" alt></li>
</ol>
</li>
</ol>
</li>
<li>ç¬¬äºŒéƒ¨åˆ†ï¼š<ol>
<li>äº¤ç»™mavené…ç½®ï¼Œè‡ªåŠ¨æ·»åŠ </li>
<li>æ‰€åœ¨çš„ä½ç½®POM.xml</li>
<li>æ³¨æ„ï¼šè¿™ä¸ªä¸€å®šè¦ä½¿ç”¨é…å¥—çš„ç‰ˆæœ¬ï¼Œè¿™äº›jaråŒ…æ˜¯å’Œalipayçš„jaråŒ…ç›¸é…åˆä½¿ç”¨çš„<br><img src="/2018/02/27/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%A8%A1%E5%9D%97/448E936F-B843-42CC-BDD0-6BF77F00A4C9.png" alt></li>
</ol>
</li>
</ol>
<h2 id="å…·ä½“ä»£ç åŠŸèƒ½è¯¦è§£ï¼š"><a href="#å…·ä½“ä»£ç åŠŸèƒ½è¯¦è§£ï¼š" class="headerlink" title="å…·ä½“ä»£ç åŠŸèƒ½è¯¦è§£ï¼š"></a>å…·ä½“ä»£ç åŠŸèƒ½è¯¦è§£ï¼š</h2><h3 id="ä¸€å…±æœ‰ä¸‰ä¸ªå¯¹å¤–æ¥å£ï¼š"><a href="#ä¸€å…±æœ‰ä¸‰ä¸ªå¯¹å¤–æ¥å£ï¼š" class="headerlink" title="ä¸€å…±æœ‰ä¸‰ä¸ªå¯¹å¤–æ¥å£ï¼š"></a>ä¸€å…±æœ‰ä¸‰ä¸ªå¯¹å¤–æ¥å£ï¼š</h3><ol>
<li>payæ¥å£ï¼šè¿”å›è®¢å•å·å’ŒftpæœåŠ¡å™¨ä¸­çš„äºŒç»´ç è·¯å¾„</li>
<li>alipayCallbackï¼šæ’å…¥payinfoä¿¡æ¯ï¼Œä½¿alipayä¸å†å›è°ƒ</li>
<li>queryOrderPayStatusï¼šåˆ¤æ–­è®¢å•çŠ¶æ€</li>
</ol>
<h3 id="å…·ä½“çš„çœ‹ä»£ç ï¼Œæ³¨é‡Šæˆ‘å†™çš„å¾ˆè¯¦ç»†"><a href="#å…·ä½“çš„çœ‹ä»£ç ï¼Œæ³¨é‡Šæˆ‘å†™çš„å¾ˆè¯¦ç»†" class="headerlink" title="å…·ä½“çš„çœ‹ä»£ç ï¼Œæ³¨é‡Šæˆ‘å†™çš„å¾ˆè¯¦ç»†"></a><em>å…·ä½“çš„çœ‹ä»£ç ï¼Œæ³¨é‡Šæˆ‘å†™çš„å¾ˆè¯¦ç»†</em></h3><ol>
<li>OrderController.java</li>
<li>OrderServiceImpl.java<br>OrderController.java<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"pay.do"</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="comment">//sessionï¼šåˆ¤æ–­ç”¨æˆ·ç±»å‹ orderNoï¼šè®¢å•å· requestï¼šè·å–æ–‡ä»¶å¤¹è·¯å¾„</span></span><br><span class="line"><span class="comment">//æœ€åçš„è¿”å›ï¼šå¾—åˆ°ä¸€ä¸ªresponseServiceï¼Œå…¶ä¸­çš„dataç±»å‹æ˜¯Map&lt;String ,String&gt; resultMap å…¶ä¸­ä¿å­˜è¿™è®¢å•å·å’ŒftpæœåŠ¡å™¨ä¸­çš„äºŒç»´ç è·¯å¾„</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ServerResponse <span class="title">pay</span><span class="params">(HttpSession session, Long orderNo, HttpServletRequest request)</span></span>&#123;</span><br><span class="line">    User user = (User)session.getAttribute(Const.CURRENT_USER);</span><br><span class="line">    <span class="keyword">if</span>(user ==<span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> ServerResponse.createByErrorCodeMessage(ResponseCode.NEED_LOGIN.getCode(),ResponseCode.NEED_LOGIN.getDesc());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è·å–æ–‡ä»¶å¤¹çš„ä¸Šä¼ è·¯å¾„ã€‚è¡¨ç¤ºè·å¾—æœåŠ¡å™¨çš„ç»å¯¹è·¯å¾„çš„æ„æ€ã€‚ä½†æ˜¯æœ€ç»ˆæˆ‘ä»¬è¦ä»æœåŠ¡å™¨ä¸Šä¼ åˆ°FTPä¸­å» blog.csdn.net/inite/article/details/75577970</span></span><br><span class="line">    String path = request.getSession().getServletContext().getRealPath(<span class="string">"upload"</span>);</span><br><span class="line">    <span class="keyword">return</span> iOrderService.pay(orderNo,user.getId(),path);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"alipay_callback.do"</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">è¿™ä¸ªæ˜¯alipayæœåŠ¡å™¨è°ƒç”¨çš„å›è°ƒæ¥å£ï¼Œä¸æ˜¯æˆ‘ä»¬è‡ªå·±è°ƒç”¨çš„</span></span><br><span class="line"><span class="comment">1.è®©æˆ‘ä»¬åœ¨payinfoæ•°æ®è¡¨ä¸­å­˜å…¥ä»˜æ¬¾ä¿¡æ¯</span></span><br><span class="line"><span class="comment">2.alipayæœåŠ¡å™¨æ ¹æ®è¿”å›çš„ç»“æœï¼Œåˆ¤æ–­è¿˜ç”¨ä¸ç”¨æ¥ç€å›è°ƒäº†</span></span><br><span class="line"><span class="comment">requestæ¥å–å¾—alipayçš„å›è°ƒè¿‡ç¨‹ä¸­ä¼ ç»™æˆ‘ä»¬çš„å‚æ•°</span></span><br><span class="line"><span class="comment">æ•´ä¸ªè¿‡ç¨‹å‚è€ƒï¼šhttps://docs.open.alipay.com/194/103296</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">alipayCallback</span><span class="params">(HttpServletRequest request)</span></span>&#123;</span><br><span class="line">    Map&lt;String,String&gt; params = Maps.newHashMap();</span><br><span class="line"></span><br><span class="line">    Map requestParams = request.getParameterMap();</span><br><span class="line">    <span class="keyword">for</span>(Iterator iter = requestParams.keySet().iterator();iter.hasNext();)&#123;</span><br><span class="line">        String name = (String)iter.next();</span><br><span class="line">        String[] values = (String[]) requestParams.get(name);</span><br><span class="line">        String valueStr = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt;values.length;i++)&#123;</span><br><span class="line"></span><br><span class="line">            valueStr = (i == values.length -<span class="number">1</span>)?valueStr + values[i]:valueStr + values[i]+<span class="string">","</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        params.put(name,valueStr);</span><br><span class="line">    &#125;</span><br><span class="line">    logger.info(<span class="string">"æ”¯ä»˜å®å›è°ƒ,sign:&#123;&#125;,trade_status:&#123;&#125;,å‚æ•°:&#123;&#125;"</span>,params.get(<span class="string">"sign"</span>),params.get(<span class="string">"trade_status"</span>),params.toString());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//éå¸¸é‡è¦,éªŒè¯å›è°ƒçš„æ­£ç¡®æ€§,æ˜¯ä¸æ˜¯æ”¯ä»˜å®å‘çš„.å¹¶ä¸”å‘¢è¿˜è¦é¿å…é‡å¤é€šçŸ¥.</span></span><br><span class="line"></span><br><span class="line">    params.remove(<span class="string">"sign_type"</span>);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">boolean</span> alipayRSACheckedV2 = AlipaySignature.rsaCheckV2(params, Configs.getAlipayPublicKey(),<span class="string">"utf-8"</span>,Configs.getSignType());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(!alipayRSACheckedV2)&#123;</span><br><span class="line">            <span class="keyword">return</span> ServerResponse.createByErrorMessage(<span class="string">"éæ³•è¯·æ±‚,éªŒè¯ä¸é€šè¿‡,å†æ¶æ„è¯·æ±‚æˆ‘å°±æŠ¥è­¦æ‰¾ç½‘è­¦äº†"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (AlipayApiException e) &#123;</span><br><span class="line">        logger.error(<span class="string">"æ”¯ä»˜å®éªŒè¯å›è°ƒå¼‚å¸¸"</span>,e);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//todo éªŒè¯å„ç§æ•°æ®</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//åœ¨è¿™ä¸ªå‡½æ•°ä¸­å¤„ç†äº†ï¼šè¿‡è™‘é‡å¤é€šçŸ¥ ç„¶åå°†payinfoæ•°æ®è¡¨éœ€è¦çš„æ•°æ®ä¿å­˜åœ¨payinfoä¸­ï¼Œæ’å…¥åˆ°æ•°æ®åº“ä¸­</span></span><br><span class="line">    ServerResponse serverResponse = iOrderService.aliCallback(params);</span><br><span class="line">    <span class="keyword">if</span>(serverResponse.isSuccess())&#123;</span><br><span class="line">        <span class="keyword">return</span> Const.AlipayCallback.RESPONSE_SUCCESS;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Const.AlipayCallback.RESPONSE_FAILED;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥è¯¢è®¢å•çŠ¶æ€</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"query_order_pay_status.do"</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ServerResponse&lt;Boolean&gt; <span class="title">queryOrderPayStatus</span><span class="params">(HttpSession session, Long orderNo)</span></span>&#123;</span><br><span class="line">    User user = (User)session.getAttribute(Const.CURRENT_USER);</span><br><span class="line">    <span class="keyword">if</span>(user ==<span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> ServerResponse.createByErrorCodeMessage(ResponseCode.NEED_LOGIN.getCode(),ResponseCode.NEED_LOGIN.getDesc());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ServerResponse serverResponse = iOrderService.queryOrderPayStatus(user.getId(),orderNo);</span><br><span class="line">    <span class="keyword">if</span>(serverResponse.isSuccess())&#123;</span><br><span class="line">        <span class="keyword">return</span> ServerResponse.createBySuccess(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ServerResponse.createBySuccess(<span class="keyword">false</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>OrderServiceImpl.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//è¾“å…¥ï¼šorderNoè®¢å•å· userIdä»sessionä¸­è·å–çš„ç”¨æˆ·id pathäºŒç»´ç çš„ä¸Šä¼ è·¯å¾„æ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="comment">//è¾“å‡ºï¼šå¾—åˆ°ä¸€ä¸ªresponseServiceï¼Œå…¶ä¸­çš„dataç±»å‹æ˜¯Map&lt;String ,String&gt; resultMap å…¶ä¸­ä¿å­˜è¿™è®¢å•å·å’ŒftpæœåŠ¡å™¨ä¸­çš„äºŒç»´ç è·¯å¾„</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ServerResponse <span class="title">pay</span><span class="params">(Long orderNo,Integer userId,String path)</span></span>&#123;</span><br><span class="line">    <span class="comment">//responseServiceä¸­çš„data</span></span><br><span class="line">    Map&lt;String ,String&gt; resultMap = Maps.newHashMap();</span><br><span class="line">    <span class="comment">//éªŒè¯orderNoå¹¶æ”¾å…¥resultMapä¸­</span></span><br><span class="line">    Order order = orderMapper.selectByUserIdAndOrderNo(userId,orderNo);</span><br><span class="line">    <span class="keyword">if</span>(order == <span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> ServerResponse.createByErrorMessage(<span class="string">"ç”¨æˆ·æ²¡æœ‰è¯¥è®¢å•"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    resultMap.put(<span class="string">"orderNo"</span>,String.valueOf(order.getOrderNo()));</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        ä¸‹é¢è¿™æ®µæ˜¯ä»alipayçš„demoä¸­æ‘˜æŠ„çš„å†…å®¹ï¼š</span></span><br><span class="line"><span class="comment">        æˆ‘ä»¬åšäº†ä»¥ä¸‹å·¥ä½œï¼š</span></span><br><span class="line"><span class="comment">        1.æ‹¼å‡‘è¯·æ±‚alipayæœåŠ¡å™¨çš„å„ç§å‚æ•°</span></span><br><span class="line"><span class="comment">        2.åˆ›å»ºæ‰«ç æ”¯ä»˜è¯·æ±‚builderï¼Œè®¾ç½®è¯·æ±‚å‚æ•°</span></span><br><span class="line"><span class="comment">        3.å¯¹alipayè¿›è¡Œè®¿é—®ï¼Œç„¶åå–å¾—è¿”å›ç»“æœ</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// (å¿…å¡«) å•†æˆ·ç½‘ç«™è®¢å•ç³»ç»Ÿä¸­å”¯ä¸€è®¢å•å·ï¼Œ64ä¸ªå­—ç¬¦ä»¥å†…ï¼Œåªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ï¼Œ</span></span><br><span class="line">    <span class="comment">// éœ€ä¿è¯å•†æˆ·ç³»ç»Ÿç«¯ä¸èƒ½é‡å¤ï¼Œå»ºè®®é€šè¿‡æ•°æ®åº“sequenceç”Ÿæˆï¼Œ</span></span><br><span class="line">    String outTradeNo = order.getOrderNo().toString();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// (å¿…å¡«) è®¢å•æ ‡é¢˜ï¼Œç²—ç•¥æè¿°ç”¨æˆ·çš„æ”¯ä»˜ç›®çš„ã€‚å¦‚â€œxxxå“ç‰Œxxxé—¨åº—å½“é¢ä»˜æ‰«ç æ¶ˆè´¹â€</span></span><br><span class="line">    String subject = <span class="keyword">new</span> StringBuilder().append(<span class="string">"happymmallæ‰«ç æ”¯ä»˜,è®¢å•å·:"</span>).append(outTradeNo).toString();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// (å¿…å¡«) è®¢å•æ€»é‡‘é¢ï¼Œå•ä½ä¸ºå…ƒï¼Œä¸èƒ½è¶…è¿‡1äº¿å…ƒ</span></span><br><span class="line">    <span class="comment">// å¦‚æœåŒæ—¶ä¼ å…¥äº†ã€æ‰“æŠ˜é‡‘é¢ã€‘,ã€ä¸å¯æ‰“æŠ˜é‡‘é¢ã€‘,ã€è®¢å•æ€»é‡‘é¢ã€‘ä¸‰è€…,åˆ™å¿…é¡»æ»¡è¶³å¦‚ä¸‹æ¡ä»¶:ã€è®¢å•æ€»é‡‘é¢ã€‘=ã€æ‰“æŠ˜é‡‘é¢ã€‘+ã€ä¸å¯æ‰“æŠ˜é‡‘é¢ã€‘</span></span><br><span class="line">    String totalAmount = order.getPayment().toString();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// (å¯é€‰) è®¢å•ä¸å¯æ‰“æŠ˜é‡‘é¢ï¼Œå¯ä»¥é…åˆå•†å®¶å¹³å°é…ç½®æŠ˜æ‰£æ´»åŠ¨ï¼Œå¦‚æœé…’æ°´ä¸å‚ä¸æ‰“æŠ˜ï¼Œåˆ™å°†å¯¹åº”é‡‘é¢å¡«å†™è‡³æ­¤å­—æ®µ</span></span><br><span class="line">    <span class="comment">// å¦‚æœè¯¥å€¼æœªä¼ å…¥,ä½†ä¼ å…¥äº†ã€è®¢å•æ€»é‡‘é¢ã€‘,ã€æ‰“æŠ˜é‡‘é¢ã€‘,åˆ™è¯¥å€¼é»˜è®¤ä¸ºã€è®¢å•æ€»é‡‘é¢ã€‘-ã€æ‰“æŠ˜é‡‘é¢ã€‘</span></span><br><span class="line">    String undiscountableAmount = <span class="string">"0"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å–å®¶æ”¯ä»˜å®è´¦å·IDï¼Œç”¨äºæ”¯æŒä¸€ä¸ªç­¾çº¦è´¦å·ä¸‹æ”¯æŒæ‰“æ¬¾åˆ°ä¸åŒçš„æ”¶æ¬¾è´¦å·ï¼Œ(æ‰“æ¬¾åˆ°sellerIdå¯¹åº”çš„æ”¯ä»˜å®è´¦å·)</span></span><br><span class="line">    <span class="comment">// å¦‚æœè¯¥å­—æ®µä¸ºç©ºï¼Œåˆ™é»˜è®¤ä¸ºä¸æ”¯ä»˜å®ç­¾çº¦çš„å•†æˆ·çš„PIDï¼Œä¹Ÿå°±æ˜¯appidå¯¹åº”çš„PID</span></span><br><span class="line">    String sellerId = <span class="string">""</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¢å•æè¿°ï¼Œå¯ä»¥å¯¹äº¤æ˜“æˆ–å•†å“è¿›è¡Œä¸€ä¸ªè¯¦ç»†åœ°æè¿°ï¼Œæ¯”å¦‚å¡«å†™"è´­ä¹°å•†å“2ä»¶å…±15.00å…ƒ"</span></span><br><span class="line">    String body = <span class="keyword">new</span> StringBuilder().append(<span class="string">"è®¢å•"</span>).append(outTradeNo).append(<span class="string">"è´­ä¹°å•†å“å…±"</span>).append(totalAmount).append(<span class="string">"å…ƒ"</span>).toString();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å•†æˆ·æ“ä½œå‘˜ç¼–å·ï¼Œæ·»åŠ æ­¤å‚æ•°å¯ä»¥ä¸ºå•†æˆ·æ“ä½œå‘˜åšé”€å”®ç»Ÿè®¡</span></span><br><span class="line">    String operatorId = <span class="string">"test_operator_id"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// (å¿…å¡«) å•†æˆ·é—¨åº—ç¼–å·ï¼Œé€šè¿‡é—¨åº—å·å’Œå•†å®¶åå°å¯ä»¥é…ç½®ç²¾å‡†åˆ°é—¨åº—çš„æŠ˜æ‰£ä¿¡æ¯ï¼Œè¯¦è¯¢æ”¯ä»˜å®æŠ€æœ¯æ”¯æŒ</span></span><br><span class="line">    String storeId = <span class="string">"test_store_id"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸šåŠ¡æ‰©å±•å‚æ•°ï¼Œç›®å‰å¯æ·»åŠ ç”±æ”¯ä»˜å®åˆ†é…çš„ç³»ç»Ÿå•†ç¼–å·(é€šè¿‡setSysServiceProviderIdæ–¹æ³•)ï¼Œè¯¦æƒ…è¯·å’¨è¯¢æ”¯ä»˜å®æŠ€æœ¯æ”¯æŒ</span></span><br><span class="line">    ExtendParams extendParams = <span class="keyword">new</span> ExtendParams();</span><br><span class="line">    extendParams.setSysServiceProviderId(<span class="string">"2088100200300400500"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ”¯ä»˜è¶…æ—¶ï¼Œå®šä¹‰ä¸º120åˆ†é’Ÿ</span></span><br><span class="line">    String timeoutExpress = <span class="string">"120m"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å•†å“æ˜ç»†åˆ—è¡¨ï¼Œéœ€å¡«å†™è´­ä¹°å•†å“è¯¦ç»†ä¿¡æ¯ï¼Œ</span></span><br><span class="line">    List&lt;GoodsDetail&gt; goodsDetailList = <span class="keyword">new</span> ArrayList&lt;GoodsDetail&gt;();</span><br><span class="line"></span><br><span class="line">    List&lt;OrderItem&gt; orderItemList = orderItemMapper.getByOrderNoUserId(orderNo,userId);</span><br><span class="line">    <span class="keyword">for</span>(OrderItem orderItem : orderItemList)&#123;</span><br><span class="line">        GoodsDetail goods = GoodsDetail.newInstance(orderItem.getProductId().toString(), orderItem.getProductName(),</span><br><span class="line">                BigDecimalUtil.mul(orderItem.getCurrentUnitPrice().doubleValue(),<span class="keyword">new</span> Double(<span class="number">100</span>).doubleValue()).longValue(),</span><br><span class="line">                orderItem.getQuantity());</span><br><span class="line">        goodsDetailList.add(goods);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºæ‰«ç æ”¯ä»˜è¯·æ±‚builderï¼Œè®¾ç½®è¯·æ±‚å‚æ•°</span></span><br><span class="line">    AlipayTradePrecreateRequestBuilder builder = <span class="keyword">new</span> AlipayTradePrecreateRequestBuilder()</span><br><span class="line">            .setSubject(subject).setTotalAmount(totalAmount).setOutTradeNo(outTradeNo)</span><br><span class="line">            .setUndiscountableAmount(undiscountableAmount).setSellerId(sellerId).setBody(body)</span><br><span class="line">            .setOperatorId(operatorId).setStoreId(storeId).setExtendParams(extendParams)</span><br><span class="line">            .setTimeoutExpress(timeoutExpress)</span><br><span class="line">            .setNotifyUrl(PropertiesUtil.getProperty(<span class="string">"alipay.callback.url"</span>))<span class="comment">//æ”¯ä»˜å®æœåŠ¡å™¨ä¸»åŠ¨é€šçŸ¥å•†æˆ·æœåŠ¡å™¨é‡ŒæŒ‡å®šçš„é¡µé¢httpè·¯å¾„,æ ¹æ®éœ€è¦è®¾ç½®</span></span><br><span class="line">            .setGoodsDetailList(goodsDetailList);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¯¹alipayè¿›è¡Œè®¿é—®ï¼Œç„¶åå–å¾—è¿”å›ç»“æœ</span></span><br><span class="line">    AlipayF2FPrecreateResult result = tradeService.tradePrecreate(builder);</span><br><span class="line">    <span class="keyword">switch</span> (result.getTradeStatus()) &#123;</span><br><span class="line">        <span class="keyword">case</span> SUCCESS:</span><br><span class="line">            logger.info(<span class="string">"æ”¯ä»˜å®é¢„ä¸‹å•æˆåŠŸ: )"</span>);</span><br><span class="line"></span><br><span class="line">            AlipayTradePrecreateResponse response = result.getResponse();</span><br><span class="line">            dumpResponse(response);</span><br><span class="line"></span><br><span class="line">            File folder = <span class="keyword">new</span> File(path);</span><br><span class="line">            <span class="keyword">if</span>(!folder.exists())&#123;</span><br><span class="line">                folder.setWritable(<span class="keyword">true</span>);</span><br><span class="line">                folder.mkdirs();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//éœ€è¦ä¿®æ”¹ä¸ºè¿è¡Œæœºå™¨ä¸Šçš„è·¯å¾„</span></span><br><span class="line">            <span class="comment">//ç»†èŠ‚ç»†èŠ‚ç»†èŠ‚</span></span><br><span class="line">            String qrPath = String.format(path+<span class="string">"/qr-%s.png"</span>,response.getOutTradeNo());</span><br><span class="line">            String qrFileName = String.format(<span class="string">"qr-%s.png"</span>,response.getOutTradeNo());</span><br><span class="line">            ZxingUtils.getQRCodeImge(response.getQrCode(), <span class="number">256</span>, qrPath);</span><br><span class="line">	<span class="comment">//ä¸Šä¸€å¥å°†äºŒç»´ç å°±å·²ç»å°†äºŒç»´ç ä¿å­˜åˆ°pathä½ç½®äº†ï¼Œåå­—ä¹Ÿæœ‰äº†ï¼Œé‚£ä¹ˆç°åœ¨æˆ‘ä»¬ç”¨path+ qrFileNameå°±å¯ä»¥å°†è¿™ä¸ªæ–‡ä»¶å–å‡ºæ¥ä¿å­˜ï¼Œç„¶åé€šè¿‡FTPå·¥å…·ç±»ä¸Šä¼ åˆ°FTPä¸­å»</span></span><br><span class="line">            File targetFile = <span class="keyword">new</span> File(path,qrFileName);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                FTPUtil.uploadFile(Lists.newArrayList(targetFile));</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                logger.error(<span class="string">"ä¸Šä¼ äºŒç»´ç å¼‚å¸¸"</span>,e);</span><br><span class="line">            &#125;</span><br><span class="line">            logger.info(<span class="string">"qrPath:"</span> + qrPath);</span><br><span class="line">            String qrUrl = PropertiesUtil.getProperty(<span class="string">"ftp.server.http.prefix"</span>)+targetFile.getName();</span><br><span class="line">            resultMap.put(<span class="string">"qrUrl"</span>,qrUrl);</span><br><span class="line">            <span class="keyword">return</span> ServerResponse.createBySuccess(resultMap);</span><br><span class="line">        <span class="keyword">case</span> FAILED:</span><br><span class="line">            logger.error(<span class="string">"æ”¯ä»˜å®é¢„ä¸‹å•å¤±è´¥!!!"</span>);</span><br><span class="line">            <span class="keyword">return</span> ServerResponse.createByErrorMessage(<span class="string">"æ”¯ä»˜å®é¢„ä¸‹å•å¤±è´¥!!!"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">case</span> UNKNOWN:</span><br><span class="line">            logger.error(<span class="string">"ç³»ç»Ÿå¼‚å¸¸ï¼Œé¢„ä¸‹å•çŠ¶æ€æœªçŸ¥!!!"</span>);</span><br><span class="line">            <span class="keyword">return</span> ServerResponse.createByErrorMessage(<span class="string">"ç³»ç»Ÿå¼‚å¸¸ï¼Œé¢„ä¸‹å•çŠ¶æ€æœªçŸ¥!!!"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            logger.error(<span class="string">"ä¸æ”¯æŒçš„äº¤æ˜“çŠ¶æ€ï¼Œäº¤æ˜“è¿”å›å¼‚å¸¸!!!"</span>);</span><br><span class="line">            <span class="keyword">return</span> ServerResponse.createByErrorMessage(<span class="string">"ä¸æ”¯æŒçš„äº¤æ˜“çŠ¶æ€ï¼Œäº¤æ˜“è¿”å›å¼‚å¸¸!!!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®€å•æ‰“å°åº”ç­”</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dumpResponse</span><span class="params">(AlipayResponse response)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (response != <span class="keyword">null</span>) &#123;</span><br><span class="line">        logger.info(String.format(<span class="string">"code:%s, msg:%s"</span>, response.getCode(), response.getMsg()));</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isNotEmpty(response.getSubCode())) &#123;</span><br><span class="line">            logger.info(String.format(<span class="string">"subCode:%s, subMsg:%s"</span>, response.getSubCode(),</span><br><span class="line">                    response.getSubMsg()));</span><br><span class="line">        &#125;</span><br><span class="line">        logger.info(<span class="string">"body:"</span> + response.getBody());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åœ¨è¿™ä¸ªå‡½æ•°ä¸­å¤„ç†äº†ï¼šè¿‡è™‘é‡å¤é€šçŸ¥ ç„¶åå°†payinfoæ•°æ®è¡¨éœ€è¦çš„æ•°æ®ä¿å­˜åœ¨payinfoä¸­ï¼Œæ’å…¥åˆ°æ•°æ®åº“ä¸­</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ServerResponse <span class="title">aliCallback</span><span class="params">(Map&lt;String,String&gt; params)</span></span>&#123;</span><br><span class="line">    Long orderNo = Long.parseLong(params.get(<span class="string">"out_trade_no"</span>));</span><br><span class="line">    String tradeNo = params.get(<span class="string">"trade_no"</span>);</span><br><span class="line">    String tradeStatus = params.get(<span class="string">"trade_status"</span>);</span><br><span class="line">    Order order = orderMapper.selectByOrderNo(orderNo);</span><br><span class="line">    <span class="keyword">if</span>(order == <span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> ServerResponse.createByErrorMessage(<span class="string">"éå¿«ä¹æ…•å•†åŸçš„è®¢å•,å›è°ƒå¿½ç•¥"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(order.getStatus() &gt;= Const.OrderStatusEnum.PAID.getCode())&#123;</span><br><span class="line">        <span class="keyword">return</span> ServerResponse.createBySuccess(<span class="string">"æ”¯ä»˜å®é‡å¤è°ƒç”¨"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(Const.AlipayCallback.TRADE_STATUS_TRADE_SUCCESS.equals(tradeStatus))&#123;</span><br><span class="line">        order.setPaymentTime(DateTimeUtil.strToDate(params.get(<span class="string">"gmt_payment"</span>)));</span><br><span class="line">        order.setStatus(Const.OrderStatusEnum.PAID.getCode());</span><br><span class="line">        orderMapper.updateByPrimaryKeySelective(order);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    PayInfo payInfo = <span class="keyword">new</span> PayInfo();</span><br><span class="line">    payInfo.setUserId(order.getUserId());</span><br><span class="line">    payInfo.setOrderNo(order.getOrderNo());</span><br><span class="line">    payInfo.setPayPlatform(Const.PayPlatformEnum.ALIPAY.getCode());</span><br><span class="line">    payInfo.setPlatformNumber(tradeNo);</span><br><span class="line">    payInfo.setPlatformStatus(tradeStatus);</span><br><span class="line"></span><br><span class="line">    payInfoMapper.insert(payInfo);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ServerResponse.createBySuccess();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> ServerResponse <span class="title">queryOrderPayStatus</span><span class="params">(Integer userId,Long orderNo)</span></span>&#123;</span><br><span class="line">    Order order = orderMapper.selectByUserIdAndOrderNo(userId,orderNo);</span><br><span class="line">    <span class="keyword">if</span>(order == <span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> ServerResponse.createByErrorMessage(<span class="string">"ç”¨æˆ·æ²¡æœ‰è¯¥è®¢å•"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(order.getStatus() &gt;= Const.OrderStatusEnum.PAID.getCode())&#123;</span><br><span class="line">        <span class="keyword">return</span> ServerResponse.createBySuccess();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ServerResponse.createByError();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>






      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.chenzhiheng.cn/2018/02/27/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E6%9C%89%E4%B8%80%E4%BA%9Bmysql%E5%AE%B9%E6%98%93%E5%BF%BD%E7%95%A5%E7%9A%84%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é™ˆå¿—æ’çš„æŠ€æœ¯åšå®¢">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/27/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E6%9C%89%E4%B8%80%E4%BA%9Bmysql%E5%AE%B9%E6%98%93%E5%BF%BD%E7%95%A5%E7%9A%84%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">æœ‰ä¸€äº›mysqlå®¹æ˜“å¿½ç•¥çš„é—®é¢˜</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-02-27 09:35:00" itemprop="dateCreated datePublished" datetime="2018-02-27T09:35:00+08:00">2018-02-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-03-12 20:06:08" itemprop="dateModified" datetime="2020-03-12T20:06:08+08:00">2020-03-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web%E5%BC%80%E5%8F%91-czh-java-%E6%AF%95%E8%AE%BE/" itemprop="url" rel="index">
                    <span itemprop="name">webå¼€å‘/czh_java/æ¯•è®¾</span>
                  </a>
                </span>
            </span>

          
            <span id="/2018/02/27/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E6%9C%89%E4%B8%80%E4%BA%9Bmysql%E5%AE%B9%E6%98%93%E5%BF%BD%E7%95%A5%E7%9A%84%E9%97%AE%E9%A2%98/" class="post-meta-item leancloud_visitors" data-flag-title="æœ‰ä¸€äº›mysqlå®¹æ˜“å¿½ç•¥çš„é—®é¢˜" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>278</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>1 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2018å¹´2æœˆ27æ—¥ ä¸‹åˆ9:35</p>
<ol>
<li>Sqlè¯­å¥æ‰§è¡Œæ˜¯ä¸€å®šæœ‰è¿”å›çš„å€¼ï¼Œä½†æœ€å¸¸è§çš„æ˜¯intï¼Œè¡¨ç¤ºå½±å“çš„è¡Œæ•°</li>
<li><a href="https://segmentfault.com/a/1190000009540449" target="_blank" rel="noopener">MySQL nullä¸not nullå’Œnullä¸ç©ºå€¼â€™â€™çš„åŒºåˆ« - å¥½å¥½åœ° - SegmentFault æ€å¦</a></li>
<li>å¯¹äºè‡ªå¢çš„ç©ºå­—æ®µå¦‚ä½•insertæ—¶èµ‹å€¼<ol>
<li>è¿™ä¸ªé—®é¢˜æ¥æºäºæˆ‘çœ‹åˆ°*Mapper.xmlçš„insertæ—¶ï¼Œæ˜¯æ’å…¥ä¸»é”®idçš„ã€‚</li>
<li>æŒ‰æˆ‘å¹³æ—¶æ¥è¯´ï¼Œæˆ‘çš„insertè¯­å¥ä¸­å°±æ²¡æœ‰ä¸»é”®idï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼šinsertå¦‚ä½•å£°æ˜ä¸»é”®idçš„æƒ…å†µä¸‹æ‰§è¡Œ</li>
<li>ç­”æ¡ˆï¼šmysqlä¼šè‡ªåŠ¨å¿½ç•¥ï¼Œå…¶ä¸­çš„<strong>â€˜â€™</strong>ã€‚<code>insert into test value(&#39;&#39;,&quot;first&quot;)</code><br><img src="/2018/02/27/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E6%9C%89%E4%B8%80%E4%BA%9Bmysql%E5%AE%B9%E6%98%93%E5%BF%BD%E7%95%A5%E7%9A%84%E9%97%AE%E9%A2%98/0665E1D8-4252-4485-B41F-32D9F4A7A41D.png" alt><br><img src="/2018/02/27/web%E5%BC%80%E5%8F%91/czh_java/%E6%AF%95%E8%AE%BE/%E6%9C%89%E4%B8%80%E4%BA%9Bmysql%E5%AE%B9%E6%98%93%E5%BF%BD%E7%95%A5%E7%9A%84%E9%97%AE%E9%A2%98/2DF60596-143D-43CF-85F9-212FDFCE6C16.png" alt></li>
</ol>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/89/"><i class="fa fa-angle-left" aria-label="ä¸Šä¸€é¡µ"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/89/">89</a><span class="page-number current">90</span><a class="page-number" href="/page/91/">91</a><span class="space">&hellip;</span><a class="page-number" href="/page/116/">116</a><a class="extend next" rel="next" href="/page/91/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Zhiheng Chen</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">1160</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">103</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zhiheng Chen</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">1.1m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">17:15</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> å¼ºåŠ›é©±åŠ¨ v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">ä¸»é¢˜ â€“ <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.7.1
  </div>

        






  <script>
  function leancloudSelector(url) {
    url = encodeURI(url);
    return document.getElementById(url).querySelector('.leancloud-visitors-count');
  }
  if (CONFIG.page.isPost) {
    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = decodeURI(visitors.getAttribute('id'));
      var title = visitors.getAttribute('data-flag-title');

      Counter('get', `/classes/Counter?where=${JSON.stringify({ url })}`)
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .then(response => response.json())
              .then(() => {
                leancloudSelector(url).innerText = counter.time + 1;
              })
              .catch(error => {
                console.error('Failed to save visitor count', error);
              })
          } else {
              Counter('post', '/classes/Counter', { title: title, url: url, time: 1 })
                .then(response => response.json())
                .then(() => {
                  leancloudSelector(url).innerText = 1;
                })
                .catch(error => {
                  console.error('Failed to create', error);
                });
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }
  } else {
    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return decodeURI(element.getAttribute('id'));
      });

      Counter('get', `/classes/Counter?where=${JSON.stringify({ url: { '$in': entries } })}`)
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length === 0) {
            document.querySelectorAll('.leancloud_visitors .leancloud-visitors-count').forEach(element => {
              element.innerText = 0;
            });
            return;
          }
          for (let item of results) {
            let { url, time } = item;
            leancloudSelector(url).innerText = time;
          }
          for (let url of entries) {
            var element = leancloudSelector(url);
            if (element.innerText == '') {
              element.innerText = 0;
            }
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }
  }

  fetch('https://app-router.leancloud.cn/2/route?appId=QiM1vjQ7SAoirKD4qY57L82O-gzGzoHsz')
    .then(response => response.json())
    .then(({ api_server }) => {
      var Counter = (method, url, data) => {
        return fetch(`https://${api_server}/1.1${url}`, {
          method: method,
          headers: {
            'X-LC-Id'     : 'QiM1vjQ7SAoirKD4qY57L82O-gzGzoHsz',
            'X-LC-Key'    : 'aOHhzmfDblK0HGWUqEyb6ra2',
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    });
  </script>


      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  


</body>
</html>
