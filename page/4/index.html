<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"chenzhiheng.cn","root":"/","scheme":"Pisces","version":"7.7.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="陈志恒的技术博客">
<meta property="og:url" content="http://chenzhiheng.cn/page/4/index.html">
<meta property="og:site_name" content="陈志恒的技术博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Zhiheng Chen">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://chenzhiheng.cn/page/4/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>陈志恒的技术博客</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?6bc779d0e3be483fc01e871fbb7cef3d";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">陈志恒的技术博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://chenzhiheng.cn/2020/04/28/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_%E8%AF%AD%E8%A8%80/%E7%8E%B0%E4%BB%A3C++/[%E6%91%98%E6%8A%84]C++%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E7%9A%84%E7%BC%96%E7%A8%8B%E6%96%B9%E6%B3%95%E7%B3%BB%E5%88%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈志恒的技术博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/28/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_%E8%AF%AD%E8%A8%80/%E7%8E%B0%E4%BB%A3C++/%5B%E6%91%98%E6%8A%84%5DC++%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E7%9A%84%E7%BC%96%E7%A8%8B%E6%96%B9%E6%B3%95%E7%B3%BB%E5%88%97/" class="post-title-link" itemprop="url">摘抄C++异常处理的编程方法系列</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-28 02:49:00" itemprop="dateCreated datePublished" datetime="2020-04-28T02:49:00+08:00">2020-04-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-05-04 16:20:16" itemprop="dateModified" datetime="2020-05-04T16:20:16+08:00">2020-05-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80-czh-%E8%AF%AD%E8%A8%80-%E7%8E%B0%E4%BB%A3C/" itemprop="url" rel="index">
                    <span itemprop="name">b计算机基础/czh_语言/现代C++</span>
                  </a>
                </span>
            </span>

          
            <span id="/2020/04/28/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_%E8%AF%AD%E8%A8%80/%E7%8E%B0%E4%BB%A3C++/%5B%E6%91%98%E6%8A%84%5DC++%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E7%9A%84%E7%BC%96%E7%A8%8B%E6%96%B9%E6%B3%95%E7%B3%BB%E5%88%97/" class="post-meta-item leancloud_visitors" data-flag-title="摘抄C++异常处理的编程方法系列" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>104</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2020年4月28日 下午2:49</p>
<p><a href="https://www.cnblogs.com/findumars/p/5642100.html" target="_blank" rel="noopener">C++异常处理的编程方法（阿愚，整整29集） - findumars - 博客园</a><br><a href="C++%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E7%9A%84%E7%BC%96%E7%A8%8B%E6%96%B9%E6%B3%95.doc">C++异常处理的编程方法.doc</a></p>
<p><a href="bear://x-callback-url/open-note?id=86B04CC5-1FDE-4795-9F75-D675E1D97316-904-00002C255098768C">不能在析构函数里面抛出异常:涉及到C++异常处理的理解</a></p>
<ul>
<li>这篇文章就出自这里</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://chenzhiheng.cn/2020/04/28/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_%E8%AF%AD%E8%A8%80/%E7%8E%B0%E4%BB%A3C++/%E4%B8%8D%E8%83%BD%E5%9C%A8%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0%E9%87%8C%E9%9D%A2%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8%E6%B6%89%E5%8F%8A%E5%88%B0C++%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E7%9A%84%E7%90%86%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈志恒的技术博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/28/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_%E8%AF%AD%E8%A8%80/%E7%8E%B0%E4%BB%A3C++/%E4%B8%8D%E8%83%BD%E5%9C%A8%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0%E9%87%8C%E9%9D%A2%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8%E6%B6%89%E5%8F%8A%E5%88%B0C++%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E7%9A%84%E7%90%86%E8%A7%A3/" class="post-title-link" itemprop="url">不能在析构函数里面抛出异常涉及到C++异常处理的理解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-28 02:17:00" itemprop="dateCreated datePublished" datetime="2020-04-28T02:17:00+08:00">2020-04-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-05-04 16:19:51" itemprop="dateModified" datetime="2020-05-04T16:19:51+08:00">2020-05-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80-czh-%E8%AF%AD%E8%A8%80-%E7%8E%B0%E4%BB%A3C/" itemprop="url" rel="index">
                    <span itemprop="name">b计算机基础/czh_语言/现代C++</span>
                  </a>
                </span>
            </span>

          
            <span id="/2020/04/28/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_%E8%AF%AD%E8%A8%80/%E7%8E%B0%E4%BB%A3C++/%E4%B8%8D%E8%83%BD%E5%9C%A8%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0%E9%87%8C%E9%9D%A2%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8%E6%B6%89%E5%8F%8A%E5%88%B0C++%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E7%9A%84%E7%90%86%E8%A7%A3/" class="post-meta-item leancloud_visitors" data-flag-title="不能在析构函数里面抛出异常涉及到C++异常处理的理解" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>3k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2020年4月28日 下午2:17<br><a href="https://blog.csdn.net/tianmohust/article/details/8706203" target="_blank" rel="noopener">不能在析构函数里面抛出异常_C/C++_tianmo2010的专栏-CSDN博客</a></p>
<h4 id="简短的总结为什么不行："><a href="#简短的总结为什么不行：" class="headerlink" title="简短的总结为什么不行："></a>简短的总结为什么不行：</h4><pre><code>* 析构函数从语法角度来说，是可以写抛出异常的代码的，也就是编译器阶段并不会直接限制。
* 需要了解异常的处理机制才可以理解：
    * 关键是在运行期的时候，如果由于异常，发生了代码的中断执行并在当前行throw出异常信息，后面的当前作用域的代码就不执行了，知道找到catch到此异常信息之后，从catch所在的位置之后开始执行。
    * 在这个过程中，并不是不断的跳出当前程序行的作用域就完了，C++的异常处理机制会在跳出每个作用域是，把当前作用域的临时变量析构掉，这就触发了析构函数。更加准确的说是由于异常而引发的提前析构，注意当前程序就是在处理异常的过程中，你这时候在抛出异常，就是一个异常里面还有异常。我们知道异常是需要一个个执行的，不能嵌套异常。
    * C++本身不支持嵌套异常，只支持串行异常，因此析构函数的执行不应该抛出异常</code></pre><h4 id="析构函数中抛出异常时概括性总结"><a href="#析构函数中抛出异常时概括性总结" class="headerlink" title="析构函数中抛出异常时概括性总结"></a>析构函数中抛出异常时概括性总结</h4><ul>
<li>C++中析构函数的执行不应该抛出异常；</li>
<li>假如析构函数中抛出了异常，那么你的系统将变得非常危险，也许很长时间什么错误也不会发生；但也许你的系统有时就会莫名奇妙地崩溃而退出了，而且什么迹象也没有，崩得你满地找牙也很难发现问题究竟出现在什么地方；</li>
<li>当在某一个析构函数中会有一些可能（哪怕是一点点可能）发生异常时，那么就必须要把这种可能发生的异常完全封装在析构函数内部，决不能让它抛出函数之外（这招简直是绝杀！呵呵！）；</li>
<li>主人公阿愚吐血地提醒朋友们，一定要切记上面这几条总结，析构函数中抛出异常导致程序不明原因的崩溃是许多系统的致命内伤！</li>
</ul>
<h4 id="从C-异常处理的角度解释析构函数的执行不应该抛出异常"><a href="#从C-异常处理的角度解释析构函数的执行不应该抛出异常" class="headerlink" title="从C++异常处理的角度解释析构函数的执行不应该抛出异常"></a>从C++异常处理的角度解释析构函数的执行不应该抛出异常</h4><ul>
<li>C++异常处理模型是为C++语言量身设计的，更进一步的说，它实际上也是为C++语言中面向对象而服务的，我们在前面的文章中多次不厌其烦的声明到，C++异常处理模型最大的特点和优势就是对C++中的面向对象提供了最强大的无缝支持。好的，既然如此！那么如果对象在运行期间出现了异常，C++异常处理模型有责任清除那些由于出现异常所导致的已经失效了的对象（也即对象超出了它原来的作用域），并释放对象原来所分配的资源，这就是调用这些对象的析构函数来完成释放资源的任务，所以从这个意义上说，析构函数已经变成了异常处理的一部分。</li>
<li>不知大家是否明白了这段话所蕴含的真正内在涵义没有，那就是上面的论述C++异常处理模型它其实是有一个前提假设——析构函数中是不应该再有异常抛出的。</li>
<li>试想！如果对象出了异常，现在异常处理模块为了维护系统对象数据的一致性，避免资源泄漏，有责任释放这个对象的资源，调用对象的析构函数，可现在假如析构过程又再出现异常，<strong>那么请问由谁来保证这个对象的资源释放呢？而且这新出现的异常又由谁来处理呢？</strong>不要忘记前面的一个异常目前都还没有处理结束，因此这就陷入了一个矛盾之中，或者说无限的递归嵌套之中。</li>
<li>所以C++标准就做出了这种假设，当然这种假设也是完全合理的，在对象的构造过程中，或许由于系统资源有限而致使对象需要的资源无法得到满足，从而导致异常的出现，但析构函数完全是可以做得到避免异常的发生，毕竟你是在释放资源呀！</li>
</ul>
<h4 id="实验代码："><a href="#实验代码：" class="headerlink" title="实验代码："></a>实验代码：</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyTest_Base</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="keyword">virtual</span> ~ MyTest_Base () </span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"销毁一个MyTest_Base类型的对象"</span>&lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">try</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 构造一个对象，当obj对象离开这个作用域时析构将会被执行</span></span><br><span class="line">		MyTest_Base obj;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">catch</span>(...)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"unknow exception"</span>&lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyTest_Base</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="keyword">virtual</span> ~ MyTest_Base () </span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"开始准备销毁一个MyTest_Base类型的对象"</span>&lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="comment">// 注意：在析构函数中抛出了异常</span></span><br><span class="line">		<span class="keyword">throw</span> <span class="built_in">std</span>::exception(<span class="string">"在析构函数中故意抛出一个异常，测试！"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Func</span><span class="params">()</span> <span class="title">throw</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">throw</span> <span class="built_in">std</span>::exception(<span class="string">"故意抛出一个异常，测试！"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Other</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">try</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 构造一个对象，当obj对象离开这个作用域时析构将会被执行</span></span><br><span class="line">		MyTest_Base obj;</span><br><span class="line">		 </span><br><span class="line">		obj.Other();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">catch</span>(<span class="built_in">std</span>::exception e)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; e.what() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">catch</span>(...)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"unknow exception"</span>&lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">　　程序运行的结果是：</span></span><br><span class="line"><span class="comment">　　开始准备销毁一个MyTest_Base类型的对象</span></span><br><span class="line"><span class="comment">　　在析构函数中故意抛出一个异常，测试！</span></span><br></pre></td></tr></table></figure>


<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">try</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 构造一个对象，当obj对象离开这个作用域时析构将会被执行</span></span><br><span class="line">		MyTest_Base obj;</span><br><span class="line">		 </span><br><span class="line">		<span class="comment">// 下面这条语句是新添加的</span></span><br><span class="line">		<span class="comment">// 调用这个成员函数将抛出一个异常</span></span><br><span class="line">		obj.Func();</span><br><span class="line">		obj.Other();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">catch</span>(<span class="built_in">std</span>::exception e)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; e.what() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">catch</span>(...)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"unknow exception"</span>&lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">程序在控制台上打印一条语句后就崩溃了（如果程序是debug版本，会显示一条程序将被终止的断言；如果是release版本，程序会被执行terminate()函数后退出）</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyTest_Base</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="keyword">virtual</span> ~ MyTest_Base () </span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"开始准备销毁一个MyTest_Base类型的对象"</span>&lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="comment">// 一点小的改动。把异常完全封装在析构函数内部</span></span><br><span class="line">		<span class="keyword">try</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">// 注意：在析构函数中抛出了异常</span></span><br><span class="line">			<span class="keyword">throw</span> <span class="built_in">std</span>::exception(<span class="string">"在析构函数中故意抛出一个异常，测试！"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">catch</span>(…) &#123;&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Func</span><span class="params">()</span> <span class="title">throw</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">throw</span> <span class="built_in">std</span>::exception(<span class="string">"故意抛出一个异常，测试！"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Other</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">　　程序运行的结果如下：</span></span><br><span class="line"><span class="comment">　　开始准备销毁一个MyTest_Base类型的对象</span></span><br><span class="line"><span class="comment">　　故意抛出一个异常，测试！</span></span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://chenzhiheng.cn/2020/04/27/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/linux/%E8%A1%A5%E5%85%85/%E8%B5%84%E6%BA%90(%E7%BC%93%E5%AD%98IO%E5%8F%98%E9%87%8F%E4%BB%A3%E7%A0%81%E6%AE%B5)%E7%9A%84%E8%8E%B7%E5%8F%96%E3%80%81%E6%94%BE%E5%85%A5%E5%AE%89%E5%85%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈志恒的技术博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/27/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/linux/%E8%A1%A5%E5%85%85/%E8%B5%84%E6%BA%90(%E7%BC%93%E5%AD%98IO%E5%8F%98%E9%87%8F%E4%BB%A3%E7%A0%81%E6%AE%B5)%E7%9A%84%E8%8E%B7%E5%8F%96%E3%80%81%E6%94%BE%E5%85%A5%E5%AE%89%E5%85%A8/" class="post-title-link" itemprop="url">资源(缓存/IO/变量/代码段)的获取、放入安全</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-27 11:35:00" itemprop="dateCreated datePublished" datetime="2020-04-27T11:35:00+08:00">2020-04-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-05-04 16:19:51" itemprop="dateModified" datetime="2020-05-04T16:19:51+08:00">2020-05-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80-czh-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-linux-%E8%A1%A5%E5%85%85/" itemprop="url" rel="index">
                    <span itemprop="name">b计算机基础/czh_计算机系统/linux/补充</span>
                  </a>
                </span>
            </span>

          
            <span id="/2020/04/27/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/linux/%E8%A1%A5%E5%85%85/%E8%B5%84%E6%BA%90(%E7%BC%93%E5%AD%98IO%E5%8F%98%E9%87%8F%E4%BB%A3%E7%A0%81%E6%AE%B5)%E7%9A%84%E8%8E%B7%E5%8F%96%E3%80%81%E6%94%BE%E5%85%A5%E5%AE%89%E5%85%A8/" class="post-meta-item leancloud_visitors" data-flag-title="资源(缓存/IO/变量/代码段)的获取、放入安全" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>883</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2020年4月27日 下午11:35</p>
<p>注：这篇是从安全的角度去考虑的，另外还有从效率的角度去思考<br>效率这个这个角度我认为是一个tradeoff,计算机软件体系是一个从底层开始层层抽象发展的，这个的目的是为了上下层抽象的过程中简化编程的思维，但是对于数据的处理、拷贝、交互来说，应该是扁平的，这中间就会有矛盾，面对这样的矛盾，我们处理的方法就是让数据的交互来说尽可能的放在这个体系的底层，也就是内核层去完成，尽量不要用到用户态，这个就减少了没有实际效率意义的内核态与用户态之间的数据拷贝，一个专业的名次是0拷贝。</p>
<h4 id="多线程核心知识的两个层面去理解："><a href="#多线程核心知识的两个层面去理解：" class="headerlink" title="多线程核心知识的两个层面去理解："></a>多线程核心知识的两个层面去理解：</h4><ol>
<li>本质讨论的都是资源的获取和放入</li>
<li>【资源本身】资源的两种保护形式-主动、被动：<ul>
<li>主动：缓存/IO为空 <ul>
<li>这里的空就可以等价的理解为加了锁</li>
<li>缓存 IO有四种状态 <a href="bear://x-callback-url/open-note?id=28DD9699-859D-4E62-B989-DD32C0C31845-1248-0000FF1164D1C1D6">广义的IO模型：阻塞I/O-&gt;非阻塞忙轮询I/O-&gt;select/epoll无差别轮询代理-&gt; epoll</a></li>
</ul>
</li>
<li>被动：缓存_操作对象(变量_代码段)有，但加锁 ==》都会造成线程的阻塞</li>
<li>独立于线程之外的资源对象：缓存、IO，变量、C++全局变量(要注意这里的全局变量)</li>
</ul>
</li>
<li>【获取资源方】操作对象面对锁、等待、空之后的做法种类：<ul>
<li>上面说明了不同的场景原因，以及唯一的操作者线程，不同的被操作对象，但是操作方都是线程为单位</li>
<li>但是没有提到线程他对待这样的事情有几种处理方法：阻塞待唤醒、忙轮询、一遍轮询、不轮询直接获得操作对象<ul>
<li><a href="bear://x-callback-url/open-note?id=28DD9699-859D-4E62-B989-DD32C0C31845-1248-0000FF1164D1C1D6">广义的IO模型：阻塞I/O-&gt;非阻塞忙轮询I/O-&gt;select/epoll无差别轮询代理-&gt; epoll</a></li>
<li>我们一般在程序里默认是线程阻塞待唤醒<ul>
<li><a href="bear://x-callback-url/open-note?id=A3A21BAA-50BE-4E30-B30D-331422005335-14547-00013A674895D522">目录(现代C++)</a>中的安全部分</li>
</ul>
</li>
<li><a href="bear://x-callback-url/open-note?id=C059DA71-C50E-48D6-A01D-F2C7A43913DC-699-0000BB15FF1A8239">线程安全的策略</a>java中</li>
</ul>
</li>
</ul>
</li>
<li>上面三点说明了如何处理，如果不处理会出现什么情况：<ul>
<li>为什么我们再多线程下需要使用锁？<ul>
<li>脏数据</li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 id="我们可以根据场景进行自定义设计的地方："><a href="#我们可以根据场景进行自定义设计的地方：" class="headerlink" title="我们可以根据场景进行自定义设计的地方："></a>我们可以根据场景进行自定义设计的地方：</h4><ul>
<li><strong>选择合适的锁的类型</strong><ul>
<li>锁就是字面意思：锁住大门，不让你进。他有酸甜苦辣味，看你的需要选取。不同的锁的类型，体现你对资源的管理方式。</li>
</ul>
</li>
<li>从线程的角度，你希望线程遇到阻塞之后，如何行事呢？<ul>
<li>阻塞待唤醒、忙轮询、一遍轮询、不轮询直接获得操作对象等</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://chenzhiheng.cn/2020/04/27/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_%E7%AE%97%E6%B3%95/leetcode/%E9%A2%98%E7%9B%AE/[%E6%91%98%E6%8A%84]map%E7%9A%84%E6%8E%92%E5%BA%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈志恒的技术博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/27/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_%E7%AE%97%E6%B3%95/leetcode/%E9%A2%98%E7%9B%AE/%5B%E6%91%98%E6%8A%84%5Dmap%E7%9A%84%E6%8E%92%E5%BA%8F/" class="post-title-link" itemprop="url">摘抄map的排序</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-27 06:45:00" itemprop="dateCreated datePublished" datetime="2020-04-27T06:45:00+08:00">2020-04-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-05-04 16:19:51" itemprop="dateModified" datetime="2020-05-04T16:19:51+08:00">2020-05-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80-czh-%E7%AE%97%E6%B3%95-leetcode-%E9%A2%98%E7%9B%AE/" itemprop="url" rel="index">
                    <span itemprop="name">b计算机基础/czh_算法/leetcode/题目</span>
                  </a>
                </span>
            </span>

          
            <span id="/2020/04/27/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_%E7%AE%97%E6%B3%95/leetcode/%E9%A2%98%E7%9B%AE/%5B%E6%91%98%E6%8A%84%5Dmap%E7%9A%84%E6%8E%92%E5%BA%8F/" class="post-meta-item leancloud_visitors" data-flag-title="摘抄map的排序" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.3k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2020年4月27日 下午6:45</p>
<p><a href="https://www.cnblogs.com/eilearn/p/9473804.html" target="_blank" rel="noopener">C++（十三）— map的排序 - 深度机器学习 - 博客园</a></p>
<h4 id="对有序map中的key排序"><a href="#对有序map中的key排序" class="headerlink" title="对有序map中的key排序"></a>对有序map中的key排序</h4><ul>
<li>map这里指定less作为其默认比较函数(对象),就是默认按键值升序排列</li>
<li>可以自定义，按照键值升序排列，注意加载</li>
<li>按照自定义内容进行排序，比如字符串的长度<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt; // std::greater</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">CmpByKeyLength</span> &#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span>&amp; k1, <span class="keyword">const</span> <span class="built_in">string</span>&amp; k2)</span><span class="keyword">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> k1.length() &lt; k2.length();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//1、map这里指定less作为其默认比较函数(对象),就是默认按键值升序排列</span></span><br><span class="line">    <span class="comment">// map&lt;string, int&gt; name_score_map;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2、可以自定义，按照键值升序排列，注意加载 </span></span><br><span class="line">    <span class="comment">// #include &lt;functional&gt; // std::greater</span></span><br><span class="line">    <span class="comment">// map&lt;string, int, greater&lt;string&gt;&gt; name_score_map;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//3、按照自定义内容进行排序，比如字符串的长度</span></span><br><span class="line">    <span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="keyword">int</span>, CmpByKeyLength&gt; name_score_map;</span><br><span class="line"></span><br><span class="line">    name_score_map[<span class="string">"LiMin"</span>] = <span class="number">90</span>;</span><br><span class="line">    name_score_map[<span class="string">"ZiLinMi"</span>] = <span class="number">79</span>;</span><br><span class="line">    name_score_map[<span class="string">"BoB"</span>] = <span class="number">92</span>;</span><br><span class="line">    name_score_map.insert(make_pair(<span class="string">"Bing"</span>, <span class="number">99</span>));</span><br><span class="line">    name_score_map.insert(make_pair(<span class="string">"Albert"</span>, <span class="number">86</span>));</span><br><span class="line"></span><br><span class="line">    <span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt;::iterator iter;</span><br><span class="line">    <span class="keyword">for</span> ( iter = name_score_map.<span class="built_in">begin</span>();iter != name_score_map.<span class="built_in">end</span>();++iter) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; (*iter).first &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="对有序map中的value排序"><a href="#对有序map中的value排序" class="headerlink" title="对有序map中的value排序"></a>对有序map中的value排序</h4><ul>
<li>把map中的元素放到序列容器（如vector）中，再用sort进行排序。<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt; // std::greater</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> pair&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt;&amp; a, <span class="keyword">const</span> pair&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt;&amp; b)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a.second &lt; b.second;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//1、map这里指定less作为其默认比较函数(对象),就是默认按键值升序排列</span></span><br><span class="line">    <span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt; name_score_map;</span><br><span class="line">    name_score_map[<span class="string">"LiMin"</span>] = <span class="number">90</span>;</span><br><span class="line">    name_score_map[<span class="string">"ZiLinMi"</span>] = <span class="number">79</span>;</span><br><span class="line">    name_score_map[<span class="string">"BoB"</span>] = <span class="number">92</span>;</span><br><span class="line">    name_score_map.insert(make_pair(<span class="string">"Bing"</span>, <span class="number">99</span>));</span><br><span class="line">    name_score_map.insert(make_pair(<span class="string">"Albert"</span>, <span class="number">86</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//输出添加的内容</span></span><br><span class="line">    <span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt;::iterator iter;</span><br><span class="line">    <span class="keyword">for</span> (iter = name_score_map.<span class="built_in">begin</span>(); iter != name_score_map.<span class="built_in">end</span>(); ++iter) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; (*iter).first &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将map中的内容转存到vector中</span></span><br><span class="line">    vector&lt;pair&lt;string, int&gt;&gt; vec(name_score_map.begin(), name_score_map.end());</span><br><span class="line">    <span class="comment">//对线性的vector进行排序</span></span><br><span class="line">    sort(vec.<span class="built_in">begin</span>(), vec.<span class="built_in">end</span>(), cmp);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; vec.<span class="built_in">size</span>(); ++i)</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; vec[i].first &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://chenzhiheng.cn/2020/04/26/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_%E8%AF%AD%E8%A8%80/%E7%8E%B0%E4%BB%A3C++/%E4%B8%B2%E8%AE%B2%EF%BC%9A%E5%9F%BA%E6%9C%AC%E5%85%B3%E9%94%AE%E5%AD%97%E3%80%81%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E3%80%81%E8%BF%90%E8%A1%8C%E6%97%B6%E7%B1%BB%E5%9E%8B%E8%AF%86%E5%88%AB%E3%80%81%E9%87%8D%E8%BD%BD%E8%BF%90%E7%AE%97%E3%80%81OOP%E3%80%81%E6%A8%A1%E6%9D%BF%E6%B3%9B%E5%9E%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈志恒的技术博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/26/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_%E8%AF%AD%E8%A8%80/%E7%8E%B0%E4%BB%A3C++/%E4%B8%B2%E8%AE%B2%EF%BC%9A%E5%9F%BA%E6%9C%AC%E5%85%B3%E9%94%AE%E5%AD%97%E3%80%81%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E3%80%81%E8%BF%90%E8%A1%8C%E6%97%B6%E7%B1%BB%E5%9E%8B%E8%AF%86%E5%88%AB%E3%80%81%E9%87%8D%E8%BD%BD%E8%BF%90%E7%AE%97%E3%80%81OOP%E3%80%81%E6%A8%A1%E6%9D%BF%E6%B3%9B%E5%9E%8B/" class="post-title-link" itemprop="url">串讲：基本关键字、类型转换、运行时类型识别、重载运算、OOP、模板泛型</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-26 09:37:00" itemprop="dateCreated datePublished" datetime="2020-04-26T09:37:00+08:00">2020-04-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-05-04 16:19:50" itemprop="dateModified" datetime="2020-05-04T16:19:50+08:00">2020-05-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80-czh-%E8%AF%AD%E8%A8%80-%E7%8E%B0%E4%BB%A3C/" itemprop="url" rel="index">
                    <span itemprop="name">b计算机基础/czh_语言/现代C++</span>
                  </a>
                </span>
            </span>

          
            <span id="/2020/04/26/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_%E8%AF%AD%E8%A8%80/%E7%8E%B0%E4%BB%A3C++/%E4%B8%B2%E8%AE%B2%EF%BC%9A%E5%9F%BA%E6%9C%AC%E5%85%B3%E9%94%AE%E5%AD%97%E3%80%81%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E3%80%81%E8%BF%90%E8%A1%8C%E6%97%B6%E7%B1%BB%E5%9E%8B%E8%AF%86%E5%88%AB%E3%80%81%E9%87%8D%E8%BD%BD%E8%BF%90%E7%AE%97%E3%80%81OOP%E3%80%81%E6%A8%A1%E6%9D%BF%E6%B3%9B%E5%9E%8B/" class="post-meta-item leancloud_visitors" data-flag-title="串讲：基本关键字、类型转换、运行时类型识别、重载运算、OOP、模板泛型" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.2k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2020年4月26日 上午9:37</p>
<h4 id="基本关键字："><a href="#基本关键字：" class="headerlink" title="基本关键字："></a>基本关键字：</h4><ul>
<li>C++这个框架提供给用户的功能接口。也需要并不像我们熟悉的开发框架，是通过给函数传参数进行功能的封装和调用，语言框架他是利用设计的语法 + 编译器的处理，最终达到的功能接口的作用。框架思想是理解C++的关键角度之一。<br>附：</li>
<li><a href="https://www.cnblogs.com/iloveyoucc/archive/2012/03/18/2404658.html" target="_blank" rel="noopener">#define和inline 的区别 - cbwcwy - 博客园</a></li>
</ul>
<h4 id="类型转换："><a href="#类型转换：" class="headerlink" title="类型转换："></a>类型转换：</h4><ul>
<li>首先，需要说明的是类型和类别的区别</li>
<li>另外，类型转换分为两个大类，编译器自动转换，手动关键字转换。自动类型转换对于不同的语法类型，编译器本身就定死了一些规则，当满足条件触发时，就会按既定的步骤进行类型转换。而手动类型转换，需要我们使用一些运算符，一般来说，如果在开发过程中需要使用手动类型转换才可以完成一些功能时，都是我们不合理的设计代码引起的，这时我们需要去修改我们原有的设计，而不是去使用手动类型转换</li>
</ul>
<h4 id="运行时类型识别："><a href="#运行时类型识别：" class="headerlink" title="运行时类型识别："></a>运行时类型识别：</h4><ul>
<li>只有一种使用场景：我们有基类的指针，需要在继承类中调用基类中没有标志位virtual的成员方法。<ul>
<li>编译器也给我们留了对应的功能接口：dynamic_cast运算符。但是一般来说，出现这样的需求时，我们可以通过合理的重新设计代码逻辑，从而不需要这样的接口。</li>
</ul>
</li>
<li>关于typeid运算符<ul>
<li>在编译阶段会自动插入一段类型检查代码，这些代码会在运行时进行执行，从而判断对象的类型。这种运算符在python中其实很多很多</li>
<li>从这个例子中我们就可以看出C++虽然是一门静态类型的语言，类型是在编译期进行确定，但是也可以支持动态类型语言在运行期做类型的判定和检查</li>
</ul>
</li>
</ul>
<h4 id="OOP面向对象编程"><a href="#OOP面向对象编程" class="headerlink" title="OOP面向对象编程"></a>OOP面向对象编程</h4><ul>
<li>这个框架功能的设计就比上面提到的通过关键字、运算符来提供接口实现的功能要复杂。关键字、运算符这些语法点，可以认为在编译器代码中会使用一些映射好的代码进行替换，这些关键字、运算符其实更多的是为了帮助使用者将常用的功能封装好，这样就减少了重复劳动，和使用定义函数、模板、类进行代码复用的思想是一致的，只不过这些关键字、运算符更关注与系统功能的复用，而使用者更关心与逻辑功能的复用。</li>
<li>相反，OOP就不是简简单单的代码替换这么简单，OOP可以把它理解成C++这门框架中的一个子系统<ul>
<li>既然提到了系统这个词，我们回想操作系统知识，那么这其中一定包括一定程度的层次抽象，就像linux中包含用户态和内核态一样，当用户态调用了一个系统调用以后，我们需要深入的了解这个系统调用在内核态的工作原理是什么。同样，在C++中我们需要知道OOP这个子系统到底是如何完成功能的</li>
</ul>
</li>
<li>对于编译器来说，资源的单位：变量 ，函数<ul>
<li>OOP是对变量和函数这两个资源单位的逻辑上的组合，注意这里强调的是逻辑，这是为了更加贴近人类文明中的概念，减少语言框架和使用者之间的逻辑gap，让使用者能够更好的对现实进行抽象。而，对于编译器本身来说，他不需要这些人类社会的抽象，他眼中认为他自己所在的社会就是一个资源管理的系统，资源的单位时变量和函数，而即使是编译器，他也需要通过变量名和函数名和资源的映射表，来找到这些资源。</li>
</ul>
</li>
<li>虽然对于编译器来说，资源的单位是变量和函数，但是由于C++支持了OOP编程，那么资源单元之间就可以定义新的组合关系，并在组合关系之上设计新的功能，比如说：定义继承的访问控制、定义类的作用域、虚函数实现动态绑定机制，抽象基类等等新的功能。这些功能的本质依然是操作资源的基本单位，但是新添加了一些新的设计，花样也更多。<ul>
<li>这里需要特别强调关键的一点是：对于C++框架的使用者来说，视角是关注现实事物到类之间关系的转化抽象定义，但是对于C++框架本身的编译器来说，它的视角是更多的是从真实存储(内存的各个段，cpu的各种寄存器)的角度来分析。</li>
<li>在编译器视角中，语法层的继承关系变成了资源单位之间的访问关系，这这一点特别关键。从内存角度来说：派生类对象(所占的内存)中含有与其基类对应的部分，这是继承的关键，其中提到的“含有”就是编译器通过代码实现的逻辑功能，将不同的独立的单元产生逻辑上的语义。</li>
</ul>
</li>
</ul>
<h4 id="重载运算"><a href="#重载运算" class="headerlink" title="重载运算"></a>重载运算</h4><ul>
<li>重载运算是OOP系统中其中一个支持的功能，为什么重载运算可以单独成为一章节呢？<ul>
<li>这里面的原因我认为是计算机的核心功能是完成计算，那么语言框架、编译器处理支持代码(变量、函数)的管理以外，也应该直观的可以进行运算接口。</li>
</ul>
</li>
<li>让自定义的类有运算能力：<ul>
<li>在C++已有类型的运算不需要我们程序员关心是因为默认的编译器已经在通识的基础上写好了，并且大家对加法、减法等有统一的认识，因此可以直接写到编译器中，程序员不用管了。那么，OOP中的自定义类，这时我们就需要结合自己对业务功能的理解，定义符合业务特有逻辑的运算操作。</li>
</ul>
</li>
<li>另外，对于重载运算来说更多是编程实战best prictise<ul>
<li>哪些运算符不应该被重载</li>
<li>选择作为成员或者非成员</li>
</ul>
</li>
</ul>
<h4 id="模板泛型"><a href="#模板泛型" class="headerlink" title="模板泛型"></a>模板泛型</h4><ul>
<li>要理解模板的意义，我们需要和define进行对比，我们知道define他只干一件事：在预处理期进行直接、简单的替换操作。怎么评价define呢？往好里说，define功能简单但是也很明确，人们很好理解KISS原则，往不好里说，功能也谈简单了，感觉一点高级功能都没有，连基本的类型、语法检查都没有。</li>
<li>与difine相比，模板看上去好像也是简单的文本替换，但是在编译器中加入了一些高级功能：<ul>
<li>函数模板：可以进行自动的类型推断</li>
<li>支持所谓的模板重载：SFINAE机制</li>
<li>支持可变参数：编译器中加入了参数包的处理代码</li>
<li>模板的特例化：对比与OOP中的类继承关系，特例化是另一种意义上的“关系描述方式”</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://chenzhiheng.cn/2020/04/26/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_%E8%AF%AD%E8%A8%80/c++/%E4%B8%93%E9%A2%98%E7%9F%A5%E8%AF%86%E7%82%B96%EF%BC%9A%E5%BC%95%E7%94%A8[%E6%91%98%E6%8A%84]/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈志恒的技术博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/26/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_%E8%AF%AD%E8%A8%80/c++/%E4%B8%93%E9%A2%98%E7%9F%A5%E8%AF%86%E7%82%B96%EF%BC%9A%E5%BC%95%E7%94%A8%5B%E6%91%98%E6%8A%84%5D/" class="post-title-link" itemprop="url">专题知识点6：引用摘抄</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-26 03:50:00" itemprop="dateCreated datePublished" datetime="2020-04-26T03:50:00+08:00">2020-04-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-05-18 18:16:09" itemprop="dateModified" datetime="2020-05-18T18:16:09+08:00">2020-05-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80-czh-%E8%AF%AD%E8%A8%80-c/" itemprop="url" rel="index">
                    <span itemprop="name">b计算机基础/czh_语言/c++</span>
                  </a>
                </span>
            </span>

          
            <span id="/2020/04/26/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_%E8%AF%AD%E8%A8%80/c++/%E4%B8%93%E9%A2%98%E7%9F%A5%E8%AF%86%E7%82%B96%EF%BC%9A%E5%BC%95%E7%94%A8%5B%E6%91%98%E6%8A%84%5D/" class="post-meta-item leancloud_visitors" data-flag-title="专题知识点6：引用摘抄" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>3.3k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2020年4月26日 下午3:50</p>
<p>复习： 2020年5月16日 下午5:27</p>
<ol>
<li>C++的学习最关键是是要站在需求的角度，理解C++为什么要设计这个关键字，它是为了遇到了什么样的需求导致了它想设计这样一个语法</li>
<li>引用就是这样：<ol>
<li>首先记住一句话：引用的本质是为了解决拷贝问题，提高效率和空间</li>
<li>引用分为左值引用和右值引用，也同样是为了解决多余拷贝的问题</li>
</ol>
</li>
<li>至于，下面的具体代码分析，我觉得其实一个综合能力的考察，其中涉及到<ol>
<li>C++内存模型：不同的对象，对象生命周期，对象名字的作用域是不同的</li>
<li>对函数返回值的理解<ol>
<li>我自己的一个技巧是：把函数当成一个变量的定义来理解，这样就能把”函数“去掉</li>
<li>eg:<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">float</span> &amp;<span class="title">fn2</span><span class="params">(<span class="keyword">float</span> r)</span></span>&#123; <span class="comment">//&amp;说明返回的是temp的引用，换句话说就是返回temp本身</span></span><br><span class="line">    temp=r*r*<span class="number">3.14</span>;</span><br><span class="line">    <span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">当出现我们把函数的返回值赋值给其他变量时</span><br><span class="line">将函数<span class="function"><span class="keyword">float</span> &amp;<span class="title">fn2</span><span class="params">(<span class="keyword">float</span> r)</span></span>&#123;&#125; 抽象为  <span class="keyword">float</span> &amp; X </span><br><span class="line">注意：这里的X，当做是一个匿名变量，类比匿名函数lambda就能理解</span><br><span class="line"></span><br><span class="line"><span class="meta"># case:1</span></span><br><span class="line"><span class="function"><span class="keyword">float</span> &amp;<span class="title">fn2</span><span class="params">(<span class="keyword">float</span> r)</span></span>&#123;     </span><br><span class="line">	  temp=r*r*<span class="number">3.14</span>;</span><br><span class="line">    <span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">float</span> c = fn2(<span class="number">5.0</span>);</span><br><span class="line">       ||</span><br><span class="line">      转换</span><br><span class="line">		\||/</span><br><span class="line"><span class="keyword">float</span>&amp; x = temp;<span class="comment">// 步骤1：将函数转为为变量理解</span></span><br><span class="line"><span class="keyword">float</span> c = x;<span class="comment">// 步骤2:函数返回 fn2(5.0) 转换为 x</span></span><br><span class="line"><span class="comment">//步骤3：步骤一的变量，是临时变量，不论是不是引用类型，都会消失</span></span><br><span class="line">注：这里解释x这个引用变量内存被消失，也不影响，因为没有对象指向x，步骤<span class="number">2</span>中x指向的是temp，而不是临时变量x！</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta"># case:2</span></span><br><span class="line"><span class="function"><span class="keyword">float</span> <span class="title">fn1</span><span class="params">(<span class="keyword">float</span> r)</span></span>&#123;</span><br><span class="line">    temp=r*r*<span class="number">3.14</span>;</span><br><span class="line">    <span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">float</span> &amp;b=fn1(<span class="number">5.0</span>)<span class="comment">//[Error] </span></span><br><span class="line">       ||</span><br><span class="line">      转换</span><br><span class="line">		\||/</span><br><span class="line"><span class="keyword">float</span> x = temp;</span><br><span class="line"><span class="keyword">float</span> &amp;c = x;</span><br><span class="line">注：case2与case1最大的区别是：c这个引用指向是是临时变量x!而不是temp，所以会报错。</span><br></pre></td></tr></table></figure>

</li>
</ol>
</li>
</ol>
</li>
</ol>
<h4 id="具体分析："><a href="#具体分析：" class="headerlink" title="具体分析："></a>具体分析：</h4><p><a href="https://blog.csdn.net/weixin_40539125/article/details/81410008" target="_blank" rel="noopener">C/C++ 引用作为函数的返回值_C/C++_Jeff_的博客-CSDN博客</a></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//代码来源：RUNOOB</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">float</span> temp;</span><br><span class="line"><span class="function"><span class="keyword">float</span> <span class="title">fn1</span><span class="params">(<span class="keyword">float</span> r)</span></span>&#123;</span><br><span class="line">    temp=r*r*<span class="number">3.14</span>;</span><br><span class="line">    <span class="keyword">return</span> temp;</span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">float</span> &amp;<span class="title">fn2</span><span class="params">(<span class="keyword">float</span> r)</span></span>&#123; <span class="comment">//&amp;说明返回的是temp的引用，换句话说就是返回temp本身</span></span><br><span class="line">    temp=r*r*<span class="number">3.14</span>;</span><br><span class="line">    <span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">float</span> a=fn1(<span class="number">5.0</span>); <span class="comment">//case 1：返回值</span></span><br><span class="line">    <span class="comment">//float &amp;b=fn1(5.0); //case 2:用函数的返回值作为引用的初始化值 [Error] invalid initialization of non-const reference of type 'float&amp;' from an rvalue of type 'float'</span></span><br><span class="line">                           <span class="comment">//（有些编译器可以成功编译该语句，但会给出一个warning） </span></span><br><span class="line">    <span class="keyword">float</span> c=fn2(<span class="number">5.0</span>);<span class="comment">//case 3：返回引用</span></span><br><span class="line">    <span class="keyword">float</span> &amp;d=fn2(<span class="number">5.0</span>);<span class="comment">//case 4：用函数返回的引用作为新引用的初始化值</span></span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;a&lt;&lt;<span class="built_in">endl</span>;<span class="comment">//78.5</span></span><br><span class="line">    <span class="comment">//cout&lt;&lt;b&lt;&lt;endl;//78.5</span></span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;c&lt;&lt;<span class="built_in">endl</span>;<span class="comment">//78.5</span></span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;d&lt;&lt;<span class="built_in">endl</span>;<span class="comment">//78.5</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>case 1：用返回值方式调用函数（如下图，图片来源：伯乐在线）：<br><img src="/2020/04/26/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_%E8%AF%AD%E8%A8%80/c++/%E4%B8%93%E9%A2%98%E7%9F%A5%E8%AF%86%E7%82%B96%EF%BC%9A%E5%BC%95%E7%94%A8[%E6%91%98%E6%8A%84]/900715-20170824213332277-1403805406.png" alt><ol start="2">
<li>返回全局变量temp的值时，C++会在内存中创建临时变量并将temp的值拷贝给该临时变量。当返回到主函数main后，赋值语句a=fn1(5.0)会把临时变量的值再拷贝给变量a</li>
</ol>
</li>
<li>case 2：用函数的返回值初始化引用的方式调用函数（如下图，图片来源：伯乐在线）<br><img src="/2020/04/26/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_%E8%AF%AD%E8%A8%80/c++/%E4%B8%93%E9%A2%98%E7%9F%A5%E8%AF%86%E7%82%B96%EF%BC%9A%E5%BC%95%E7%94%A8[%E6%91%98%E6%8A%84]/900715-20170824213909761-1693110470.png" alt><ol start="2">
<li><strong>这种情况下，函数fn1()是以值方式返回到，返回时，首先拷贝temp的值给临时变量。返回到主函数后，用临时变量来初始化引用变量b，使得b成为该临时变量到的别名。由于临时变量的作用域短暂（在C++标准中，临时变量或对象的生命周期在一个完整的语句表达式结束后便宣告结束，也就是在语句float &amp;b=fn1(5.0);之后） ，所以b面临无效的危险，很有可能以后的值是个无法确定的值。</strong></li>
<li>如果真的希望用函数的返回值来初始化一个引用，应当先创建一个变量，将函数的返回值赋给这个变量，然后再用该变量来初始化引用：<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> x=fn1(<span class="number">5.0</span>);</span><br><span class="line"><span class="keyword">int</span> &amp;b=x;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li>case 3:用返回引用的方式调用函数（如下图，图片来源：伯乐在线）<br><img src="/2020/04/26/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_%E8%AF%AD%E8%A8%80/c++/%E4%B8%93%E9%A2%98%E7%9F%A5%E8%AF%86%E7%82%B96%EF%BC%9A%E5%BC%95%E7%94%A8[%E6%91%98%E6%8A%84]/900715-20170824225424339-901573647.png" alt><ol start="2">
<li>这种情况下，函数fn2()的返回值不产生副本，而是直接将变量temp返回给主函数，即主函数的赋值语句中的左值是直接从变量temp中拷贝而来（也就是说c只是变量temp的一个拷贝而非别名） ，这样就避免了临时变量的产生。尤其当变量temp是一个用户自定义的类的对象时，这样还避免了调用类中的拷贝构造函数在内存中创建临时对象的过程，提高了程序的时间和空间的使用效率。</li>
</ol>
</li>
<li>case 4:用函数返回的引用作为新引用的初始化值的方式来调用函数（如下图，图片来源：伯乐在线）<br><img src="/2020/04/26/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_%E8%AF%AD%E8%A8%80/c++/%E4%B8%93%E9%A2%98%E7%9F%A5%E8%AF%86%E7%82%B96%EF%BC%9A%E5%BC%95%E7%94%A8[%E6%91%98%E6%8A%84]/900715-20170824231047714-55281615.png" alt><ol start="2">
<li>这种情况下，函数fn2()的返回值不产生副本，而是直接将变量temp返回给主函数。在主函数中，一个引用声明d用该返回值初始化，也就是说此时d成为变量temp的别名。由于temp是全局变量，所以在d的有效期内temp始终保持有效，故这种做法是安全的。</li>
</ol>
</li>
</ol>
<h4 id="不要返回局部变量"><a href="#不要返回局部变量" class="headerlink" title="不要返回局部变量"></a>不要返回局部变量</h4><ol>
<li><strong>不能返回局部变量的引用。</strong>如上面的例子，如果temp是局部变量，那么它会在函数返回后被销毁，此时对temp的引用就会成为“无所指”的引用，程序会进入未知状态。</li>
<li><strong>不能返回函数内部通过new分配的内存的引用</strong>。虽然不存在局部变量的被动销毁问题，但如果被返回的函数的引用只是作为一个临时变量出现，而没有将其赋值给一个实际的变量，那么就可能造成这个引用所指向的空间（有new分配）无法释放的情况（由于没有具体的变量名，故无法用delete手动释放该内存），从而造成内存泄漏。因此应当避免这种情况的发生</li>
<li><strong>当返回类成员的引用时，最好是const引用</strong>。这样可以避免在无意的情况下破坏该类的成员。<ol>
<li><a href="https://blog.csdn.net/gatieme/article/details/17592187" target="_blank" rel="noopener">类的成员函数返回引用所引发的问题_AderStep-CSDN博客</a></li>
<li>如果我们返回类成员的引用，那么相当于给了用户写这个赶回值的接口，通过这个返回的引用我们可以直接修改成员变量的值，即使是private<ol>
<li><code>base.GetX( ) = 10;</code></li>
</ol>
</li>
<li>这时候，我们就需要使用<code>const int&amp; GetX( )</code>来定义成员函数，这样只能读，不能写，这样的语句就会报错<code>base.GetX( ) = 10;</code></li>
</ol>
</li>
<li>可以用函数返回的引用作为赋值表达式中的左值<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> value[<span class="number">10</span>];</span><br><span class="line"><span class="keyword">int</span> error=<span class="number">-1</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> &amp;<span class="title">func</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n&gt;=<span class="number">0</span>&amp;&amp;n&lt;=<span class="number">9</span>)</span><br><span class="line">        <span class="keyword">return</span> value[n];<span class="comment">//返回的引用所绑定的变量一定是全局变量，不能是函数中定义的局部变量 </span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> error;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    func(<span class="number">0</span>)=<span class="number">10</span>;</span><br><span class="line">    func(<span class="number">4</span>)=<span class="number">12</span>;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;value[<span class="number">0</span>]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;value[<span class="number">4</span>]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://chenzhiheng.cn/2020/04/20/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_%E7%AE%97%E6%B3%95/leetcode/%E9%A2%98%E7%9B%AE/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E7%9A%84%E5%85%B3%E9%94%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈志恒的技术博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/20/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_%E7%AE%97%E6%B3%95/leetcode/%E9%A2%98%E7%9B%AE/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E7%9A%84%E5%85%B3%E9%94%AE/" class="post-title-link" itemprop="url">二分查找的关键</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-20 10:24:00" itemprop="dateCreated datePublished" datetime="2020-04-20T10:24:00+08:00">2020-04-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-05-04 16:19:50" itemprop="dateModified" datetime="2020-05-04T16:19:50+08:00">2020-05-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80-czh-%E7%AE%97%E6%B3%95-leetcode-%E9%A2%98%E7%9B%AE/" itemprop="url" rel="index">
                    <span itemprop="name">b计算机基础/czh_算法/leetcode/题目</span>
                  </a>
                </span>
            </span>

          
            <span id="/2020/04/20/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_%E7%AE%97%E6%B3%95/leetcode/%E9%A2%98%E7%9B%AE/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E7%9A%84%E5%85%B3%E9%94%AE/" class="post-meta-item leancloud_visitors" data-flag-title="二分查找的关键" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>421</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2020年4月20日 下午10:24</p>
<h4 id="关键点："><a href="#关键点：" class="headerlink" title="关键点："></a>关键点：</h4><ol>
<li>定义：我们要找的值在[left,right]闭区间中。在循环的过程中我们要维护这个定义，知道left = right，就可以找到我们target<ol>
<li>注意：这里的[left,right]区间要包括所有的情况，有些题目初始化right = nums.size() 而不是nums.size() - 1就是这个原因</li>
</ol>
</li>
<li>在循环的过程中需要维护两个条件：<ol>
<li>在[left,right]闭区间的包含target的定义</li>
<li>并且，每次循环保证[left,right]区间在缩小，否则会造成死循环<ol>
<li>这里就需要考虑上取整 or 下取整<ol>
<li>上取整 mid = right + (left - right) / 2</li>
<li>下取整 mid = right + (left - right - 1) / 2<ol>
<li>mid = (left + right) / 2</li>
</ol>
</li>
</ol>
</li>
<li>经验结论：<ol>
<li>left = mid or right = mid - 1  =&gt; 上取整</li>
<li>left = mid + 1 or right = mid   =&gt; 下取整</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<h4 id="例题："><a href="#例题：" class="headerlink" title="例题："></a>例题：</h4><p> <a href="https://leetcode-cn.com/problems/ju-qing-hong-fa-shi-jian/" target="_blank" rel="noopener">LCP 08. 剧情触发时间</a><br> <a href="https://leetcode-cn.com/problems/search-insert-position/" target="_blank" rel="noopener">35. 搜索插入位置</a> </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://chenzhiheng.cn/2020/04/16/web%E5%BC%80%E5%8F%91/czh_blog/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F6%E5%A4%A7%E5%8E%9F%E5%88%99%E4%B9%8B%E6%9C%80%E9%87%8D%E8%A6%81%E7%9A%84%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%99/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈志恒的技术博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/16/web%E5%BC%80%E5%8F%91/czh_blog/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F6%E5%A4%A7%E5%8E%9F%E5%88%99%E4%B9%8B%E6%9C%80%E9%87%8D%E8%A6%81%E7%9A%84%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%99/" class="post-title-link" itemprop="url">设计模式6大原则之最重要的开闭原则</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-16 09:43:00" itemprop="dateCreated datePublished" datetime="2020-04-16T09:43:00+08:00">2020-04-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-05-04 16:19:50" itemprop="dateModified" datetime="2020-05-04T16:19:50+08:00">2020-05-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web%E5%BC%80%E5%8F%91-czh-blog-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" itemprop="url" rel="index">
                    <span itemprop="name">web开发/czh_blog/设计模式</span>
                  </a>
                </span>
            </span>

          
            <span id="/2020/04/16/web%E5%BC%80%E5%8F%91/czh_blog/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F6%E5%A4%A7%E5%8E%9F%E5%88%99%E4%B9%8B%E6%9C%80%E9%87%8D%E8%A6%81%E7%9A%84%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%99/" class="post-meta-item leancloud_visitors" data-flag-title="设计模式6大原则之最重要的开闭原则" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>599</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2020年4月16日 上午9:43</p>
<p><a href="https://tianweili.github.io/2015/02/15/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%99-%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%99/" target="_blank" rel="noopener">设计模式六大原则 - 开闭原则 | 李天炜</a></p>
<h3 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h3><ol>
<li>开闭原则是对扩展开放，对修改关闭。</li>
<li>开闭原则的主旨是为了拥抱变化。</li>
<li><strong>在六大原则中，开闭原则只是一个思想，没有具体实际操作方法。其他五大原则都是为了实现这个开闭思想的一些方法和工具</strong>。</li>
<li>想要遵守开闭原则，就需要一个设计合理的系统。可以说在做系统设计的时候就要考虑到未来的扩展和改变。</li>
</ol>
<p><a href="https://baike.baidu.com/item/%E4%BE%9D%E8%B5%96%E5%80%92%E7%BD%AE%E5%8E%9F%E5%88%99/6189149?fromtitle=%E4%BE%9D%E8%B5%96%E5%80%92%E8%BD%AC%E5%8E%9F%E5%88%99&fromid=7706090" target="_blank" rel="noopener">依赖倒置原则_百度百科</a></p>
<ol>
<li><strong>一个应用中的重要策略决定及业务模型正是在这些高层的模块中</strong>。也正是这些模型包含着应用的特性。但是，当这些模块依赖于低层模块时，低层模块的修改将会直接影响到它们，迫使它们也去改变。这种境况是荒谬的。应该是处于高层的模块去迫使那些低层的模块发生改变。应该是处于高层的模块优先于低层的模块。<strong>无论如何高层的模块也不应依赖于低层的模块</strong>。</li>
<li>而且，我们想能够复用的是高层的模块。通过子程序库的形式，我们已经可以很好地复用低层的模块了。当高层的模块依赖于低层的模块时，这些高层模块就很难在不同的环境中复用。但是，当那些<strong>高层模块独立于低层模块</strong>时，它们就能很简单地被复用了。</li>
<li><strong>这正是位于框架设计的最核心之处的原则</strong></li>
<li>总结：<ol>
<li>场景：一个应用中的重要策略决定及业务模型正是在这些高层的模块中</li>
<li>处理方法：无论如何高层的模块也不应依赖于低层的模块，相反高层模块应该独立于低层模块</li>
<li>效果：框架使用这种设计方式可以在将来很容易的添加子模块，并且对框架的使用者来说，使用方式一样的。</li>
</ol>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://chenzhiheng.cn/2020/04/15/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_linux%E5%91%BD%E4%BB%A4/%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/iptable%20vs%20route/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈志恒的技术博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/15/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_linux%E5%91%BD%E4%BB%A4/%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/iptable%20vs%20route/" class="post-title-link" itemprop="url">iptable vs route</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-15 12:19:00" itemprop="dateCreated datePublished" datetime="2020-04-15T12:19:00+08:00">2020-04-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-05-04 16:20:16" itemprop="dateModified" datetime="2020-05-04T16:20:16+08:00">2020-05-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80-czh-linux%E5%91%BD%E4%BB%A4-%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/" itemprop="url" rel="index">
                    <span itemprop="name">b计算机基础/czh_linux命令/常用指令</span>
                  </a>
                </span>
            </span>

          
            <span id="/2020/04/15/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_linux%E5%91%BD%E4%BB%A4/%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/iptable%20vs%20route/" class="post-meta-item leancloud_visitors" data-flag-title="iptable vs route" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.3k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2020年4月15日 下午12:19</p>
<p>注：关于linux中iptable和route这些指令的学习一定要以了解linux系统内核处理过程的设计为前提，否则学习这些命令就是花架子。</p>
<ol>
<li>linux中关于网络的命令有很多：iptable route rule iostat 等等，我觉得他们很乱，我作为一个使用者我该如何理解，学习并可以做到按照场景需要来控制自己的网络数据包的走向呢？这其中最大的问题就是iptable和route之间的区别是什么？iptable是否和route是取代的关系，还是在一套流程中是合作的关系？<ol>
<li><a href="https://superuser.com/questions/419659/iptables-vs-route" target="_blank" rel="noopener">linux - iptables vs route - Super User</a></li>
<li>route is a command that displays, adds and deletes entries from the kernel’s TCP/IP routing table (aka “Forwarding Information Base”).</li>
<li>iptables is a command that displays, adds, and deletes entries from Netfilter, the Linux kernel’s packet filtering and manipulating subsystem. It handles NAT.</li>
<li>这篇文章对route和iptable下了一个准确的定义，可以看出route操作的对象是table，而iptable对应的是linux中的一个内核模块Netfilter</li>
</ol>
</li>
<li>这里首先我们需要了解linux中Netfilter这个内核模块他的逻辑是什么？<br><img src="/2020/04/15/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_linux%E5%91%BD%E4%BB%A4/%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/iptable%20vs%20route/A66DE4C7-65B2-48B3-B7BD-F8F6841E3C59.png" alt><ol start="2">
<li><a href="http://www.zsythink.net/archives/1199" target="_blank" rel="noopener">iptables详解：图文并茂理解iptables</a></li>
</ol>
</li>
<li>这里得再次提醒，一定要站在linux系统内核的角度去分析这个问题，iptable这命令只不过是一个用户接口罢了。从这个图中，我们就可以看到需要做到这几个功能：<ol>
<li>Netfilter模块可作为一个网关路由度器，<strong>转发其他主机发过来的数据包</strong>。</li>
<li><strong>可以接收网络中放给自己的数据包</strong>，然后通过内核，也即是Netfilter来传递给上层的协议栈，进而传递给对应的进程端口</li>
<li>当我们自己<strong>发送数据给别人</strong>时，也需要通过内核态的Netfilter，然后才可以发送到网络上</li>
</ol>
</li>
<li>我们做到上面的基础功能是不够的，在这个数据流动的过程中，我们希望可以对信息进行处理：<ol>
<li>对数据包处理的能力：<ol>
<li>过滤功能</li>
<li>网络地址转换功能</li>
<li>拆解报文，做出修改，并重新封装的功能</li>
<li>连接追踪的功能</li>
</ol>
</li>
<li>定位数据包发送位置的能力：<ol>
<li>判断数据包下一站是去哪里</li>
</ol>
</li>
</ol>
</li>
<li>上面的对数据包处理的能力1-4功能其实对应了iptable中的四种表 filter表，nat表，mangle表，raw表，定位数据包发送位置的能力就是由route table来完成。也就是说其实iptable是更加偏向于提供对数据包处理的能力，而route则是提供所谓的定位发送的能力，也就是路由本身的意思。这里我们就区分开了iptable和route，他们是在一个大的数据处理流程中有不同的任务，他们之间是合作的关系，共同保证数据的正确传输，也就是Netfilter内核的正确运作。</li>
<li>这里有个Netfilter简要的处理流程：转发其他主机发过来的数据包<ol>
<li>Netfilter 处理网络包的先后顺序：接收网络包，先 DNAT，然后查路由策略，查路由策略指定的路由表做路由，然后 SNAT，再发出网络包。<ol>
<li><a href="https://segmentfault.com/q/1010000002389520" target="_blank" rel="noopener">iptables - SNAT和DNAT的区别 - SegmentFault 思否</a></li>
<li>SNAT: Source Network Address Translation，是修改网络包源ip地址的。<ol>
<li>修改源ip地址的目的一般都是为了让这个包能再回到自己这里，所以在iptables中，SNAT是在出口，也即POSTROUTING链发挥作用。</li>
</ol>
</li>
<li>DNAT: Destination Network Address Translation,是修改网络包目的ip地址的。<ol>
<li>修改目的ip地址的原因一般就是为了改变包发送的目的地，让包走出去，而不是留下来，所以在iptables中，DNAT是在入口，也即PREROUTING链中发挥作用，以便让包进入FORWARD表</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li>最后，一个实际的例子来应用route,iptable完成：公司内网要求192.168.0.100 以内的使用 10.0.0.1 网关上网 （电信），其他IP使用 20.0.0.1 （网通）上网。<ol>
<li>参考：<ol>
<li><a href="http://blog.sina.com.cn/s/blog_659b48590100n2q6.html" target="_blank" rel="noopener">使用 ip route ， ip rule ， iptables 配置策略路由_shuti_新浪博客</a></li>
<li><a href="https://www.cnblogs.com/sammyliu/p/4713562.html" target="_blank" rel="noopener">理解 OpenStack 高可用（HA）（3）：Neutron 分布式虚拟路由（Neutron Distributed Virtual Routing） - SammyLiu - 博客园</a></li>
</ol>
</li>
<li>第一步：route<ol>
<li>首先要在网关服务器上添加一个默认路由，当然这个指向是绝大多数的IP的出口网关：ip route add default gw 20.0.0.1</li>
<li>之后通过 ip route 添加一个路由表：ip route add table 3 via 10.0.0.1 dev ethX (ethx 是 10.0.0.1 所在的网卡, 3 是路由表的编号)</li>
</ol>
</li>
<li>第二步：rule<ol>
<li>之后添加 ip rule 规则：ip rule add fwmark 3 table 3 （fwmark 3 是标记，table 3 是路由表3 上边。 意思就是凡事标记了 3 的数据使用 table3 路由表）</li>
</ol>
</li>
<li>第三部：iptables<ol>
<li>之后使用 iptables 给相应的数据打上标记：iptables -A PREROUTING -t mangle -i eth0 -s 192.168.0.1 - 192.168.0.100 -j MARK —set-mark 3</li>
</ol>
</li>
<li>总结：<ol>
<li><strong>因为 mangle 的处理是优先于 nat 和 fiter 表的，所以在数据包到达之后先打上标记，之后再通过 ip rule 规则，对应的数据包使用相应的路由表进行路由，最后读取路由表信息，将数据包送出网关。</strong></li>
</ol>
</li>
</ol>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://chenzhiheng.cn/2020/04/15/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_linux%E5%91%BD%E4%BB%A4/%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/%E4%BB%8E%E5%AF%B9%E8%B1%A1%E5%8D%95%E5%85%83%E7%9A%84%E8%A7%92%E5%BA%A6%E6%95%B4%E7%90%86linux%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiheng Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈志恒的技术博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/15/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_linux%E5%91%BD%E4%BB%A4/%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/%E4%BB%8E%E5%AF%B9%E8%B1%A1%E5%8D%95%E5%85%83%E7%9A%84%E8%A7%92%E5%BA%A6%E6%95%B4%E7%90%86linux%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">从对象单元的角度整理linux命令</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-15 12:04:00" itemprop="dateCreated datePublished" datetime="2020-04-15T12:04:00+08:00">2020-04-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-05-04 16:19:51" itemprop="dateModified" datetime="2020-05-04T16:19:51+08:00">2020-05-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80-czh-linux%E5%91%BD%E4%BB%A4-%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/" itemprop="url" rel="index">
                    <span itemprop="name">b计算机基础/czh_linux命令/常用指令</span>
                  </a>
                </span>
            </span>

          
            <span id="/2020/04/15/b%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/czh_linux%E5%91%BD%E4%BB%A4/%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/%E4%BB%8E%E5%AF%B9%E8%B1%A1%E5%8D%95%E5%85%83%E7%9A%84%E8%A7%92%E5%BA%A6%E6%95%B4%E7%90%86linux%E5%91%BD%E4%BB%A4/" class="post-meta-item leancloud_visitors" data-flag-title="从对象单元的角度整理linux命令" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>800</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2020年4月15日 下午12:04</p>
<h5 id="序："><a href="#序：" class="headerlink" title="序："></a>序：</h5><ul>
<li>为什么会有这篇文章？<ul>
<li>因为我即使在学习、使用linux命令的过程中详细的做了笔记，但是如果半个月不用真的就忘了大半，每次返回来在复习笔记的过程中还是觉得学习路线不清晰，都是散乱的点，所以我就尝试能不能再找一个角度进行总结，所以就有了这篇文章。</li>
</ul>
</li>
<li>那为什么要以对象单元为角度呢？<ul>
<li>其实这个角度我自己起的名字，我的初衷是希望可以结合linux系统的知识反过来推理linux应该提供哪些命令帮助程序员了解linux的运行情况。那么首当其冲的就是以进程为单位，因为linux系统中所有的任务都是一个或者多个进行在处理。对于一个进程进行socket文件读写的任务，从理论上来说我们既可以从进程的角度进行描述，也可以从设备读写的角度进行描述，也可以从网络的角度进行描述，正式因为这种角度的多样性，linux需要为不同需要的程序员来提供各自合适的工具。</li>
</ul>
</li>
</ul>
<h4 id="linux为开发者提供的工具包"><a href="#linux为开发者提供的工具包" class="headerlink" title="linux为开发者提供的工具包"></a>linux为开发者提供的工具包</h4><p><a href="bear://x-callback-url/open-note?id=F73C7047-94EC-4A5B-B716-09802AEF6D42-1064-00001B007E116822">curl</a><br><a href="bear://x-callback-url/open-note?id=DC2233D1-0C53-4BF4-865B-AB001D336C5C-803-0000422566ADD03B">traceroute</a><br>客户端操作进程的方式：<br><a href="bear://x-callback-url/open-note?id=04FCA021-94F1-4407-8E7F-1C03E1BA87C3-1064-00002D298C8E5FE7">Linux 守护进程的启动方法:bg、disown、nohup、tmux、sytemd</a></p>
<ul>
<li><input disabled type="checkbox"> <a href="bear://x-callback-url/open-note?id=BCACC082-63EC-4FF4-AFAD-2676AACAECDF-1064-00002DD065332898">Systemd</a><br><a href="bear://x-callback-url/open-note?id=0A9561F7-3E94-4F01-A9D6-8434F81CCC53-827-000016B0F15519E1">bg+fg</a><br><a href="bear://x-callback-url/open-note?id=F76181EF-0184-431A-B7B3-E5456537AE60-15210-0001827723A95D37">Linux中的定时自动执行功能（at,crontab）</a></li>
</ul>
<h4 id="以硬件设备为单位，查看硬件的执行情况"><a href="#以硬件设备为单位，查看硬件的执行情况" class="headerlink" title="以硬件设备为单位，查看硬件的执行情况"></a>以硬件设备为单位，查看硬件的执行情况</h4><p><a href="bear://x-callback-url/open-note?id=F592CA50-7805-462E-9CF8-2F43F6C2E554-740-00002E84915D9881">ifconfig</a>以网卡为单位<br><a href="bear://x-callback-url/open-note?id=35679952-B3E3-40C0-94E0-45BACA481C2A-1064-00005F220CEC4B47">iftop</a>网卡为单位<br><a href="bear://x-callback-url/open-note?id=FE470B70-E6FF-48D4-BEA0-2F0EBC6221A2-827-00005F331671A6A7">根据iostate判断计算机瓶颈</a>读写设备为单位<br><a href="bear://x-callback-url/open-note?id=C72D8B44-F3C4-437A-A7C8-523342A5476E-1064-000024CD17DF3041">查看系统版本和管理员</a><br><a href="bear://x-callback-url/open-note?id=D1DFB994-BDA0-47A5-993F-052B6A7DEBA8-740-00002C7BCBBD8879">查询cpu信息</a>cpu</p>
<h4 id="以进程为单位，查看linux各个子系统的执行情况："><a href="#以进程为单位，查看linux各个子系统的执行情况：" class="headerlink" title="以进程为单位，查看linux各个子系统的执行情况："></a>以进程为单位，查看linux各个子系统的执行情况：</h4><p><a href="bear://x-callback-url/open-note?id=B9C075C8-BC3A-4A29-976D-4D783B4D9C41-1064-00005F0B1034AA04">htop</a>进程为单位<br><a href="bear://x-callback-url/open-note?id=6F189998-F016-4B08-93CC-9E3880EFDAEA-740-00002B4DF3EA80DE">top</a>进程为单位</p>
<ul>
<li><input disabled type="checkbox"> <a href="bear://x-callback-url/open-note?id=B24690B1-4F33-4790-9A60-AB02830933F6-1064-0000431B6FB57565">lsof(list open files)</a>进程为单位，查看文件读写系统</li>
<li><input disabled type="checkbox"> <a href="bear://x-callback-url/open-note?id=ACFDC824-6D99-46B0-A82B-3844902A3EA4-1064-00005F4826F57092">iotop:每个进程是如何使用 IO</a>进程为单位，查看io子系统</li>
<li><input disabled type="checkbox"> <a href="bear://x-callback-url/open-note?id=177C76D8-6AE3-440C-85D0-0E5D0ABF8E64-827-00000802A7502611">ps</a>进程为单位<br><a href="bear://x-callback-url/open-note?id=2343CD79-DB5D-4B83-9922-A03711CFFDA8-827-00006042D9E747CC">僵尸进程：原理+清理</a><br><a href="bear://x-callback-url/open-note?id=E806CE17-7A6D-4509-A9AF-E2074905933D-1064-00002A8BA1197BC7">kill</a>进程为单位</li>
</ul>
<h4 id="以其他为单位，查看子系统的执行情况"><a href="#以其他为单位，查看子系统的执行情况" class="headerlink" title="以其他为单位，查看子系统的执行情况"></a>以其他为单位，查看子系统的执行情况</h4><p><a href="bear://x-callback-url/open-note?id=C741790D-0479-4BD4-A092-E44897C7FACC-827-000180D29BA8A951">netstat</a>以连接为单位<br><a href="bear://x-callback-url/open-note?id=4EA264FC-8D50-4BCB-AF81-8C494A44E171-1144-0000555FD9C08AB9">iptable</a>以规则为单位<br><a href="bear://x-callback-url/open-note?id=99AB2F0D-CA76-4273-9485-B8642758750A-499-00000A1C27961712">看懂本机上的路由表，并操作</a>以路由规则为单位<br>硬盘：<br><a href="bear://x-callback-url/open-note?id=726B0BF1-9046-441D-986E-43072DE1A68E-740-000021DF2FCC08ED">df</a>目录结构<br><a href="bear://x-callback-url/open-note?id=1203A121-366C-4E68-9ECD-1B3FE6AE66FC-15210-0003F035CD63F862">硬盘</a>目录结构</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/121/">121</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Zhiheng Chen</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">1209</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">104</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zhiheng Chen</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    <span title="站点总字数">1.3m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">18:59</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.7.1
  </div>

        






  <script>
  function leancloudSelector(url) {
    url = encodeURI(url);
    return document.getElementById(url).querySelector('.leancloud-visitors-count');
  }
  if (CONFIG.page.isPost) {
    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = decodeURI(visitors.getAttribute('id'));
      var title = visitors.getAttribute('data-flag-title');

      Counter('get', `/classes/Counter?where=${JSON.stringify({ url })}`)
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .then(response => response.json())
              .then(() => {
                leancloudSelector(url).innerText = counter.time + 1;
              })
              .catch(error => {
                console.error('Failed to save visitor count', error);
              })
          } else {
              Counter('post', '/classes/Counter', { title: title, url: url, time: 1 })
                .then(response => response.json())
                .then(() => {
                  leancloudSelector(url).innerText = 1;
                })
                .catch(error => {
                  console.error('Failed to create', error);
                });
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }
  } else {
    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return decodeURI(element.getAttribute('id'));
      });

      Counter('get', `/classes/Counter?where=${JSON.stringify({ url: { '$in': entries } })}`)
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length === 0) {
            document.querySelectorAll('.leancloud_visitors .leancloud-visitors-count').forEach(element => {
              element.innerText = 0;
            });
            return;
          }
          for (let item of results) {
            let { url, time } = item;
            leancloudSelector(url).innerText = time;
          }
          for (let url of entries) {
            var element = leancloudSelector(url);
            if (element.innerText == '') {
              element.innerText = 0;
            }
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }
  }

  fetch('https://app-router.leancloud.cn/2/route?appId=QiM1vjQ7SAoirKD4qY57L82O-gzGzoHsz')
    .then(response => response.json())
    .then(({ api_server }) => {
      var Counter = (method, url, data) => {
        return fetch(`https://${api_server}/1.1${url}`, {
          method: method,
          headers: {
            'X-LC-Id'     : 'QiM1vjQ7SAoirKD4qY57L82O-gzGzoHsz',
            'X-LC-Key'    : 'aOHhzmfDblK0HGWUqEyb6ra2',
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    });
  </script>


      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  


</body>
</html>
